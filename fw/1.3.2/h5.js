/* Copyright (C) 2012-2018 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.3.2 gitCommitId 0084b77e49d83072e8a23b17039a2fd2b3ca4565 (scopedglobals,util,async,cls,event,resource,controller,dataModel,view,modelWithBinding,validation,ui,api.geo,api.sqldb,api.storage,scene) */
(function(b){function n(b,e,f){var q=null,v=ua[b],t=Sa[b];t&&(q=t(b,v,e,f));!q&&v&&(q=g.u.str.format.apply(null,[v].concat(e)));q&&(q+="(code\x3d"+b+")");e=q?Error(q):Error("FwError: code \x3d "+b);b&&(e.code=b);f&&(e.detail=f);throw e;}function Ta(b){for(var e in b)b.hasOwnProperty(e)&&(ua[e]=b[e])}function ja(b,e,f){var q=null,v=ua[b];v&&(e=[v].concat(e),q=g.u.str.format.apply(null,e));return{code:b,message:q,detail:f}}function P(b){return null==b?b:F(b)?b:[b]}function D(b){return"string"===typeof b}
function va(b){return b.isRejected?b.isRejected():"rejected"===b.state()}function Aa(b){return b.isResolved?b.isResolved():"resolved"===b.state()}function ra(b){return D(b)?!!b.match(/^[A-Za-z_\$][\w|\$]*$/):!1}function wa(c){if("regexp"===b.type(c))return c;var e="",e=-1!==c.indexOf("*")?b.map(c.split("*"),function(b){return b.replace(/\W/g,"\\$\x26")}).join(".*"):c;return new RegExp("^"+e+"$")}function Fa(b,e,f){if(b)if(b._h5UnwrappedCall)b._h5UnwrappedCall(e,f);else if(F(f))b[e].apply(b,f);else b[e](f)}
function pa(c,e,f,q){return c[b.hasOwnProperty("curCSS")?"pipe":"then"](e,f,q)}function Xa(b){return b&&b.document&&9===b.document.nodeType&&ka(b.document)===b}function S(b){return"undefined"===typeof b.nodeType?Xa(b)?b.document:null:9===b.nodeType?b:b.ownerDocument}function ka(b){return window.document===b?window:b.defaultView||b.parentWindow}function Ia(c,e,f,q){function v(h){return function(){if(!w._rejected){var a=g.u.obj.argsToArray(arguments),d=b.inArray(h,c);z[d]=2>a.length?a[0]:a;++w._resolveCount===
w._promisesLength&&w._doneCallbackExecuter()}}}var t=c?c.length:0,u=g.async.isPromise,w=this,z=null;this._doneCallbackExecuter=function(){w._resolved=!0;e&&(z?e.call(this,z):e.apply(this,arguments))};this._failCallbackExecuter=function(){w._rejected=!0;f?f.apply(this,arguments):q&&g.settings.commonFailHandler&&g.settings.commonFailHandler.call(this,arguments)};if(1===t||u(c)){var p=1===t?c[0]:c;u(p)?(this.remove=function(b){this._resolved||this._rejected||p===b&&this._doneCallbackExecuter()},p.done(this._doneCallbackExecuter),
p.fail(this._failCallbackExecuter)):this._doneCallbackExecuter()}else{for(var t=[],l=0,J=c.length;l<J;l++){var n=c[l];u(n)&&t.push(n)}u=t.length;if(0===u)this._resolved=!0,e&&e();else for(this._promises=t,z=[],this._resolveArgs=[],this._resolveCount=0,this._promisesLength=u,l=0;l<u;l++)J=t[l],J.done(v(J)).fail(this._failCallbackExecuter)}}function la(b,e,f,q){return new Ia(b,e,f,q)}var Ja=void 0;if(window.h5){if(window.h5.env&&"1.3.2"===window.h5.env.version)return;Ja=window.h5}var g={};window.h5=
g;g.coexist=function(){window.h5=Ja;return g};g.env={version:"1.3.2"};var ua={},Sa={},fa=function(){var b=null,e=null,f=null;return function(q){b||(b=document.createElement("a"));null===f&&(b.setAttribute("href","./"),f="./"!==b.href);if(f)return b.setAttribute("href",q),b.href;e||(e=document.createElement("span"));e.innerHTML='\x3ca href\x3d"'+q+'" /\x3e';return e.firstChild.href}}(),F=Array.isArray||function(){var b=Object.prototype.toString;return function(e){return"[object Array]"===b.call(e)}}(),
L=function(){if("function"===typeof RegExp()){var b=Object.prototype.toString;return function(e){return"[object Function]"===b.call(e)}}return function(b){return"function"===typeof b}}();Ia.prototype=b.extend(Ia.prototype,{remove:function(c){if(!this._resolved&&!this._rejected)if(promsie===this._promises)this._doneCallback&&doneCallback(),this._resolved=!0;else{var e=b.inArray(c,this._promises);-1!==e&&(this._promises.splice(e,1),this._resolveArgs.splice(e,1),Aa(c)||(this._promisesLength--,that._resolveCount===
this._promisesLength&&this._doneCallbackExecuter()))}}});var V={core:{controllerInternal:null}};(function(){function c(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case "undefined":return"u";case "undefElem":return"_";
case "objElem":return"@"}}function e(a,d){if(D(a)){var b=a;d&&(b=b.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return b=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(e(a.toString())):a}function f(a,d){return"1"===d?a:D(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof
String?new String(f(a.toString())):a}function q(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function v(a,d,b){var c=g.async.deferred();g.ajax({url:a,async:d,cache:b,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=z(arguments);a.push(this.url);c.notifyWith(c,a);c.resolveWith(c,a)}).fail(function(){c.rejectWith(c,z(arguments))});return c.promise()}function t(a){D(a)||n(11E3,"h5.u.obj.ns()");a=a.split(".");for(var d=a.length,b=0;b<d;b++)ra(a[b])||
n(11E3,"h5.u.obj.ns()");for(var c=window,b=0;b<d;b++){var h=a[b];"undefined"===typeof c[h]&&(c[h]={});c=c[h]}return c}function u(a,d){var b=t(a),c;for(c in d)d.hasOwnProperty(c)&&(void 0!==b[c]&&n(11001,[a,c]),b[c]=d[c])}function w(a){return a&&a.jquery?a.jquery===b().jquery:!1}function z(a){return Array.prototype.slice.call(a)}function p(a,d){D(a)||n(11E3,"h5.u.obj.getByPath()");a=a.replace(/\[(\d+)\]/g,function(a,d,b){return b?"."+d:d});var b=a.split("."),c=0;"window"!==b[0]||d&&d!==window||(c=
1);for(var h=d||window,f=b.length;c<f&&(h=h[b[c]],null!=h);c++);return h}var l={},J={"\x26":"\x26amp;",'"':"\x26quot;","\x3c":"\x26lt;","\x3e":"\x26gt;","'":"\x26#39;"},H=void 0!==document.createElement("script").onload,h=-1===/\r\n/.toString().indexOf("\r\n");u("h5.u",{loadScript:function(a,d){var k=g.async.deferred,c=P(a);c&&0!==c.length||n(11007);for(var h=0,f=c.length;h<f;h++)a=c[h],D(a)&&b.trim(a)||n(11007);null==d||b.isPlainObject(d)||n(11008,"h5.u.loadScript()");var e=d&&!1===d.async?!1:!0,
q=!(!d||!0!==d.force),h=!(!d||!0!==d.parallel),p=!(!d||!0!==d.atomic),t=!q,A=e?k():null,u=e?function(a){A.reject(ja(11010,[a]))}:null,f=e?function(){var a=k();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,ma=h?[]:null,J=[],w={};if(e){if(!p&&H){var ba=b("head"),I=function(a){var d=k(),b=document.createElement("script");b.onload=function(){b.onload=null;l[a]=a;d.resolve()};b.onerror=function(){b.onerror=null;d.reject(a)};b.type="text/javascript";b.src=t?a:a+(-1<a.indexOf("?")?"\x26_":
"?_")+ +new Date;ba[0].appendChild(b);return d.promise()};if(h)ma.push(f()),b.each(c,function(){var a=fa(this.toString());if(!q&&a in l)return!0;ma.push(I(a))}),la(ma,function(){A.resolve()},u);else{var X=pa(k().resolve(),f);b.each(c,function(){var a=fa(this.toString());X=pa(X,function(){if(q||!(a in l))return I(a)},u)});pa(X,function(){A.resolve()},u)}}else if(h){var R=[];ma.push(f());R.push(null);b.each(c,function(){var a=fa(this.toString());if(!q&&(a in l||a in w))return!0;ma.push(v(a,e,t));p?
w[a]=a:R.push(null)});h=c=null;p?(c=function(){b.each(z(arguments),function(a,d){b.globalEval(d[0])});b.extend(l,w);A.resolve()},h=b.noop):(c=function(){A.resolve()},h=function(){for(var a=z(arguments),d=0;d<R.length;d++)if(a[d]){var k=a[d][3];R[d]!==k&&(b.globalEval(a[d][0]),R.splice(d,1,k))}});g.async.when(ma).done(c).fail(u).progress(h)}else X=pa(k().resolve(),f),b.each(c,function(){var a=fa(this.toString());X=pa(X,function(){var d=k();!q&&(a in l||a in w)?d.resolve():v(a,e,t).done(function(k,
c,h){p?(J.push(k),w[a]=a):(b.globalEval(k),l[a]=a);d.resolve()}).fail(function(){d.reject(this.url)});return d.promise()},u)}),pa(X,function(){p&&(b.each(J,function(a,d){b.globalEval(d)}),b.extend(l,w));A.resolve()},u);return A.promise()}b.each(c,function(){var a=fa(this.toString());if(!q&&(a in l||a in w))return!0;v(a,e,t).done(function(d,k,c){p?(J.push(d),w[a]=a):(b.globalEval(d),l[a]=a)}).fail(function(){n(11010,[a])})});p&&(b.each(J,function(a,d){b.globalEval(d)}),b.extend(l,w))},createInterceptor:function(a,
d){return function(b){var c={},h=a?a.call(this,b,c):b.proceed();b.result=h;if(!d)return h;if(h&&L(h.promise)&&!w(h)){var f=this;Fa(h,"always",function(){d.call(f,b,c)});return h}d.call(this,b,c);return h}}});u("h5.u.str",{startsWith:function(a,d){return 0===a.lastIndexOf(d,0)},endsWith:function(a,d){var b=a.length-d.length;return 0<=b&&a.lastIndexOf(d)===b},format:function(a,d){if(null==a)return"";var b=z(arguments).slice(1);return a.replace(/\{(.+?)\}/g,function(a,d){if(/^\d+$/.test(d)){var c=b[parseInt(d,
10)];return"undefined"===typeof c?"undefined":c}c=/^\d+[\.|\[]/.test(d)?d:"0."+d;c=p(c,b);return"undefined"===typeof c?"undefined":c})},escapeHtml:function(a){return"string"!==b.type(a)?a:a.replace(/[&"'<>]/g,function(a){return J[a]})}});u("h5.u.obj",{expose:u,ns:t,serialize:function(a){function d(a){for(var d=0,b=l.length;d<b;d++)if(a===l[d])return!0;return!1}function k(a){for(var d=0,b=l.length;d<b;d++)a===l[d]&&l.splice(d,1)}function f(a){var m=a,p=b.type(a);"object"===typeof a&&(a instanceof String?
p="String":a instanceof Number?p="Number":a instanceof Boolean&&(p="Boolean"));switch(p){case "String":case "string":m=c(p)+e(m);break;case "Boolean":m=m.valueOf();case "boolean":m=c(p)+(m?1:0);break;case "Number":m=m.valueOf();if(b.isNaN&&b.isNaN(a)||b.isNumeric&&!b.isNumeric(a))m=Infinity===a.valueOf()?c("infinity"):-Infinity===a.valueOf()?c("-infinity"):c("nan");m=c(p)+m;break;case "number":m=b.isNaN&&b.isNaN(a)||b.isNumeric&&!b.isNumeric(a)?Infinity===a?c("infinity"):-Infinity===a?c("-infinity"):
c("nan"):c(p)+m;break;case "regexp":m=c(p)+e(m.toString(),h);break;case "date":m=c(p)+ +m;break;case "array":d(a)&&n(ERR_CODE_REFERENCE_CYCLE);l.push(a);for(var z=[],m=c(p)+"[",p=0,t=a.length;p<t;p++){z[p.toString()]=!0;var A;A=a.hasOwnProperty(p)?"function"===b.type(a[p])?c("undefined"):q(f(a[p])):c("undefElem");m+='"'+A+'"';p!==a.length-1&&(m+=",")}var p="",g;for(g in a)z[g]||"function"!==b.type(a[g])&&(p+='"'+q(e(g))+'":"'+q(f(a[g]))+'",');p&&(m+=(a.length?",":"")+'"'+c("objElem")+"{"+q(p),m=m.replace(/,$/,
""),m+='}"');m+="]";k(a);break;case "object":d(a)&&n(11005);l.push(a);m=c(p)+"{";for(g in a)a.hasOwnProperty(g)&&"function"!==b.type(a[g])&&(m+='"'+q(e(g))+'":"'+q(f(a[g]))+'",');m=m.replace(/,$/,"");m+="}";k(a);break;case "null":case "undefined":m=c(p)}return m}L(a)&&n(11002);var l=[];return"2|"+f(a)},deserialize:function(a){function d(a){function h(a){switch(a){case "s":return"string";case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";
case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return"undefined";case "_":return"undefElem";case "@":return"objElem"}}a.match(/^(.)(.*)/);a=RegExp.$1;m=RegExp.$2?RegExp.$2:"";if(void 0!==a&&""!==a)switch(h(a)){case "String":m=new String(f(m,k));break;case "string":break;case "Boolean":"0"===m||"1"===m?m=new Boolean("1"===m):n(11006);break;case "boolean":"0"===
m||"1"===m?m="1"===m:n(11006);break;case "nan":""!==m&&n(11006);m=NaN;break;case "infinity":""!==m&&n(11006);m=Infinity;break;case "-infinity":""!==m&&n(11006);m=-Infinity;break;case "Number":"infinity"===h(m)?m=new Number(Infinity):"-infinity"===h(m)?m=new Number(-Infinity):"nan"===h(m)?m=new Number(NaN):(m=new Number(m),isNaN(m.valueOf())&&n(11006));break;case "number":m=(new Number(m)).valueOf();isNaN(m)&&n(11006);break;case "array":var e;try{e=b.parseJSON(m)}catch(l){n(11006)}F(e)||n(11006);for(var m=
[],p=0,q=e.length;p<q;p++)switch(h(e[p].substring(0,1))){case "undefElem":m[p]=void 0;delete m[p];break;case "objElem":a=d(c("object")+e[p].substring(1));for(var z in a)m[f(z)]=a[z];break;default:m[p]=d(e[p])}break;case "object":try{e=b.parseJSON(m)}catch(l){n(11006)}b.isPlainObject(e)||n(11006);m={};for(z in e)a=d(e[z]),m[f(z)]=a;break;case "date":m=new Date(parseInt(m,10));break;case "regexp":try{p=m.match(/^\/(.*)\/(.*)$/),q=f(p[1],k),m=new RegExp(q,p[2])}catch(l){n(11006)}break;case "null":""!==
m&&n(11006);m=null;break;case "undefined":""!==m&&n(11006);m=void 0;break;default:n(11004)}return f(m,k)}D(a)||n(11009);a.match(/^(.)\|(.*)/);var k=RegExp.$1;"1"!==k&&"2"!==k&&n(11003,[k,"2"]);return d(RegExp.$2)},isJQueryObject:w,argsToArray:z,getByPath:p})})();(function(){function c(b,c){b.target||(b.target=c);b.timeStamp||(b.timeStamp=(new Date).getTime());if(!b.isDefaultPrevented){var f=!1;b.isDefaultPrevented=function(){return f};b.preventDefault=function(){f=!0}}if(!b.isImmediatePropagationStopped){var e=
!1;b.isImmediatePropagationStopped=function(){return e};b.stopImmediatePropagation=function(){e=!0}}}function e(b){var c={},f;for(f in b){var e=b[f];b.hasOwnProperty(f)&&(L(e)||null===e||"string"===typeof e||"number"===typeof e||"boolean"===typeof e)&&(c[f]=e)}this._mix=function(b){for(var f in c)b[f]=c[f]};this._hasInterface=function(b){for(var f in c)if(!g.u.str.startsWith(f,"_")&&"undefined"===typeof b[f])return!1;return!0}}function f(b){return new e(b)}b.extend(e.prototype,{mix:function(b){return this._mix(b)},
hasInterface:function(b){return this._hasInterface(b)}});g.u.obj.expose("h5.mixin",{createMixin:f,eventDispatcher:f({hasEventListener:function(b,c){if(!this._eventListeners)return!1;var f=this._eventListeners[b];if(!f||!this._eventListeners.hasOwnProperty(b))return!1;for(var e=0,g=f.length;e<g;e++)if(f[e]===c)return!0;return!1},addEventListener:function(b,c){(2>arguments.length||!D(b))&&n(16E3);null==c||this.hasEventListener(b,c)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(b)||
(this._eventListeners[b]=[]),this._eventListeners[b].push(c))},removeEventListener:function(b,c){if(this.hasEventListener(b,c))for(var f=this._eventListeners[b],e=0,g=f.length;e<g;e++)if(f[e]===c){f.splice(e,1);break}},dispatchEvent:function(b){if(this._eventListeners){var f=this._eventListeners[b.type];if(f){f=f.slice(0);c(b,this);for(var e=0,g=f.length;e<g&&!b.isImmediatePropagationStopped();e++)L(f[e])?f[e].call(b.target,b):f[e].handleEvent&&f[e].handleEvent(b);return b.isDefaultPrevented()}}}})})})();
(function(){function c(b){return b.match(/^error$/i)?u.ERROR:b.match(/^warn$/i)?u.WARN:b.match(/^info$/i)?u.INFO:b.match(/^debug$/i)?u.DEBUG:b.match(/^trace$/i)?u.TRACE:b.match(/^all$/i)?u.ALL:b.match(/^none$/i)?u.NONE:null}function e(b,c){var f={},e=b.slice(0,c),g=Math.min(3,c),h=e.slice(0,g).join(" \x3c- ");e.length>g&&(h+=" ...");f.preview=h;f.all=e.join("\n");return f}function f(b){b.name?b=b.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(b.toString()),b=RegExp.$1);return b}function q(c){c=g.u.obj.argsToArray(c);
for(var f=[],e=0,q=c.length;e<q;e++)f.push(b.type(c[e]));return f.join(", ")}function v(){}function t(c){D(c)&&0!==b.trim(c).length||n(10005);this.category=b.trim(c)}var u={ERROR:50,WARN:40,INFO:30,DEBUG:20,TRACE:10,ALL:0,NONE:-1},w=null;v.prototype={init:function(b){},log:function(b){window.console&&(D(b.args[0])?this._logMsg(b):this._logObj(b))},_logMsg:function(b){var c=b.args,c=1===c.length?c[0]:g.u.str.format.apply(g.u.str,c),c=this._getLogPrefix(b)+c;b.logger.enableStackTrace&&(c+="  ["+b.stackTrace.preview+
"]");b.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(c):this._consoleOut(b.level,c);b.logger.enableStackTrace&&this._consoleOut(b.level,b.stackTrace.all);b.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(b,c){var f=!1;b==u.ERROR&&console.error?(console.error(c),f=!0):b==u.WARN&&console.warn?(console.warn(c),f=!0):b==u.INFO&&console.info?(console.info(c),f=!0):b==u.DEBUG&&console.debug&&(console.debug(c),f=!0);!f&&console.log&&console.log(c)},
_getLogPrefix:function(b){return"["+b.levelString+"]"+b.date.getHours()+":"+b.date.getMinutes()+":"+b.date.getSeconds()+","+b.date.getMilliseconds()+": "},_logObj:function(b){var c=b.args,f=this._getLogPrefix(b);c.unshift(f);b.level==u.ERROR&&console.error?this._output(console.error,c):b.level==u.WARN&&console.warn?this._output(console.warn,c):b.level==u.INFO&&console.info?this._output(console.info,c):b.level==u.DEBUG&&console.debug?this._output(console.debug,c):this._output(console.log,c)},_output:function(b,
c){try{if(b.apply){b.apply(console,c);return}}catch(f){}b(c)}};t.prototype={enableStackTrace:!1,maxStackSize:10,error:function(b){this._log(u.ERROR,arguments,this.error)},warn:function(b){this._log(u.WARN,arguments,this.warn)},info:function(b){this._log(u.INFO,arguments,this.info)},debug:function(b){this._log(u.DEBUG,arguments,this.debug)},trace:function(b){this._log(u.TRACE,arguments,this.trace)},_traceFunctionName:function(c){var p=[],l=Error();if(l=l.stack||l.stacktrace)var g=/_traceFunctionName/,
p=l.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),t=null,h=null,p=b.map(p,function(a,d){if(0===a.length)return null==h?"":null;t=""===b.trim(a)?"{anonymous}":b.trim(a);null===h&&g.test(a)&&(h=d);return t}).slice(h+3);else{c=c.caller;for(var l=0,a=this.maxStackSize;l<a;l++){var d=f(c),k=q(c.arguments),y;try{y=c.caller}catch(M){p.push("{unable to trace}");break}d?p.push("{"+d+"}("+k+")"):y?p.push("{anonymous}("+
k+")"):p.push("{root}("+k+")");if(!y)break;c=y}}return e(p,this.maxStackSize)},_log:function(b,c,f){c={level:b,args:g.u.obj.argsToArray(c),stackTrace:this.enableStackTrace?this._traceFunctionName(f):""};var e=w.out,q=w.defaultOut;f=[];var h=!1;if(e)for(var e=P(e),a=0,d=e.length;a<d;a++){var k=e[a];if(k.compiledCategory.test(this.category)&&b>=k.compiledLevel&&0<=k.compiledLevel&&(f.push(k),!1!==k.terminate)){h=!0;break}}f.length&&h||f.push(q);a=0;for(e=f.length;a<e;a++){q=f[a];d=q.compiledLevel;q=
q.compiledTargets;if(b<d||0>d)break;c.logger=this;c.date=new Date;c.levelString=this._levelToString(b);if(!q||0===q.length)break;h=0;for(d=q.length;h<d;h++)q[h].log(c)}},_levelToString:function(b){if(b===u.ERROR)return"ERROR";if(b===u.WARN)return"WARN";if(b===u.INFO)return"INFO";if(b===u.DEBUG)return"DEBUG";if(b===u.TRACE)return"TRACE"}};g.u.obj.expose("h5.log",{createLogger:function(b){return new t(b)},configure:function(){function f(a,d,k){if(!k){var h=d.category;D(h)&&0!==b.trim(h).length||n(10010);
h=b.trim(h);d.compiledCategory=wa(h);t.push(h)}k=null==d.level?c(k?e.level:q.level):D(d.level)?c(b.trim(d.level)):d.level;"number"!==typeof k&&n(10003,d.level);d.compiledLevel=k;k=[];h=d.targets;if(null!=h){var l=[];null==h||F(h)||D(h)&&b.trim(h).length||n(10008);for(var h=P(h),g=0,u=h.length;g<u;g++){null==h[g]||D(h[g])&&b.trim(h[g]).length||n(10008);var A=h[g];if(A){-1!==b.inArray(A,l)&&n(10007,A);var v=a[A];v||n(10004,A);l.push(A);k.push(v.compiledTarget)}}}d.compiledTargets=k}var e={level:"NONE",
targets:null},l=b.extend(!0,{},g.settings.log),q=l.defaultOut;q||(q=e,l.defaultOut=q);var t=[],h=l.target;h||(h={},l.target=h);(function(a){b.isPlainObject(a)||n(10009);for(var d in a){var c=a[d];"object"!==b.type(c.type)&&"console"!==c.type&&n(1E4);var k;k="console"===c.type?new v:b.extend(!0,{},c.type);k.init&&k.init(c);c.compiledTarget=k}a.console={type:"console",compiledTarget:new v}})(h);f(h,q,!0);var a=l.out;if(a)for(var a=P(a),d=0,k=a.length;d<k;d++)f(h,a[d]);w=l}})})();(function(){function c(c){g.settings.aspects=
b.map(P(c),function(b){b.target&&(b.compiledTarget=wa(b.target));b.pointCut&&(b.compiledPointCut=wa(b.pointCut));return b})}g.u.obj.ns("h5.settings");g.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(b,c,e){b=b.status;if("POST"===this.type||0!==b&&12029!==b)return!1}},trackstartTouchAction:"none",res:{baseUrl:null,resolveTimeout:1E4},scene:{followTitle:!0,clientQueryStringPrefix:"",
clientFWQueryStringPrefix:"_h5_",urlHistoryMode:"history",urlMaxLength:1800,baseUrl:null,autoInit:!1}};var e=g.u.createInterceptor(function(b,c){this.log.info("{0}.{1}が開始されました。",this.__name,b.funcName);this.log.info(b.args);c.start=new Date;return b.proceed()},function(b,c){var e=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time\x3d{2}ms",this.__name,b.funcName,e)});g.u.obj.expose("h5.core.interceptor",{lapInterceptor:e,logInterceptor:e,errorInterceptor:function(b){var c=
null;try{c=b.proceed()}catch(e){g.settings.commonFailHandler&&L(g.settings.commonFailHandler)&&g.settings.commonFailHandler.call(null,e)}return c}});b(document).trigger("h5preinit");g.settings.aspects&&c(g.settings.aspects);g.log.configure()})();(function(){g.u.obj.expose("h5.env",{ua:function(c){function e(a,b){var d=Y(a,"[^;)]*",b).split(" ");return 1===d.length?"":d[d.length-1]}function f(a,b){var d=Y(a,"[^;) ]*",b).split("/");return 1===d.length?"":d[d.length-1]}function g(a,b){var d=Y(a,"[^;) ]*",
b).split(":");return 1===d.length?"":d[d.length-1]}var v=!!c.match(/iPhone/i),t=!!c.match(/iPad/i),u=v||t,w=!!c.match(/android/i),n=!!c.match(/Windows Phone/i),p=!!c.match(/Edge/),l=!!c.match(/MSIE/)||!!c.match(/Trident/),J=!!c.match(/Firefox/i),H=!p&&!!c.match(/Chrome/i)||!!c.match(/CrMo/)||!!c.match(/CriOS/),h=!p&&!w&&!H&&!!c.match(/Safari/i),a=!p&&!!c.match(/Webkit/i),d=!!c.match(/Opera/i),k=w&&!!c.match(/Safari/i)&&!H,y=!!(v||n||k&&c.match(/Mobile/)&&!c.match(/SC-01C/)||w&&H&&c.match(/Mobile/)||
c.match(/Fennec/i)||c.match(/Opera Mobi/i)),M=!!(t||k&&!c.match(/Mobile/)||w&&H&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i)),da=!y&&!M,m=null,N=null,Q=function(a,d){return b.trim(c.substring(c.indexOf(a)+a.length,c.indexOf(d))).split("_")},Y=function(a,d,k){return b.trim(c.match(!1===k?new RegExp(a+d):new RegExp(a+d,"i")))};v?(N=Q("iPhone OS","like"),m=parseInt(N[0]),N=N.join(".")):t?(N=Q("CPU OS","like"),m=parseInt(N[0]),N=N.join(".")):w&&J||(w?(N=e("Android"),
m=parseInt(N.split(".")[0])):n&&((N=e("Windows Phone OS"))||(N=e("Windows Phone")),m=parseInt(N.split(".")[0])));l&&d&&(l=!1);var A=Q=null;if(u||w&&k)Q=m,A=N;else{var C=null;l?C=e("MSIE",!1)||g("rv"):H?(C=f("Chrome",!1))||(C=f("CrMo",!1)):h?C=f("Version"):J?C=f("Firefox"):d?((C=f("Version"))||(C=f("Opera")),C||(C=e("Opera"))):p&&(C=f("Edge"));C&&(Q=parseInt(C.split(".")[0]),A=C)}return{osVersion:m,osVersionFull:N,browserVersion:Q,browserVersionFull:A,isiPhone:v,isiPad:t,isiOS:u,isAndroid:w,isWindowsPhone:n,
isIE:l,isFirefox:J,isChrome:H,isSafari:h,isOpera:d,isEdge:p,isAndroidDefaultBrowser:k,isSmartPhone:y,isTablet:M,isDesktop:da,isWebkit:a}}(navigator.userAgent)})})();(function(){function c(b){function c(){f=!0;h=this;a=u(arguments);if(va(b)||Aa(b))return b;var k=u(arguments);if(0<d.length)for(var e=0,g=d.length;e<g;e++){var p=k;p!==arguments&&(p=P(p));L(d[e])&&d[e].apply(this,p)}return b}var f=!1,h=null,a=null,d=[];b.progress=function(){for(var c=u(arguments),e=0,p=c.length;e<p;e++){var g=c[e];if(F(g))b.progress.apply(this,
g);else if(L(g))if(f){var m=a;m!==a&&(m=P(m));g.apply(h,m)}else d.push(g)}return this};b.notify=c;b.notifyWith=function(a,b){return b?c.apply(a,b):c.apply(a)}}function e(b){if(!b)return!1;b=P(b);for(var c=0,e=b.length;c<e;c++)if(L(b[c]))return!0;return!1}function f(l,n){function z(a){n?n[a]&&(l[a]=n[a]):(y[a]=l[a],l[a]=function(b){return function(){if(!d){var b=u(arguments);if("then"===a||"pipe"===a)b=b[1];e(b)&&(d=!0)}return l._h5UnwrappedCall.call(this,a,u(arguments))}}(a),M[a]=l[a])}function h(a){return function(){var b=
g.settings.commonFailHandler;d||!b||k||(l.fail.call(this,b),k=!0);return a.apply(this,arguments)}}if(l._h5UnwrappedCall)return l;var a=!!l.progress;a||p(l)?n&&(l.progress=n.progress):c(l);var d=!1,k=!1,y={},M={};l._h5UnwrappedCall=n?n._h5UnwrappedCall:function(a,d){d=P(d);b.extend(l,y);var c=l[a].apply(this,d);b.extend(l,M);return c};for(var da=0,m=q.length;da<m;da++){var N=q[da];l[N]&&z(N)}l.pipe&&!n&&(l.pipe=function(){for(var a=g.async.deferred(),b=u(arguments),d=0,c=v.length;d<c;d++){var k=this;
(function(b,d,c){function h(){if(e){var d=b.apply(this,arguments);if(d&&L(d.promise))f(d),d.done(a.resolve),d._h5UnwrappedCall("fail",a.reject),L(d.progress)&&d.progress(a.notify);else a[c+"With"](this,[d])}else a[c+"With"](this,arguments)}var e=L(b);if(e||"fail"!==d)k[d](h);else k._h5UnwrappedCall(d,h)})(b[d],v[d],t[d])}return a.promise()},M.pipe=l.pipe);if(l.then&&!n){var Q=l.then;l.then=w?l.pipe:function(){var b=arguments,d=Q.apply(this,b);!a&&e(b[2])&&l.progress.call(l,b[2]);return d};M.then=
l.then}l.reject&&(l.reject=n&&n.reject?n.reject:h(l.reject));l.rejectWith&&(l.rejectWith=n&&n.rejectWith?n.rejectWith:h(l.rejectWith));if(l.promise)if(n&&n.promise)l.promise=n.promise;else{var Y=l.promise;l.promise=function(){return f(Y.apply(this,arguments),l)}}return l}var q=["fail","always","pipe","then"],v=["done","fail","progress"],t=["resolve","reject","notify"],u=g.u.obj.argsToArray,w=function(){var c=b.Deferred();return c!==c.then()}(),z=function(){var c=b.Deferred();return f(c)},p=function(b){return!!b&&
b.done&&b.fail&&!b.resolve&&!b.reject};g.u.obj.expose("h5.async",{deferred:z,when:function(){var c=u(arguments);1===c.length&&F(c[0])&&(c=c[0]);var e=c.length,f=g.async.deferred(),h=f.promise(),a=b.when.apply(b,c).done(function(){f.resolveWith(this&&this.promise&&this.promise()===a?f:this,u(arguments))}).fail(function(){f.rejectWith(this,u(arguments))});if(a.progress)a.progress(function(){f.notifyWith(this===a?h:this,u(arguments))});else{for(var d=function(a){return function(b){k[a]=1<arguments.length?
u(arguments):b;f.notifyWith(h,k)}},k=[],y=0;y<e;y++)k[y]=void 0;for(y=0;y<e;y++){var p=c[y];p&&L(p.promise)&&p.progress&&(1<e?p.progress(d(y)):p.progress(function(){f.notifyWith(h,u(arguments))}))}}return h},isPromise:p,loop:function(c,e,f){F(c)||n(5E3);var h=z(),a="number"===b.type(f)?f:20,d=0,k=c.length,y,g=null,q=function(){if(d===k)h.resolve(c);else{var a=e.call(c,d,c[d],g);d++;p(a)?a.done(function(){y()}).fail(function(){h.reject(c)}):y()}},m=function(){setTimeout(function(){var a=d-1;0<d&&h.notify({data:c,
index:a,value:c[a]});q()},0)},t=!1;y=function(){t||(0===d%a?m():q())};var u=!1,g={resume:function(){!u&&t&&(t=!1,y())},pause:function(){t=!0},stop:function(){u=!0;h.resolve(c)}};m();return h.promise()}})})();(function(){function c(b,c){for(var e=0,f=v.length;e<f;e++){var g=v[e];b[g]&&(c[t[g]](b[g]),b[g]=void 0)}}function e(c,e,f){for(var g in e)!e.hasOwnProperty(g)||!f&&L(e[g])||-1!==b.inArray(g,q)||(c[g]=e[g])}function f(b,c){e(this,b,!0);c.promise(this);var f=this.always;this.always=function(){f.apply(this,
arguments);return this}}var q=["error","success","complete"],v=["error","success","complete"],t={success:"done",error:"fail",complete:"always"};g.u.obj.expose("h5",{ajax:function(){function q(b,c,a){e(n,a);l.resolveWith(this,arguments)}function t(c,h,a){if(0===v.retryCount||!1===v.retryFilter.apply(this,arguments))e(n,c),l.rejectWith(this,arguments);else if(v.retryCount--,this.async){var d=this;setTimeout(function(){b.ajax(d).done(q).fail(t)},v.retryInterval)}else b.ajax(this).done(q).fail(t)}var v=
{},p=arguments;D(p[0])?(b.extend(v,p[1]),v.url=p[0]):b.extend(v,p[0]);var v=b.extend({},g.settings.ajax,v),l=g.async.deferred();c(v,l);var p=b.ajax(v),n=new f(p,l);p.done(q).fail(t);return n}})})();(function(){function c(b,a){var d=a.getParentClass();d&&c(b,d);var k=a.getDescriptor(),e=k.field;if(e)for(var f in e){var g=e[f],d=null;g&&void 0!==g.defaultValue&&(d=g.defaultValue);b[f]=d}if(f=k.accessor)for(var p in f)k=f[p],d=null,k&&void 0!==k.defaultValue&&(d=k.defaultValue),null==k&&Object.defineProperty(b,
"_p_"+p,{writable:!0,configurable:!1,enumerable:!1,value:d})}function e(b){p.forEach(function(a){if(b===a)throw Error(g.u.str.format('静的メンバーの名前 "{0}" は使用できません。',b));})}function f(b,a,d){if(!d||!d.name)throw Error("classDescritporがない、またはnameがありません。");if(!d.method||!d.method.constructor)throw Error("classDescritporのメソッド定義にconstructor定義がありません。");var c=d.method.constructor;a&&(c.prototype=Object.create(a._ctor.prototype),c.prototype.constructor=c);var e={constructor:function(){for(var a=arguments.length,
b=Array(a),d=0;d<a;d++)b[d]=arguments[d];return c.apply(this,b)}},f=new w(b,d,c,a,e);c.prototype.__name=d.name;c.prototype._class=f;var p=[{descriptor:d,ctor:c}],m={};if(a){do{p.unshift({descriptor:a._descriptor,ctor:a._ctor});for(var l in a._descriptor.field||{})m[l]="field";for(l in a._descriptor.accessor||{})m[l]="accessor";for(l in a._descriptor.method||{})"constructor"!==l&&(m[l]="method")}while(a=a._parentClass)}a=d.field;var t=d.accessor,v=d.method;for(l in v)if("constructor"!==l){var A=v[l];
if("function"!==typeof A)throw Error("クラスディスクリプタのmethodには、関数以外は指定できません。メソッド\x3d"+d.name+"."+l);if("string"===typeof m[l]&&"method"!==m[l]||a&&l in a||t&&l in t)throw Error(g.u.str.format('メンバーの名前 "{0}" が重複しています。',l));c.prototype[l]=A}if(a)for(var n in a)if("string"===typeof m[n]&&"field"!==m[n]||t&&n in t||n in v)throw Error(g.u.str.format('メンバーの名前 "{0}" が重複しています。',n));if(t){if("_class"in t)throw Error("親クラスで定義されているプロパティは再定義できません。プロパティ名\x3d_class");for(var u in t){if("string"===typeof m[u]&&"accessor"!==
m[u]||a&&u in a||u in v)throw Error(g.u.str.format('メンバーの名前 "{0}" が重複しています。',u));(l=t[u])?Object.defineProperty(c.prototype,u,{configurable:!1,enumerable:!0,get:l.get,set:l.set}):function(a){Object.defineProperty(c.prototype,a,{configurable:!1,enumerable:!0,get:function(){return this["_p_"+a]},set:function(b){this["_p_"+a]=b}})}(u)}}p.forEach(function(a){if(a.descriptor.method){var b=a.descriptor.method,d;for(d in b)"constructor"!==d&&(e[d]=b[d])}if(a.descriptor.accessor){var b=a.descriptor.accessor,
c;for(c in b){b=c;d={};var k=Object.getOwnPropertyDescriptor(a.ctor.prototype,b);k.get&&(d.get=k.get);k.set&&(d.set=k.set);Object.freeze(d);e[b]=d}}});Object.freeze(e);q(f,d);return b._classMap[d.name]=f}function q(b,a){var d=a.staticField||{},c=a.staticAccessor||{},f=a.staticMethod||{},p=Object.keys(d).concat(Object.keys(c)).concat(Object.keys(f));p.forEach(function(a){e(a)});for(var l=p.length,m=0;m<l-1;m++)for(var q=m+1;q<l;q++)if(p[m]===p[q])throw Error(g.u.str.format('静的メンバーの名前 "{0}" が重複しています。',
p[m]));v(b,d);t(b,c);n(b,f);Object.seal(b.statics)}function v(b,a){Object.keys(a).forEach(function(d){var c=a[d],e=c&&!0===c.isReadOnly;Object.defineProperty(b._ctor,d,{enumerable:!0,configurable:!1,value:c&&"defaultValue"in c?c.defaultValue:null,writable:!e});c={enumerable:!0,configurable:!1,get:function(){return b._ctor[d]}};e||(c.set=function(a){b._ctor[d]=a});Object.defineProperty(b.statics,d,c)})}function t(b,a){Object.keys(a).forEach(function(d){var c=a[d],e={enumerable:!0,configurable:!1};
if(c)e.get=c.get,e.set=c.set;else{var f=null;e.get=function(){return f};e.set=function(a){f=a}}Object.defineProperty(b._ctor,d,e);Object.defineProperty(b.statics,d,e)})}function n(b,a){Object.keys(a).forEach(function(d){var c=a[d];if("function"!==typeof c)throw Error("クラスディスクリプタのmethodには、関数以外は指定できません。メソッド\x3d"+b.getFullName()+"."+d);c={enumerable:!1,configurable:!1,value:c,writable:!1};Object.defineProperty(b._ctor,d,c);Object.defineProperty(b.statics,d,c)})}function w(b,a,d,c,e){this._descriptor=
a;this._ctor=d;this._parentClass=c;this._isCtorChained=!1;this._manager=b;this._superObject=e;Object.defineProperty(this,"statics",{value:{},writable:!1})}function z(){this._rootClass=null;this._classMap={};this._rootClass=f(this,null,l)}var p="length name displayName arguments prototype caller".split(" ").concat(["extend","getClass"]);b.extend(w.prototype,{extend:function(b){var a=b;"function"===typeof b&&(a=b(this._superObject));return f(this._manager,this,a)},create:function(){if(!0===this._descriptor.isAbstract)throw Error("このクラスは抽象クラスです。インスタンスを生成することはできません。");
var b=Object.create(this._ctor.prototype);c(b,this);!0!==this._descriptor.isDynamic&&Object.seal(b);for(var a=arguments.length,d=Array(a),e=0;e<a;e++)d[e]=arguments[e];this._ctor.apply(b,d);if(!1===this._isCtorChained)throw Error("親クラスのコンストラクタ呼び出しが途中で行われていません。継承関係のあるすべてのクラスのコンストラクタの先頭で Foo._super.call(this) のような親コンストラクタの呼び出しが行われていることを確認してください。");return b},getDescriptor:function(){return this._descriptor},getParentClass:function(){return this._parentClass},getFullName:function(){return this._descriptor.name},
isClassOf:function(b){return b instanceof this._ctor},getManager:function(){return this._manager}});var l={name:"h5.cls.RootClass",method:{constructor:function(){this._class._isCtorChained=!0},getClass:function(){return this._class}}};b.extend(z.prototype,{getRootClass:function(){return this._rootClass},getClass:function(b){b=this._classMap[b];return void 0===b?null:b},getNamespaceObject:function(b){if(!b)throw Error("namespaceが指定されていません。");b+=".";var a={},d=this._classMap,c=b.length,e;for(e in d)if(0===
e.lastIndexOf(b,0)&&-1===e.indexOf(".",c)){var f=e.substr(c);a[f]=d[e]}return a}});var J=new z,H=J.getRootClass();g.u.obj.expose("h5.cls",{manager:J,RootClass:H})})();(function(){var b=g.cls.RootClass;b.extend(function(b){return{name:"h5.event.EventDispatcher",field:{_eventListeners:null},method:{constructor:function(){b.constructor.call(this);this._eventListeners={}},hasEventListener:function(b,c){if(!this._eventListeners)return!1;var e=this._eventListeners[b];if(!e||!this._eventListeners.hasOwnProperty(b))return!1;
for(var g=0,n=e.length;g<n;g++)if(e[g]===c)return!0;return!1},addEventListener:function(b,c){(2>arguments.length||!D(b))&&n(ERR_CODE_INVALID_ARGS_ADDEVENTLISTENER);null==c||this.hasEventListener(b,c)||(this._eventListeners.hasOwnProperty(b)||(this._eventListeners[b]=[]),this._eventListeners[b].push(c))},removeEventListener:function(b,c){if(this.hasEventListener(b,c))for(var e=this._eventListeners[b],g=0,n=e.length;g<n;g++)if(e[g]===c){e.splice(g,1);break}},dispatchEvent:function(b){var c=this._eventListeners[b.type];
if(c){c=c.slice(0);b.target||(b.target=this);b.timeStamp||(b.timeStamp=(new Date).getTime());for(var e=0,g=c.length;e<g&&!b.isImmediatePropagationStopped();e++)L(c[e])?c[e].call(b.target,b):c[e].handleEvent&&c[e].handleEvent(b);return b.defaultPrevented}}}}});b.extend(function(b){return{name:"h5.event.Event",field:{target:null,timeStamp:null,_type:null,_defaultPrevented:null,_isImmediatePropagationStopped:null},accessor:{type:{get:function(){return this._type}},defaultPrevented:{get:function(){return this._defaultPrevented}}},
method:{constructor:function(c){b.constructor.call(this);this._type=c;this._isImmediatePropagationStopped=this._defaultPrevented=!1},preventDefault:function(){this._defaultPrevented=!0},isDefaultPrevented:function(){return this._defaultPrevented},stopImmediatePropagation:function(){this._isImmediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this._isImmediatePropagationStopped}}}}).extend(function(b){return{name:"h5.event.PropertyChangeEvent",field:{_propertyName:null,_oldValue:null,
_newValue:null},accessor:{propertyName:{get:function(){return this._propertyName}},oldValue:{get:function(){return this._oldValue}},newValue:{get:function(){return this._newValue}}},method:{constructor:function(c,g,v){b.constructor.call(this,"propertyChange");null==c&&n(90001);this._propertyName=c;this._oldValue=void 0!==g?g:null;this._newValue=void 0!==v?v:null}}}})})();(function(){function c(b,a){this.id=b;this.content=a}function e(b,a,d){this.url=b;this.path=a;this.content=d}function f(b){this._resourceKey=
b}function q(b){function a(b,d){if(0!==d.indexOf("../"))return b+d;d=d.slice(3);b=b.replace(/[^\/]+?\/$/,"");return a(b,d)}var d=g.settings.res.baseUrl;if(b===fa(b)||0===b.indexOf("/"))return b;if(!d)return 0===b.indexOf("./")?b:"./"+b;g.u.str.endsWith(d,"/")||(d+="/");return a(d,b)}function n(b,a,d){void 0===d&&L(b)&&(d=b,b=void 0);u.unshift({type:b,test:a,resolver:d})}var t=g.async.deferred,u=[],w={},z={},p=[],l=null,J={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(b){this.cacheUrls.length>=
this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);var a=b.url;this.cache[a]=b;this.cacheUrls.push(a)},clearCache:function(b,a){var d=fa(b);a||delete this.cache[d];for(var c=0,e=this.cacheUrls.length;c<e;c++)if(this.cacheUrls[c]===d){this.cacheUrls.splice(c,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(b){var a=this.cache[b];this.clearCache(b,!0);this.cacheUrls.push(b);return a},loadResourceFromPath:function(b){var a=fa(b);if(this.accessingUrls[a])return this.accessingUrls[a];
var d=t(),c=d.promise();this.accessingUrls[a]=c;var f=this;g.ajax(b,{dataType:"text"}).done(function(c,k,g){delete f.accessingUrls[a];c=new e(a,b,g.responseText);f.append(c);d.resolve(c)}).fail(function(c){delete f.accessingUrls[a];d.reject(ja(17E3,[c.status,a],{url:a,path:b,error:c}))});return c}},H={load:function(b){var a=fa(b);return J.cache[a]?t().resolve(J.getResourceFromCache(a)).promise():J.loadResourceFromPath(b)},clearCache:function(b){J.clearCache(b)},clearAllCache:function(){J.clearAllCache()}};
b.extend(f.prototype,{resolve:function(c){function a(a){for(var d=0,e=u.length;d<e;d++)if(!c||c===u[d].type){var f=u[d].test;if(!c&&f)if("regexp"===b.type(f)){if(!f.test(a))continue}else if(!1===f(a))continue;return u[d].resolver(a,c)}return!1}if(!F(this._resourceKey))return a(this._resourceKey);for(var d=this._resourceKey,e=[],f=0,p=d.length;f<p;f++){var l=a(d[f]);e.push(l)}var m=g.async.deferred();la(e,function(b){F(b)||(b=[b]);b.unshift(b.slice(0));m.resolveWith(m,b)},function(b){m.reject(b)});
return m.promise()},getKey:function(){return this._resourceKey}});n("namespace",null,function(b){var a=w[b]||g.u.obj.getByPath(b);if(a)return t().resolve(a).promise();if(z[b])return z[b].deferred.promise();var a=q(b.replace(/\./g,"/"))+".js",d=t(),c=g.settings.res.resolveTimeout,e=null;0<c&&(e=setTimeout(function(){z[b]&&(delete z[b],d.reject(ja(17001,[b])))},c));z[b]={deferred:d,timer:e};g.u.loadScript(a).done(function(){var a=w[b]||g.u.obj.getByPath(b);a&&z[b]&&(w[b]=a,delete z[b],clearTimeout(e),
d.resolve(a))}).fail(function(a){clearTimeout(e);delete z[b];d.reject(a)});return d.promise()});n("ejsfile",/.*\.ejs(\?.*$|$)/,function(e){var a=t();H.load(q(e)).done(function(d){var e=b(d.content).filter(function(){return 1===this.nodeType&&0!==this.tagName.indexOf("/")}),f=[];0<e.not('script[type\x3d"text/ejs"]').length?a.reject(ja(7011,null,{url:d.url,path:d.path})):(0===e.length&&a.reject(ja(7001,null,{url:d.url,path:d.path})),e.each(function(){var e=b.trim(this.id);e||a.reject(ja(7002,null,{url:d.url,
path:d.path}));var k=b.trim(this.innerHTML);f.push(new c(e,k))}),a.resolve({url:d.url,path:d.path,templates:f}))}).fail(function(b){var c=b.detail,c=ja(7003,[c.error.status,c.url],c);b.code=c.code;b.message=c.message;b.detail=b.detail;a.reject(b)});return a.promise()});n("jsfile",/.*\.js(\?.*$|$)/,function(b){return g.u.loadScript(q(b))});n("cssfile",/.*\.css(\?.*$|$)/,function(b){var a=document.getElementsByTagName("head")[0],d=document.createElement("link");d.type="text/css";d.rel="stylesheet";
d.href=q(b);a.appendChild(d);return t().resolve(d).promise()});g.u.obj.expose("h5.res",{dependsOn:function(b){return new f(b)},isDependency:function(b){return b instanceof f},register:function(b,a,d,c){d&&(c?g.u.obj.expose(c,a):g.u.obj.expose(b,a));w[b]=a;if(d=z[b])delete z[b],b=d.deferred,(d=d.timer)&&clearTimeout(d),p.push({dfd:b,value:a}),l||(l=setTimeout(function(){l=null;for(var b=p.splice(0,p.length),a=0,d=b.length;a<d;a++)b[a].dfd.resolve(b[a].value)},0))},get:function(b){return g.res.dependsOn(b).resolve()}})})();
(function(){function c(b){null!=b.style.transform&&(b.style.transform="");null!=b.style.mozTansform&&(b.style.mozTansform="");null!=b.style.webkitTansform&&(b.style.webkitTansform="")}function e(b,a,d,c){if(!La){La={};b=new Oa(null,"a");for(var r in b)b.hasOwnProperty(r)&&"__name"!==r&&"__templates"!==r&&"__meta"!==r&&(La[r]=1);b=Oa.prototype;for(r in b)b.hasOwnProperty(r)&&(La[r]=null)}for(var e in d)e in La&&n(6011,[c,e],{controllerDefObj:d})}function f(a,d){function c(r,e){-1!==b.inArray(r,e)&&
n(6009,[d],{controllerDefObj:a});H(r,function(b){c(b,e.concat([r]))},!0)}c(a,[])}function q(a){function d(c,r){-1!==b.inArray(c,r)&&n(6010,[a.__name],{logicDefObj:a});h(c,function(b){d(b,r.concat(c))})}d(a,[])}function v(a,d,c){null==a&&n(6001,[c],{controllerDefObj:d});D(a)||"object"===typeof a||n(6030,[c],{controllerDefObj:d});a=b(a);0===a.length&&n(6003,[c],{controllerDefObj:d});1<a.length&&n(6004,[c],{controllerDefObj:d});9!==a[0].nodeType&&1!==a[0].nodeType&&n(6034,[c],{controllerDefObj:d})}function t(b,
a,d,c,r){this.controller=b;this.event=a;this.evArg=d;this.selector=c;this.selectorType=r}function u(b){if(!qa(this)&&this.__controllerContext.executeListeners)return b.proceed()}function w(b,a,d){var c=z(b.__name,a);d&&c.push(u);return p(b[a],a,c)}function z(b,a){var d=[],c=g.settings.aspects;if(!c||0===c.length)return d;for(var c=P(c),r=c.length-1;-1<r;r--){var e=c[r];if(!e.target||e.compiledTarget.test(b)){var f=e.interceptors;if(!e.pointCut||e.compiledPointCut.test(a))if(F(f))for(e=f.length-1;-1<
e;e--)d=d.concat(f[e]);else d.push(f)}}return d}function p(b,a,d){for(var c=function(b,a,d){return function(){var c=this;return d.call(c,{target:c,func:b,funcName:a,args:arguments,proceed:function(){return b.apply(c,this.args)}})}},r=0,e=d.length;r<e;r++)b=c(b,a,d[r]);return b}function l(b,a,d){if(d&&"rootElement"===b)return d.rootElement;for(var c=["window","document","navigator"],r=0,e=c.length;r<e;r++){var f=c[r];if(b===f||Za(b,f+"."))return g.u.obj.getByPath(b,ka(a))}return d&&Za(b,"this.")?g.u.obj.getByPath(b.slice(5),
d):b}function J(b,a){return b.hasOwnProperty(a)&&Pa(a,"Logic")}function H(b,a,d){if(d){var c=xa.get(b.__name);if(c)for(d=0,e=c.childControllerProperties.length;d<e;d++){var r=c.childControllerProperties[d];if((f=b[r])&&!1===a(b[r],b,r))return!1}else for(r in b){var c=b,e=r,f=d,k=c[e];if(Pa(e,"Controller")&&"rootController"!==e&&"parentController"!==e&&k&&(f||k.__controllerContext&&!k.__controllerContext.isRoot&&(!k.parentController||k.parentController===c))&&!1===a(b[r],b,r))return!1}}else if(!qa(b)){r=
b.__controllerContext.childControllers;d=0;for(var e=r.length;d<e;d++){var f=r[d];if(!1===a(f,b))return!1}}}function h(b,a){var d=xa.get(b.__name);if(d)for(var c=0,r=d.logicProperties.length;c<r;c++){var e=d.logicProperties[c];if(!1===a(b[e],b,e))return!1}else for(e in b)if(J(b,e)&&!1===a(b[e],b,e))return!1}function a(b,d,c,r){return!1===d.call(this,b,c,r)?!1:H(b,function(b,c,r){if(!1===a(b,d,c,r))return!1})}function d(b,a,c,r){if(!1===H(b,function(b,c,r){if(!b||!1===d(b,a,c,r))return!1})||!1===a.call(this,
b,c,r))return!1}function k(b,a){var d=[];H(b,function(b){(b=b[a])&&d.push(b)});return d}function y(b){var a=b.__controllerContext.cache.bindMap,d=S(b.rootElement),c;for(c in a)for(var r=M(b,a[c],b[c]),e=0,f=r.length;e<f;e++)da(r[e],d)}function M(a,d,c){function r(a){var d=a.handler,c=a.controller;a.originalHandler||(a.originalHandler=d);a.handler=function(){var r=a.isNativeBind||1!==g.settings.listenerElementType?this:b(this);d.call(c,U(a,arguments),r)}}var e=d.selector,f=d.eventName,k=d.bindTarget,
E=d.isGlobal,h=d.isBindRequested;switch(f){case "mousewheel":c=X(a,f,c);break;case "h5trackstart":case "h5trackmove":case "h5trackend":c=R(a,f,c);var x=a.__controllerContext,f=!1;x.h5trackEventHandlerInfos=x.h5trackEventHandlerInfos||[];for(var B=x.h5trackEventHandlerInfos,x=0,p=B.length;x<p;x++){var l=B[x];if(k){if($a(k,l.bindTarget)){f=!0;break}}else if(e===l.selector&&E===l.isGlobal&&h===l.isBindRequested){f=!0;break}}f||(c=W(a).concat(c),B.push(d));break;default:c=I(a,f,c)}F(c)||(c=[c]);x=0;for(p=
c.length;x<p;x++)d=c[x],r(d),d.isBindRequested=h,d.isGlobal=E,d.bindTarget=k,d.selector=e,d.controller=a;return c}function da(a,d){var c=a.controller,r=c.rootElement,e=a.selector,f=a.eventName,k=a.handler,E=a.isBindRequested,x=a.isGlobal;a.bindTarget?(a.evSelectorType=Ma.SELECTOR_TYPE_OBJECT,fa(a)):x?(c=l(e,d,c),E||!D(c)?(a.evSelectorType=Ma.SELECTOR_TYPE_OBJECT,a.bindTarget=D(c)?b(c):c,fa(a)):(a.evSelectorType=Ma.SELECTOR_TYPE_GLOBAL,b(d).delegate(c,f,k)),a.evSelector=c):(a.evSelectorType=Ma.SELECTOR_TYPE_LOCAL,
a.evSelector=e,E?(a.bindTarget=b(e,r),fa(a)):b(r).delegate(e,f,k));a.isBindCanceled||(a.controller.__controllerContext.boundHandlers.push(a),Ta&&"h5trackstart"===f&&null!=g.settings.trackstartTouchAction&&(x?b(a.evSelector,d):b(a.evSelector,r)).each(function(){this.style[Ua]=g.settings.trackstartTouchAction}))}function m(a,d,c){var r=a.controller,e=r.rootElement,f=a.selector,k=a.handler,E=a.eventName,x=a.isGlobal;if(a.bindTarget)d=a.bindTarget,e=a.eventName,f=a.handler,a.isNativeBind?d.removeEventListener(e,
f):b(d).unbind(e,f);else if(x){if(null==ka(d))return;b(d).undelegate(f,E,k)}else b(e).undelegate(f,E,k);c||(c=r.__controllerContext.boundHandlers,c.splice(b.inArray(a,c),1))}function N(b,d){a(b,function(b){b.__controllerContext.executeListeners=d})}function Q(b,a,d){return function(){var c=null,r=b[a],e=b.__name,f=!1,f="__init"===a?b.isInit:"__postInit"===a?b.isPostInit:b.isReady;if(!f&&r)try{c=b[a]({args:b.__controllerContext.args})}catch(k){ca(b,k)}c&&L(c.done)&&L(c.fail)?c.done(d).fail(function(){var a=
ja(6033,e,Ba(arguments));ca(b.rootController,null,a)}):d()}}function Y(b,d){function c(a){var r,e;"__init"===d?(r=ma(a),e=[a.preInitPromise],a.parentController&&e.push(a.parentController.initPromise)):"__postInit"===d?(r=Ka(a),e=A(a)):(r=ea(a),e=C(a));var f=b.__controllerContext;f.waitingPromisesManagerMap=f.waitingPromsiesManager||{};f.waitingPromisesManagerMap[d]=la(e,Q(a,d,r))}Ca(b)||a(b,c)}function A(b){var a=k(b,"postInitPromise");a.push(b.initPromise);return a}function C(b){var a=k(b,"readyPromise");
a.push(b.postInitPromise);return a}function ma(d){return function(){function c(){var b=!0;a(d.rootController,function(a){return b=a.isInit});return b}if(!oa(d))if(d.isInit)c()&&r(d.rootController);else{d.isInit=!0;var e=d.__controllerContext.initDfd;delete d.__controllerContext.templatePromise;delete d.__controllerContext.preInitDfd;delete d.__controllerContext.initDfd;var f=d.rootElement;try{var k=d.__meta,E=d.__controllerContext.childControllers,x;for(x in k)-1!==b.inArray(d[x],E)&&(d[x].__controllerContext.metaRootElement=
k[x]&&k[x].rootElement);H(d,function(b,a){var c=b.__controllerContext.metaRootElement;delete b.__controllerContext.metaRootElement;b.rootElement||(c=c?G(c,b,d):f,v(c,b.__controllerContext.controllerDef,b.__name),b.rootElement=c,b.view.__controller=b)})}catch(g){ca(d,g);return}k=c();e.resolveWith(d);!oa(d)&&k&&r(d.rootController)}}}function Ka(d){return function(){if(!oa(d)){d.isPostInit=!0;var c=d.__controllerContext;c.waitingPromsiesManager=c.waitingPromsiesManager||{};c.waitingPromsiesManager.__postInit=
la(A(d),function(){if(!oa(d)){var r=c.postInitDfd;if(r&&(delete c.postInitDfd,r.resolveWith(d),!oa(d)&&!c.isExecutedBind))if(c.isRoot){var r=d.__meta,e=c.childControllers,f;for(f in r)-1!==b.inArray(d[f],e)&&(d[f].__controllerContext.metaUseHandlers=r[f]&&r[f].useHandlers);a(d,function(b,a){var d=b.__controllerContext.metaUseHandlers;delete b.__controllerContext.metaUseHandlers;b.__controllerContext.isExecutedBind||(b.__controllerContext.isExecutedBind=!0,!1!==d&&y(b))});if(!1!==c.managed&&(b(d.rootElement).trigger("h5controllerbound",
d),oa(d)))return;Da(d)}else d.rootController.isPostInit&&(d.parentController.__meta&&!1===d.parentController.__meta.userHandlers||y(d),Da(d.rootController))}})}}}function ea(a){return function(){if(!oa(a)){a.isReady=!0;var d=a.__controllerContext;d.waitingPromsiesManager=d.waitingPromsiesManager||{};d.waitingPromsiesManager.__ready=la(C(a),function(){if(!oa(a)){var c=d.readyDfd;c&&(delete d.readyDfd,c.resolveWith(a),!oa(a)&&d.isRoot&&b(a.rootElement).trigger("h5controllerready",a))}})}}}function ba(a,
d){if(!D(a))return b(a);var c=b.trim(a);return Fa.test(c)?(c=b.trim(c.substring(1,c.length-1)),b(l(c,S(d.rootElement),d))):b(d.rootElement).find(a)}function I(b,a,d){return{controller:b,eventName:a,handler:d}}function X(b,a,d){return{controller:b,eventName:"undefined"===typeof document.onmousewheel?"DOMMouseScroll":a,handler:function(a){var c=a.event;null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.wheelDelta&&(c.wheelDelta=c.originalEvent.wheelDelta);null==c.wheelDelta&&c.originalEvent&&
null!=c.originalEvent.detail&&(c.wheelDelta=40*-c.originalEvent.detail);d.call(b,a)}}}function R(a,d,c){var r=null;if("h5trackstart"===d)return I(a,d,c);r=I(a,d,function(a){var d=a.event;if(d&&null==d.offsetX&&null==d.offsetY){var r=d.h5DelegatingEvent;if(!r)return c.apply(this,arguments);r=r.type;if("mousemove"===r||"mouseup"===r)r=b(d.currentTarget).offset()||{left:0,top:0},d.offsetX=d.pageX-r.left,d.offsetY=d.pageY-r.top}c.apply(this,arguments)});r.originalHandler=c;return r}function W(a,d){function c(b,
a){for(var d in b)b.hasOwnProperty(d)&&!a[d]&&"target"!==d&&"currentTarget"!==d&&"originalEvent"!==d&&"liveFired"!==d&&(a[d]=b[d]);a.h5DelegatingEvent=b}function r(d,e,f){return function(g){var h;a:{switch(d){case "touchstart":case "mousedown":h="h5trackstart";break a;case "touchmove":case "mousemove":h="h5trackmove";break a;case "touchend":case "mouseup":h="h5trackend";break a}h=void 0}var B="h5trackstart"===h;if(!B||!x){var p=0===g.event.type.indexOf("touch");p&&na(g.event,d);var l=new b.Event(h);
c(g.event,l);var m=g.event.target;e&&(m=e);f&&f(l);var K=g.event.originalEvent||g.event;B&&-1===b.inArray(K,ya)&&(ya=[],Ea=[]);var ca=b.inArray(K,ya);-1===ca&&(ca=ya.push(K)-1,Ea[ca]=!1);Ea[ca]||p&&!x&&!B||(Ea[ca]=!0,b(m).trigger(l,g.evArg),x=!0);g.event.currentTarget===document&&("h5trackend"===h&&(ya=[],Ea=[]),-1!==b.inArray(K,ya)&&(ya.splice(ca,1),Ea.splice(ca,1)));if(B&&x){l.isDefaultPrevented()||l.h5DelegatingEvent.preventDefault();h=l.target;var y=l.clientX,Ya=l.clientY,A=p?"touchmove":"mousemove",
t=p?"touchend":"mouseup",T=r(A,h,function(b){var a=b.clientX,d=b.clientY;b.dx=a-y;b.dy=d-Ya;y=a;Ya=d}),q=r(t,h),n=function(b){g.event=b;g.evArg=Z(arguments);T(g)},G=function(b){g.event=b;g.evArg=Z(arguments);q(g)},u=p?b(h):k;E=function(){ya=[];Ea=[];u.unbind(A,n);u.unbind(t,G);p||a.rootElement===document||(b(a.rootElement).unbind(A,n),b(a.rootElement).unbind(t,G))};u.bind(A,n);u.bind(t,G);p||a.rootElement===document||(b(a.rootElement).bind(A,n),b(a.rootElement).bind(t,G))}else"h5trackend"===h&&(E(),
x=!1)}}}function e(b){return{controller:a,selector:d,eventName:b,handler:r(b),isInnerBindObj:!0}}var f="undefined"!==typeof document.ontouchstart,k=b(S(a.rootElement)),E=null,x=!1,g=[e("mousedown")];f&&g.push(e("touchstart"));return g}function O(a){if("svg"!==a.tagName.toLowerCase()||db())return b(a).offset();var d=S(a).createElementNS("http://www.w3.org/2000/svg","rect"),r=a.viewBox,e=r.baseVal.y;d.setAttribute("x",r.baseVal.x);d.setAttribute("y",e);d.setAttribute("width",1);d.setAttribute("height",
1);c(d);a.appendChild(d);r=b(d).offset();a.removeChild(d);return r}function na(b,a){var d=b.originalEvent;if(d){var c="touchend"===a||"touchcancel"===a?d.changedTouches[0]:d.touches[0],r=c.pageX,e=c.pageY;b.pageX=d.pageX=r;b.pageY=d.pageY=e;b.screenX=d.screenX=c.screenX;b.screenY=d.screenY=c.screenY;b.clientX=d.clientX=c.clientX;b.clientY=d.clientY=c.clientY;c=b.target;if(c.ownerSVGElement)c=c.farthestViewportElement;else if(c===window||c===document)c=document.body;b&&null==b.offsetX&&null==b.offsetY&&
(c=O(c),e-=c.top,b.offsetX=d.offsetX=r-c.left,b.offsetY=d.offsetY=e)}}function Z(b){return 3>b.length?b[1]:Ba(b).slice(1)}function U(b,a){var d=null,c=null;a&&(d=a[0],c=Z(a));var r=d;if(r&&null==r.offsetX&&null==r.offsetY&&r.pageX&&r.pageY){var e=r.target;if(e.ownerSVGElement)e=e.farthestViewportElement;else if(e===window||e===document)e=document.body;e=O(e);r.offsetX=r.pageX-e.left;r.offsetY=r.pageY-e.top}return new t(b.controller,d,c,b.evSelector,b.evSelectorType)}function eb(b){a(b,function(b){b.rootElement=
null;b.view.__controller=null})}function G(a,d,c){null==a&&n(6001,[d.__name]);D(a)||"object"===typeof a||n(6030,[d.__name]);a=c?ba(a,c):b(a);0===a.length&&n(6003,[d.__name]);1<a.length&&n(6004,[d.__name]);return a.get(0)}function Da(a){var d=a.__controllerContext.managed,c=za.controllers;-1===b.inArray(a,c)&&!1!==d&&c.push(a);a.__controllerContext.triggerReadyExecuted=!0;Y(a,"__ready")}function aa(b,a){!1===a?Y(b,"__init"):setTimeout(function(){oa(b)||!b.__controllerContext.isRoot&&b.rootController.readyDfd||
Y(b,"__init")},0)}function r(b){b.__controllerContext.triggerPostInitExecuted=!0;Y(b,"__postInit")}function x(b,d){a(b,function(b){var a=sa();a.resolve();var c=b.__controllerContext;c.templatePromise=a.promise();c.initDfd=sa();c.postInitDfd=sa();c.readyDfd=sa();c.isUnbinding=!1;c.isUnbinded=!1;c.isExecutedBind=!1;c.triggerPostInitExecuted=!1;c.triggerReadyExecuted=!1;c.args=d;b.initPromise=c.initDfd.promise();b.postInitPromise=c.postInitDfd.promise();b.readyPromise=c.readyDfd.promise();b.isInit=!1;
b.isPostInit=!1;b.isReady=!1})}function K(a,d){var c=null,r=d;b.isPlainObject(r)?c=r.target:r={};c=c?ba(c,a):a.rootElement;return g.ui.indicator.call(a,c,r)}function T(b,a){var c=[],r=null;d(b,function(b){if(b[a]&&L(b[a])){try{var d=b[a]()}catch(e){r=r||e}Ja(d)&&c.push(d)}});if(r)throw r;return c}function ca(b,a,c){function r(){var b=a||c||g||h;d(f,function(a){a.view&&a.view.__view&&a.view.__view.clear();if(b)a.__controllerContext.isDisposed=1;else for(var d in a)a.hasOwnProperty(d)&&(a[d]=null)});
h?x.rejectWith(f,[h]):x.resolveWith(f);if(b&&(za.dispatchEvent({type:"lifecycleerror",detail:b,rootController:f}),a||g))throw a||g;}function e(){h=g||ja(6038,f.__name,Ba(arguments));r()}var f=b.__controllerContext&&(b.__controllerContext.isRoot?b:b.rootController);if(!f){if(a)throw a;}else if(!Ca(f)){f.__controllerContext.isDisposing=1;try{Ga(f,c||a)}catch(k){a=a||k}var E,g=null;try{E=T(f,"__dispose")}catch(k){a=a||k,g=g||k}var x=f.deferred(),h=null;g?e():la(E,r,e,!0);return x.promise()}}function Ga(d,
c){if(!oa(d)){d.__controllerContext.isUnbinding=1;fb(d,c);var r;try{T(d,"__unbind")}catch(e){r=e}a(d,function(b){var a=b.rootElement;if(a){for(var a=S(a),d=b.__controllerContext.boundHandlers,c=0,r=d.length;c<r;c++)m(d[c],a,!0);b.__controllerContext.boundHandlers=[]}});d.__controllerContext.unbindList={};za.controllers=b.grep(za.controllers,function(b){return b!==d});d.isPostInit&&!1!==d.__controllerContext.managed&&b(d.rootElement).trigger("h5controllerunbound",d);eb(d);d.__controllerContext.isUnbinded=
1;if(r)throw r;}}function ga(b,a){return a.view.__view.isAvailable(b)?a.view.__view:a.parentController?ga(b,a.parentController):g.core.view}function qa(b){return!b.__controllerContext||b.__controllerContext.isDisposed}function Ca(b){return qa(b)||b.__controllerContext.isDisposing}function oa(b){b=b.__controllerContext&&b.__controllerContext.isRoot?b:b.rootController;return!b||qa(b)||b.__controllerContext.isUnbinding||b.__controllerContext.isUnbinded}function fb(b,d){var c=["postInitDfd","readyDfd"],
r=[];a(b,function(b){r.push(b);var a=b.__controllerContext.initDfd;!a||va(a)||Aa(a)||a.rejectWith(b,[d])});for(var e=0,f=c.length;e<f;e++)for(var k=c[e],E=r.length-1;0<=E;E--){var g=r[E],x=g.__controllerContext[k];!x||va(x)||Aa(x)||x.rejectWith(g,[d])}}function ta(b,a){for(var d=b.childNodes,c=0,r=d.length;c<r;c++){var e=d[c];if(1===e.nodeType){if(e=ta(e,a))return e}else if(8===e.nodeType){var f=e.nodeValue;if(0===f.indexOf("{h5view ")){var k=f.indexOf("}");if(-1!==k&&(f=f.slice(0,k).match(/id="([A-Za-z][\w-:\.]*)"/))&&
f[1]===a)return e}}}return null}function ab(b){var a=this;return function(){return b.apply(a,arguments)}}function bb(b){var a=this;return function(){var d=g.u.obj.argsToArray(arguments);d.unshift(this);return b.apply(a,d)}}function E(b,a,d){function c(r){g.u.obj.getByPath("h5.core.view")||n(6029);d=F(d)?d:[d];for(var e=[],f=0,k=d.length;f<k;f++){var E=Ha(d[f])?d[f]:g.res.dependsOn(d[f]);e.push(E.resolve("ejsfile"))}la(e,function(d){d=F(d)?d:[d];for(var c=0,r=d.length;c<r;c++)for(var e=d[c].templates,
f=0,k=e.length;f<k;f++)try{b.view.__view.register(e[f].id,e[f].content)}catch(E){a.reject(E)}a.resolve()},function(b){var d=b.detail.error.status;r===g.settings.dynamicLoading.retryCount||0!==d&&12029!==d?setTimeout(function(){a.reject(b)},0):setTimeout(function(){c(++r)},g.settings.dynamicLoading.retryInterval)})}c(0)}function B(a,d,c,r){var e=D(a),f=e?null:a;a=e?b.trim(a):null;d=b.trim(d);var k=!e||Fa.test(a),E=Ia.test(d);E&&(d=b.trim(b.trim(d.substring(1,d.length-1))));e&&k&&(a=b.trim(a.substring(1,
a.length-1)),"this"===a&&n(6012,[c.__name],{controllerDef:c}));return{selector:a,bindTarget:f,isGlobal:k,isBindRequested:E,eventName:d,propertyKey:r}}function Na(){this.logicProperties=[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=[]}function gb(a){var d=new Na,c=d.logicProperties,r=d.eventHandlerProperties,e=d.functionProperties,f=d.otherProperties,k=d.bindMap,E=d.childControllerProperties,g={},x;for(x in a){var h=
a,p=x;if(-1!==p.indexOf(" ")&&L(h[p])){r.push(x);var h=b.trim(x),p=h.lastIndexOf(" "),h=B(h.substring(0,p),h.substring(p+1,h.length),a,x),p=h.selector,l=h.eventName,m=h.isGlobal,K=h.isBindRequested;g[p]||(g[p]={});g[p][l]||(g[p][l]={});g[p][l][m]||(g[p][l][m]={});g[p][l][m][K]?n(6013,[a.__name,p,l],{controllerDef:a}):g[p][l][m][K]=1;k[x]=h}else Pa(x,"Controller")&&a[x]&&!L(a[x])?E.push(x):Pa(x,"Logic")&&a[x]&&!L(a[x])?c.push(x):L(a[x])?e.push(x):f.push(x)}return d}function hb(){this.logicProperties=
[];this.functionProperties=[]}function ib(b){var a=new hb,d=a.functionProperties,c=a.logicProperties,r;for(r in b)J(b,r)?c.push(r):L(b[r])&&d.push(r);return a}function jb(a,d){function c(a,d,r){d=d.__logicContext.waitingPromises=d.__logicContext.waitingPromises||[];-1===b.inArray(a,d)&&(d.push(a),a.done(r))}function r(f,k){function E(){if(!f.__logicContext.isCalledReady){var r=!0;h(f,function(b){return r=b.__logicContext.isReady});if(r){var k=L(f.__ready)&&f.__ready();f.__logicContext.isCalledReady=
!0;Ja(k)?(e.push(k),k.done(function(){f.__logicContext.isReady=!0;e.splice(b.inArray(k,e),1);f.__logicContext.waitingPromises=null;f===a&&d.resolveWith(f)})):(f.__logicContext.isReady=!0,f.__logicContext.waitingPromises=null,f===a&&d.resolveWith(f))}else for(var x=0,g=e.length;x<g;x++)c(e[x],f,E)}}f.__logicContext.isReady=!1;f.__logicContext.isCalledReady=!1;h(f,r);E()}var e=[];r(a)}function $a(b,a){if(b===a)return!0;var d=Va(b),c=Va(a);if(!d&&!c)return!1;d=d?b.toArray():[b];c=c?a.toArray():[a];if(d.length!==
c.length)return!1;for(var r=0,e=d.length;r<e;r++)if(d[r]!==c[r])return!1;return!0}function ha(b,a){b&&b.rootElement||n(6035,a)}function ia(b,a){b&&!qa(b)||n(6036,a)}function fa(a){var d=a.bindTarget,c=a.eventName,r=a.handler;d&&"undefined"!==typeof d.nodeType||Xa(d)||Va(d)?b(d).bind(c,r):d&&d.addEventListener?(d.addEventListener(c,r),a.isNativeBind=!0):a.isBindCanceled=!0}function pa(b,d){d.parentController=b;b.__controllerContext.childControllers.push(d);d.__controllerContext.isRoot=!1;if(b.__controllerContext.isExecutedConstruct){var c=
b.rootController;a(d,function(b){b.rootController=c})}}function cb(b){this.__controller=b;g.u.obj.getByPath("h5.core.view")&&(this.__view=g.core.view.createView())}function Oa(a,d,c,r,e){for(var f=0,k=Wa.length;f<k;f++)Wa[f](this);this.__name=d;this.__templates=null;this.rootElement=a;this.__controllerContext={executeListeners:!0,isRoot:e,boundHandlers:[],controllerDef:c,args:null};(a=c&&c.__defaultArgs)?this.__controllerContext.args=b.extend({},a,r):r&&(this.__controllerContext.args=r);this.isReady=
this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=g.log.createLogger(d);this.view=new cb(this)}function ra(){this.rootElement=document;this.controllers=[];b(document).bind("triggerIndicator",function(b,a){null==a.target&&(a.target=document);a.indicator=K(this,a);b.stopPropagation()})}function ua(){this._init()}function Qa(a,d,c,r){var k=!r||!r.isInternal;if(!k&&qa(r.rootController))return null;
var x=d.__name;D(x)&&0!==b.trim(x).length||Ha(d)||n(6006,null,{controllerDefObj:d});c&&!b.isPlainObject(c)&&n(6007,[x],{controllerDefObj:d});d.__controllerContext&&n(6008,null,{controllerDefObj:d});d.__defaultArgs&&(b.isPlainObject(d.__defaultArgs)||n(6046,[x],{controllerDefObj:d}));var g=xa.get(x);g||e(k,a,d,x);k&&f(d,x);g||(g=gb(d),xa.register(x,g));k&&v(a,d,x);var h=new Oa(a?b(a).get(0):null,x,d,c,k),p=k?h:r.rootController,l=sa(),x=l.promise().fail(Ra),B=sa(),m=B.promise().fail(Ra),K=sa(),y=K.promise().fail(Ra),
A=sa(),t=A.promise(),T=r&&r.async;!1===T&&(l.resolve(),B.resolve(),K.resolve(),A.resolve());k||t.fail(Ra);a=h.__controllerContext;a.cache=g;a.preInitDfd=l;a.initDfd=B;a.postInitDfd=K;a.readyDfd=A;h.preInitPromise=x;h.initPromise=m;h.postInitPromise=y;h.readyPromise=t;a.childControllers=[];for(var q=k?[]:r.promisesForTriggerInit,B=0,m=g.logicProperties.length;B<m;B++)K=g.logicProperties[B],x=d[K],Ha(x)?(y=x.resolve("namespace"),q.push(y),y.done(function(a,d){return function(c){c=wa(c);h[a]=c;q.splice(b.inArray(d,
q),1);q.push(c.readyPromise);c.readyPromise.done(function(a){return function(){q.splice(b.inArray(a,q),1)}}(c.readyPromise))}}(K,y))):h[K]=wa(x);x=b.extend(!0,{},d);d=d.__templates;B=sa();m=B.promise();Ha(d)||d&&0<d.length?E(h,B,d):B.resolve();m.done(function(){Ca(h)||l.resolveWith(h)}).fail(function(b){l.rejectWith(h,[b]);ca(h,null,b)});B=0;for(m=g.eventHandlerProperties.length;B<m;B++)K=g.eventHandlerProperties[B],h[K]=w(x,K,!0);B=0;for(m=g.functionProperties.length;B<m;B++)K=g.functionProperties[B],
h[K]=w(x,K);B=0;for(m=g.otherProperties.length;B<m;B++)K=g.otherProperties[B],h[K]=x[K];a.managed=r&&r.managed;try{if(h.__construct&&h.__construct({args:h.__controllerContext.args}),Ca(h))return null}catch(G){return ca(p,G),null}k?(h.rootController=h,h.parentController=null):(h.parentController=r.parentController,h.rootController=r.rootController);if(h.__controllerContext.childControllers)for(B=0,r=h.__controllerContext.childControllers,m=r.length;B<m;B++)r[B].rootController=h.rootController;h.__controllerContext.isExecutedConstruct=
!0;r=h.__meta;B=0;for(m=g.childControllerProperties.length;B<m;B++)if(K=g.childControllerProperties[B],d=x[K],a=null,r&&r[K]&&r[K].inheritArgs&&(a=c),Ha(d))y=d.resolve("namespace"),q.push(y),y.done(function(a,d,c){return function(r){r=Qa(null,b.extend(!0,{},r),c,{isInternal:!0,parentController:h,rootController:p,promisesForTriggerInit:q,async:T});if(null==r)return null;h[a]=r;h.__controllerContext.childControllers.push(r);q.splice(b.inArray(d,q),1)}}(K,y,a));else{a=Qa(null,b.extend(!0,{},x[K]),a,
{isInternal:!0,parentController:h,rootController:p});if(null==a)return null;h.__controllerContext.childControllers.push(a);h[K]=a}if(k){var u=function(){0===q.length?aa(h,T):la(q,u)};la(q,u)}return h}function wa(a){function d(a,c){var r=a.__name;D(r)&&0!==b.trim(r).length||n(6017,null,{logicDefObj:a});a.__logicContext&&n(6018,null,{logicDefObj:a});var e=xa.get(r);e||(c&&q(a),e=ib(a));for(var k=b.extend(!0,{},a),E=e.functionProperties,x=0,h=E.length;x<h;x++){var B=E[x];k[B]=w(k,B)}k.deferred=sa;k.log=
g.log.createLogger(r);k.__logicContext={logicDef:a};k.own=ab;k.ownWithOrg=bb;xa.register(r,e);L(k.__construct)&&k.__construct();r=e.logicProperties;x=0;for(h=r.length;x<h;x++)B=r[x],e=k[B],Ha(e)?(e=e.resolve(),f.push(e),e.done(function(a,c){return function(r){k[a]=d(r);f.splice(b.inArray(c,f),1)}}(B,e))):k[B]=d(e);return k}function c(){0===f.length?jb(k,r):la(f,c)}var r=g.async.deferred(),e=r.promise(),f=[],k=d(a,!0);k.readyPromise=e;la(f,c);return k}var Ma={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,
SELECTOR_TYPE_OBJECT:3},Fa=/^\{.*\}$/,Ia=/^\[.*\]$/,sa=g.async.deferred,Ja=g.async.isPromise,Za=g.u.str.startsWith,Pa=g.u.str.endsWith,Sa=g.u.str.format,Ba=g.u.obj.argsToArray,Va=g.u.obj.isJQueryObject,Ha=g.res.isDependency,Ra=function(){},za,xa,ya=[],Ea=[],Ua="",Ta=function(){var a=document.createElement("div");return"undefined"!==typeof a.style.touchAction?(Ua="touchAction",!0):"undefined"!==typeof a.style.msTouchAction?(Ua="msTouchAction",!0):!1}(),Wa=[],db=function(){var a=null;return function(){if(null!=
a)return a;var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("width",1);d.setAttribute("height",1);var r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("x",1);r.setAttribute("y",1);r.setAttribute("width",1);r.setAttribute("height",1);c(r);b(function(){document.body.appendChild(d);var b=d.getBoundingClientRect().top;d.appendChild(r);a=b===d.getBoundingClientRect().top;document.body.removeChild(d)});return a}}();b.extend(t.prototype,Ma);
b.extend(cb.prototype,{get:function(a,b){ha(this.__controller,"view#get");return ga(a,this.__controller).get(a,b)},update:function(a,b,d){ha(this.__controller,"view#update");a=ba(a,this.__controller);return ga(b,this.__controller).update(a,b,d)},append:function(a,b,d){ha(this.__controller,"view#append");a=ba(a,this.__controller);return ga(b,this.__controller).append(a,b,d)},prepend:function(a,b,d){ha(this.__controller,"view#prepend");a=ba(a,this.__controller);return ga(b,this.__controller).prepend(a,
b,d)},load:function(a){ha(this.__controller,"view#load");return this.__view.load(a)},register:function(a,b){ha(this.__controller,"view#register");this.__view.register(a,b)},isValid:function(a){ha(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){ha(this.__controller,"view#isAvailable");return ga(a,this.__controller).isAvailable(a)},clear:function(a){ha(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){ha(this.__controller,
"view#getAvailableTemplates");return this.__view.getAvailableTemplates()},bind:function(a,d){ha(this.__controller,"view#bind");var c=a;if(D(a)&&0===a.indexOf("h5view#")){for(var r=ta(this.__controller.rootElement,a.slice(7)),c=r.nodeValue,c=c.slice(c.indexOf("}")+1),e=b("\x3cdiv\x3e").append(c),c=[],f=e[0].childNodes,k=0,E=f.length;k<E;k++)c.push(f[k]);e.empty();e=document.createDocumentFragment();k=0;for(E=c.length;k<E;k++)e.appendChild(c[k]);r.parentNode.insertBefore(e,r.nextSibling)}return this.__view.bind(c,
d)}});b.extend(Oa.prototype,{$find:function(a){ia(this,"$find");ha(this,"$find");return b(this.rootElement).find(a)},deferred:function(){ia(this,"deferred");return sa()},trigger:function(a,d){ia(this,"trigger");ha(this,"trigger");var c=D(a)?b.Event(a):a;b(this.rootElement).trigger(c,d);return c},own:function(){ia(this,"own");return ab.apply(this,Ba(arguments))},ownWithOrg:function(){ia(this,"ownWithOrg");return bb.apply(this,Ba(arguments))},bind:function(a,b){ia(this,"bind");this.__controllerContext.isRoot||
n(6031);this.rootElement=G(a,this);this.view.__controller=this;x(this,b?b:null);aa(this);return this},unbind:function(){ia(this,"unbind");ha(this,"unbind");this.__controllerContext.isRoot||n(6031);this.__controllerContext.isExecutedConstruct||n(6037);try{Ga(this)}catch(a){ca(this,a)}},dispose:function(){ia(this,"dispose");this.__controllerContext.isRoot||n(6031);return ca(this)},triggerIndicator:function(a){ia(this,"triggerIndicator");ha(this,"triggerIndicator");var d={indicator:null};a&&b.extend(d,
a);b(this.rootElement).trigger("triggerIndicator",[d]);return d.indicator},indicator:function(a){ia(this,"indicator");ha(this,"indicator");return K(this,a)},enableListeners:function(){ia(this,"enableListeners");N(this,!0)},disableListeners:function(){ia(this,"disableListeners");N(this,!1)},throwError:function(a,b){ia(this,"throwError");var d=Ba(arguments);d.unshift(null);this.throwCustomError.apply(this,d)},throwCustomError:function(a,b,d){ia(this,"throwCustomError");2>arguments.length&&n(6005);var c;
b&&D(b)?c=Error(Sa.apply(null,Ba(arguments).slice(1))):(c=Error(),c.detail=b);c.customType=a;throw c;},on:function(a,b,d){ia(this,"on");ha(this,"on");a=B(a,b,this);b=z(this.__name,"");b.push(u);a=M(this,a,p(d,"",b));b=0;for(var c=a.length;b<c;b++){var r=a[b];r.isInnerBindObj||(r.originalHandler=d);da(r,S(this.rootElement))}},off:function(a,b,d){ia(this,"off");ha(this,"off");var c=B(a,b,this);a=this.__controllerContext.boundHandlers;var r=null,e=c.bindTarget;b=c.eventName;for(var f=c.selector,k=c.isGlobal,
c=c.isBindRequested,E=0,x=a.length;E<x;E++){var h=a[E];if(e){if($a(e,h.bindTarget)&&b===h.eventName&&h.originalHandler===d){r=h;break}}else if(f===h.selector&&k===h.isGlobal&&c===h.isBindRequested&&d===h.originalHandler){r=h;break}}r&&m(r,S(this.rootElement))},manageChild:function(a){ia(this,"manageChild");if(oa(this))n(6041);else if(a&&a.__controllerContext)if(oa(a))n(6040);else{a.rootController!==a&&n(6042);pa(this,a);var d=za.controllers;a=b.inArray(a,d);-1!=a&&d.splice(a,1)}else n(6039)},unmanageChild:function(a,
d){ia(this,"unmanageChild");if(oa(this))n(6043);else if(a.parentController!==this)n(6044);else if((d=!1===d?!1:!0)||a.rootElement){a.parentController=null;a.rootController=a;a.__controllerContext.isRoot=!0;var c=this.__controllerContext.childControllers,e=b.inArray(a,c);-1!==e&&c.splice(e,1);d?a.dispose():(za.controllers.push(a),c=this.__controllerContext.waitingPromisesManagerMap,e=a.__controllerContext.waitingPromisesManagerMap,c&&(c.__postInit&&c.__postInit.remove(a.postInitPromise),c.__ready&&
c.__ready.remove(a.readyPromise)),e&&e.__init&&e.__init.remove(this.initPromise),this.rootController.__controllerContext.triggerPostInitExecuted?this.rootController.__controllerContext.triggerReadyInitExecuted||Da(a):r(a))}else n(6045)}});g.mixin.eventDispatcher.mix(ra.prototype);b.extend(ra.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(a,d){for(var c=d&&d.deep,r=d&&d.name?P(d.name):null,e=b(a)[0],f=this.controllers,k=[],E=0,x=f.length;E<x;E++){var h=f[E];
r&&-1===b.inArray(h.__name,r)||!h.rootElement||(e===h.rootElement?k.push(h):c&&S(e)===S(h.rootElement)&&b.contains(e,h.rootElement)&&k.push(h))}return k}});b.extend(ua.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});xa=new ua;za=new ra;g.u.obj.expose("h5.core",{controllerManager:za,definitionCacheManager:{clear:function(a){xa.clear(a)},
clearAll:function(){xa.clearAll()}}});var La=null;V.core.controllerInternal=Qa;V.core.addControllerInstantiationHook=function(a){Wa.push(a)};V.core.isDisposing=Ca;g.u.obj.expose("h5.core",{controller:function(a,b,d){2>arguments.length&&n(6032);return Qa(a,b,d)},logic:wa,expose:function(a){var b=a.__name;b||n(6019,null,{target:a});var d=b.lastIndexOf(".");if(-1===d)window[b]=a;else{var c=b.substr(0,d),b=b.substr(d+1,b.length),d={};d[b]=a;g.u.obj.expose(c,d)}}})})();(function(){function c(b){return b instanceof
Date}function e(b){return function(c){for(var e=b.queries,f=0,h=e.length;f<h;f++){var a=e[f],d=a.compareFunction;if(!d(c[a.prop],a.queryValue))return!1}e=b.userFunctions;f=0;for(h=e.length;f<h;f++)if(!e[f](c))return!1;e=b.nestedCriterias;f=0;for(h=e.length;f<h;f++)if(!e[f].match(c))return!1;return!0}}function f(b){return function(c){for(var e=b.queries,f=0,h=e.length;f<h;f++){var a=e[f],d=a.compareFunction;if(d(c[a.prop],a.queryValue))return!0}e=b.userFunctions;f=0;for(h=e;f<h;f++)if(!e[f](c))return!0;
e=b.nestedCriterias;f=0;for(h=e.length;f<h;f++)if(e[f].match(c))return!0;return!1}}function q(g){var l=[],t=[],v=[],h={queries:l,nestedCriterias:t,userFunctions:v},a;for(a in g)if("__op"!==a)if(b.isPlainObject(g[a]))t.push(q(g[a]));else if(L(g[a]))v.push(g[a]);else{var d=g[a],k=F(d)?d[0]:d,y;y=k instanceof RegExp?w:c(k)?z:u;var M=b.trim(a.replace(/ +/g," ")).split(" "),da=M[1]||"\x3d";(y=y[da])||n(1,[da,b.type(k)]);l.push({prop:M[0],queryValue:d,compareFunction:y})}h.match="or"===g.__op?f(h):e(h);
return h}function v(b){this.result=b}function t(b){this._src=b}var u={"\x3d":function(b,c){return b===c},"!\x3d":function(b,c){return b!==c},"\x3c":function(b,c){return b<c},"\x3e":function(b,c){return b>c},"\x3c\x3d":function(b,c){return b<=c},"\x3e\x3d":function(b,c){return b>=c},between:function(b,c){var e=c[1];return c[0]<=b&&b<=e},"!between":function(b,c){var e=c[1];return b<c[0]||e<b},"in":function(c,e){return-1!==b.inArray(c,e)},"!in":function(c,e){return-1===b.inArray(c,e)}},w={"\x3d":function(b,
c){return c.test(b)},"!\x3d":function(b,c){return!c.test(b)}},z={"\x3d":function(b,e){return c(b)?b.getTime()===e.getTime():!1},"!\x3d":function(b,e){return c(b)?b.getTime()!==e.getTime():!0},"\x3c":function(b,e){return c(b)?b.getTime()<e.getTime():!1},"\x3e":function(b,e){return c(b)?b.getTime()>e.getTime():!1},"\x3c\x3d":function(b,e){return c(b)?b.getTime()<=e.getTime():!1},"\x3e\x3d":function(b,e){return c(b)?b.getTime()>=e.getTime():!1},between:function(b,e){if(!c(b))return!1;var f=e[0].getTime(),
g=e[1].getTime(),h=b.getTime();return f<=h&&h<=g},"!between":function(b,e){if(!c(b))return!1;var f=e[0].getTime(),g=e[1].getTime(),h=b.getTime();return h<f||g<h},"in":function(b,e){if(!c(b))return!1;for(var f=b.getTime(),g=0,h=e.length;g<h;g++)if(f===e[g].getTime())return!0;return!1},"!in":function(b,e){if(!c(b))return!0;for(var f=b.getTime(),g=0,h=e.length;g<h;g++)if(f===e[g].getTime())return!1;return!0}};Ta({1:'演算子"{0}"で"{1}"型の値を比較することはできません',2:"{0}の第1引数が不正です。指定されたキー({1})はモデル{2}に存在しません",3:"setOrderFunctionの第1引数が不正です。比較関数を関数で指定してください",
4:"setOrderFunction()ですでにソート条件が設定済みです。addOrder()でソート条件を追加することはできません。",5:"addOrder()ですでにソート条件が追加済みです。setOrderFunction()でソート条件を設定することはできません。"});b.extend(t.prototype,{setCriteria:function(b){this._criteria=q(b);return this},execute:function(){for(var b=[],c=this._getDataSource(),e=!F(this._src),f=0,h=c.length;f<h;f++){var a=c[f];e?this._criteria.match(a.get())&&b.push(a):this._criteria.match(a)&&b.push(a)}if(this._orderFunction)b.sort(this._orderFunction);else if(this._addedOrders){var d=this._addedOrders,
k=d.length;b.sort(function(a,b){for(var c=0;c<k;c++){var f=d[c],h=f.key,f=f.isAsc,g=e?a.get(h):item,h=e?b.get(h):item;if(g>h)return f?1:-1;if(g<h)return f?-1:1}return 0})}return new v(b)},setOrderFunction:function(b){L(b)||n(3);this._addedOrders&&n(5);this._orderFunction=b;return this},addOrder:function(b,c){F(this._src)||this._src.schema.hasOwnProperty(b)||n(2,["addOrder",b,this._src.name]);this._orderFunction&&n(4);this._addedOrders=this._addedOrders||[];this._addedOrders.push({key:b,isAsc:!1!==
c});return this},clearOrder:function(){this._orderFunction=this._addedOrders=null;return this},_getDataSource:function(){return F(this._src)?this._src:this._src.toArray()}});V.data={createQuery:function(){return new t(this)}};g.u.obj.expose("h5.core.data",{createQuery:function(b){return new t(b)}})})();(function(){function c(b){return(b=b&&D(b)?b.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:b[1],dataModel:b[2],dimension:b[3]?1:0}:{}}function e(a,d){return function T(a,
c){if(!d[a])return!1;for(var r=0,e=d[a].length;r<e;r++)if(-1<b.inArray(d[a][r],c)||T(d[a][r],c.concat([a])))return!0;return!1}(a,[])}function f(b){return"number"===typeof b&&isNaN(b)}function q(b,a){return null==b||f(b)||"number"===typeof b||!a&&(b instanceof Number||!(!(D(b)||b instanceof String)||!b.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function v(b,a){return null==b||"number"===typeof b&&parseInt(b)===b||!a&&(b instanceof Number&&parseInt(b)===parseFloat(b)||("string"===typeof b||b instanceof
String)&&!!b.match(/^[+\-]{0,1}[0-9]+$/))}function t(d,c,e){function f(){k.push(a.call(this,arguments));if(e)throw null;}var k=[];try{if(!b.isPlainObject(d))throw f(15900),null;ra(d.name)||f(15901);var h=d.base,g=null;if(null!=h)if(D(h)&&0===h.indexOf("@")){var m=h.substring(1);c.models[m]?g=c.models[m].schema:f(15903,m)}else f(15902);var y=d.schema;g||null!=y||f(15904);if(!g&&!b.isPlainObject(y))throw f(6),null;}catch(t){n(15001,null,k)}}function u(d,k,h,g){function m(){y.push(a.call(this,arguments));
if(g)throw null;}"object"!==typeof d&&n(15008);var y=[];try{var t=function(a,d){null!=a&&("enum"!==d.elmType&&m(15817,C),(!F(a)||0===a.length||-1<b.inArray(null,a)||-1<b.inArray(void 0,a))&&m(15818,C))},A=function(a,d){if(null!=a)if(b.isPlainObject(a)){for(var c in a){var e=a[c];if(null!=e)switch(c){case "notNull":!0!==e&&!1!==e?m(15811,C,c):B&&!e&&m(15821,C,c,e);break;case "min":case "max":switch(d.elmType){case "integer":(D(e)||!v(e)||f(e))&&m(15812,C,c);break;case "number":(D(e)||D(e)||!q(e)||
Infinity===e||-Infinity===e||f(e))&&m(15812,C,c);break;default:m(15813,C,c,d.elmType)}break;case "minLength":case "maxLength":switch(d.elmType){case "string":D(e)||!v(e)||f(e)||0>e?m(15815,C,c):B&&"maxLength"===c&&0===e&&m(15821,C,c,e);break;default:m(15813,C,c,d.elmType)}break;case "notEmpty":switch(d.elmType){case "string":!0!==e&&!1!==e?m(15811,C,c):B&&!e&&m(15821,C,c,e);break;default:m(15813,C,c,d.elmType)}break;case "pattern":switch(d.elmType){case "string":"regexp"!==b.type(e)&&m(15814,C,c);
break;default:m(15813,C,c,d.elmType)}}}a.notEmpty&&0===a.maxLength&&m(15816,C,"notEmpty","maxLength");null!=a.min&&null!=a.max&&a.min>a.max&&m(15816,C,"min","max");null!=a.minLength&&null!=a.maxLength&&a.minLength>a.maxLength&&m(15816,C,"minLength","maxLength")}else m(15810,C)},l=function(b){B&&null==b&&(b="string");var a;null!=b&&(D(b)?(B&&"string"!==b&&"integer"!==b&&m(15824,C),a=c(b),a.elmType?(a.dataModel&&(k||m(15807,C,a.dataModel),h.models[a.dataModel]||m(15808,C,a.dataModel)),"enum"===a.elmType&&
null==E.enumValue&&m(15809,C)):m(15807,C,b)):m(15806,C))},G=function(b){if(null!=b){B&&m(15803,C);E.hasOwnProperty("defaultValue")&&m(15822,C);if(null==b.on)m(15804,C);else for(var a=P(b.on),c=0,e=a.length;c<e;c++)if(!d.hasOwnProperty(a[c])){m(15804,C);break}"function"!==typeof b.calc&&m(15805,C);M[C]=P(b.on)}};if(k){var p=!1,u;for(u in d)d[u]&&!0===d[u].id&&(p&&m(15800),p=!0);p||m(15801)}var M={},C;for(C in d){var E=null==d[C]?{}:d[C],B=k&&!!E.id;ra(C)||m(15802,C);G(E.depend);l(E.type);var p={},
Na=B&&null==Na?"string":E.type;D(Na)&&(p=c(Na));A(E.constraint,p);t(E.enumValue,p);B&&E.hasOwnProperty("defaultValue")&&m(15819,C)}for(var w in M)e(w,M)&&m(15823,w)}catch(aa){n(15009,null,y)}return!0}function w(b,a,d){d=[];try{for(var e in b){var f=b[e];if(f&&(f.hasOwnProperty("defaultValue")||!f.type||"array"!==f.type&&!c(f.type).dimension)&&f.hasOwnProperty("defaultValue")){var k=f.defaultValue;a[e](k).length&&pushErrorReason(15820,e,k)}}return!0}catch(h){n(15009,null,d)}}function z(b,a,d){var e=
{},f;for(f in b){var k=f,h;h=d;var g=b[f]||{},m=[],y,t=0;y=g.type;var A=g.constraint||{};a&&g.id&&(y=y||"string",A.notNull=!0,"string"===y&&(A.notEmpty=!0));y&&(t=c(y),y=t.elmType,t=t.dimension,m.push(l(y,{manager:h,enumValue:g.enumValue})));A&&m.push(p(A));h=J({checkFuncs:m,dimension:t});e[k]=h}return e}function p(b){return function(a){var d=[];b.notNull&&null==a&&d.push({notNull:b.notNull});b.notEmpty&&!a&&d.push({notEmpty:b.notEmpty});if(null==a)return d;null!=b.min&&a<b.min&&d.push({min:b.min});
null!=b.max&&b.max<a&&d.push({max:b.max});null!=b.minLength&&a.length<b.minLength&&d.push({minLength:b.minLength});null!=b.maxLength&&b.maxLength<a.length&&d.push({maxLength:b.maxLength});null==b.pattern||a.match(b.pattern)||d.push({pattern:b.pattern});return d}}function l(a,d){var c=[{type:a}];switch(a){case "number":return function(b,a){return q(b,a)?[]:c};case "integer":return function(b,a){return v(b,a)?[]:c};case "string":return function(b,a){return null==b||D(b)||!a&&b instanceof String?[]:
c};case "boolean":return function(b,a){return null==b||"boolean"===typeof b||!a&&b instanceof Boolean?[]:c};case "enum":return function(a){var e;a:if(e=d.enumValue,f(a)){a=0;for(var r=e.length;a<r;a++)if(f(e[a])){e=!0;break a}e=!1}else e=null===a||-1<b.inArray(a,e);return e?[]:c};case "any":return function(){return[]}}var e=a.match(/^@(.+?)$/)[1],k=d.manager;return function(b){var a=k.models[e];return!a||"object"!==typeof b&&null!=b?c:null==b||a.has(b)?[]:c}}function J(b){var a=b.checkFuncs;if(!a||
0===a.length)return function(){return[]};var d=b.dimension||0;return function(b,c){function e(b,f){if(!f){for(var k=0,h=a.length;k<h;k++){var m=a[k](b,c);if(m.length)return r=r.concat(m),!1}return!0}if(null==b)return!0;if(!F(b)&&!g.core.data.isObservableArray(b))return r.push({dimension:d}),!1;k=0;for(h=b.length;k<h;k++)if(!e(b[k],f-1))return!1;return!0}var r=[];e(b,d);return r}}function H(b,a,d,c){b._values={};b._nullProps={};for(var e in a)a[e]&&h(a[e].type)&&(d=X(),d.relatedItem=b,b._values[e]=
d,b._nullProps[e]=!0)}function h(b){return b?-1!==b.indexOf("[]"):!1}function a(){return{code:arguments[0]}}function d(b,a,d,c){return{type:"itemsChange",created:b,recreated:a,removed:d,changed:c}}function k(a,d,c,e){function f(d){d=P(m[d].depend.on);for(var c=0,e=d.length;c<e;c++)if(-1===b.inArray(d[c],a._realProperty)&&-1!==b.inArray(d[c],g))return!1;return!0}function k(a,d){for(var c=0,e=d.length;c<e;c++){var r=y[d[c]];if(r)for(var f=0,h=r.length;f<h;f++){var g=r[f];-1===b.inArray(g,a)&&a.push(g)}}}
var g=[],m=a.schema||a._model.schema,y=a._dependencyMap,t={};for(e?g=a._dependProps.slice():k(g,P(c));0!==g.length;){c=[];e=0;for(var A=g.length;e<A;e++){var q=g[e];if(f(q)){var l=m[q].depend.calc.call(a,d);0!==a._validateItemValue(q,l,!0).length&&n(15016,[a._model?a._model.name:"n/a",q,l]);t[q]={oldValue:a._values[q],newValue:l};m[q]&&h(m[q].type)?l?(a._values[q].copyFrom(l),a._nullProps[q]=!1):(a._values[q].copyFrom([]),a._nullProps[q]=!0):a._values[q]=l}else c.push(q)}k(c,g);g=c}return t}function y(b,
a,d,c){for(var e in d){e in b||n(15013,[c?c.name:"n/a",e]);var f=d[e];b[e]&&h(b[e].type)&&!d.hasOwnProperty(e)||(f=a(e,f,c&&c._idKey===e),0<f.length&&n(15011,[c?c.name:"n/a",e],f))}}function M(a,d,c,e){var m=a.schema||a._model.schema,y=[],t;for(t in d)if(!c||-1===b.inArray(t,c)){var A=a._values[t],l=d[t];if(m[t]&&m[t].depend)A!==l&&n(15012,[a._model?a._model.name:"n/a",t]);else{var p=m[t]&&m[t].type;h(p)&&(null==l?(l=[],a._nullProps[t]=!0):a._nullProps[t]=!1);if(p&&p.match(/string|number|integer|boolean/)){var G=
l;if(F(G)){for(var G=G.slice(0),l=0,u=G.length;l<u;l++)G[l]=G[l]&&"object"===typeof G[l]?G[l]&&G[l].valueOf&&G[l].valueOf():G[l];l=G}else l=G&&"object"===typeof G&&G.valueOf?G.valueOf():G}if(null!=l&&p&&p.match(/number|integer/)&&"number"!==typeof l)if(F(l)||g.core.data.isObservableArray(l))for(G=0,u=l.length;G<u;G++)null!=l[G]&&q(l[G])&&(l[G]=parseFloat(l[G]));else null!=l&&(l=parseFloat(l));h(p)&&A&&A.equals(l)||A===l||f(A)&&f(l)||(p&&-1!==p.indexOf("[]")&&g.core.data.isObservableArray(A)&&(A=A.toArray()),
y.push({p:t,o:A,n:l}))}}if(y.length){d={};c=[];G=0;for(t=y.length;G<t;G++)A=y[G],m[A.p]&&h(m[A.p].type)?A.n&&a._values[A.p].copyFrom(A.n):a._values[A.p]=A.n,d[A.p]={oldValue:A.o,newValue:a.get(A.p)},c.push(A.p);m={type:!0===e?"create":"change",target:a,props:d};b.extend(d,k(a,m,c,e));return m}}function da(a){var b=a._manager;a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function m(a,b,d){if(a._manager)for(var c=da(a),e=0,f=d.length;e<f;e++){var k=
d[e],h=k._values[a._idKey];c[h]||(c[h]=[]);c[h].push({type:b,item:k})}}function N(a,b){if(a._manager){var d=da(a),c=b.target._values[a._idKey];d[c]||(d[c]=[]);d[c].push({type:2,ev:b})}}function Q(a){var d={},c;for(c in a)if(a.hasOwnProperty(c)){var e=a[c]?a[c].depend:null;if(e)for(var e=P(e.on),f=0,k=e.length;f<k;f++){var h=e[f];d[h]||(d[h]=[]);-1===b.inArray(c,d[h])&&d[h].push(c)}}return d}function Y(a,d){t(a,d,!0);var c;c=(c=a.base)?d.models[c.slice(1)].schema:{};c=b.extend({},c,a.schema);u(c,!0,
d,!0);var e=z(c,!0,d);w(c,e,!0);return new Ka(c,a,e,d)}function A(a,d){var c=[],e=[],f=[],k;for(k in a)a[k]&&a[k].depend?e.push(k):c.push(k),a[k]&&a[k].type&&-1!==a[k].type.indexOf("[]")&&f.push(k);k=Q(a);var h={},g;for(g in a){var m=a[g];if(!m||!m.depend){var l=null,l=m&&void 0!==m.defaultValue?m.defaultValue:null;h[g]=l}}return{_realProps:c,_dependProps:e,_aryProps:f,_dependencyMap:k,_createInitialValueObj:function(a){if(!a)return b.extend({},h);var d=b.extend({},h),c;for(c in a)d[c]=a[c];return d},
_validateItemValue:function(a,b,c){return d[a](b,c)}}}function C(a,d,c,e){var f=!1,k=["sort","reverse","pop","shift"],h=null;c.addEventListener("changeBefore",function(c){!e||!a._isRemoved&&e._manager||n(15005,[a._values[e._idKey],c.method]);var m=g.u.obj.argsToArray(c.args);if(-1===b.inArray(c.method,k)){var l=!0;switch(c.method){case "splice":l=!1;m.shift();m.shift();break;case "copyFrom":m=m[0];break;case "set":m.shift()}l&&(c=a._validateItemValue(d,m),0<c.length&&n(15011,d,c))}e?(e._manager&&
(c=e._manager,m=e.name,c._oldValueLogs||(c._oldValueLogs={}),c._oldValueLogs[m]||(c._oldValueLogs[m]={}),c=c._oldValueLogs[m],m=a._values[e._idKey],c[m]||(c[m]={}),c[m][d]||(c[m][d]=a._values[d].toArray())),(f=e._manager?e._manager.isInUpdate():!1)||e._manager.beginUpdate()):h=a._values[d].toArray()});c.addEventListener("change",function(b){if(!a._isInSet&&null!==b.method){var k={type:"change",target:a,props:{}};k.props[d]={};e?(N(e,k),f?b.stopImmediatePropagation():(e._manager._isArrayPropChangeSilentlyRequested=
!0,e._manager.endUpdate(),e._manager._isArrayPropChangeSilentlyRequested=!1)):c.equals(h)||(k.props[d]={oldValue:h,newValue:a._values[d]},a.dispatchEvent(k))}})}function ma(a){ra(a)||n(15E3);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function Ka(a,b,d,c){this.items={};this.size=0;this.name=b.name;this._manager=c;for(var e in a)a[e]&&a[e].id&&(this._idKey=e);this._idType=(b=a[this._idKey].type)?"string"===b?"string":"number":"string";this.schema=a;
this._itemConstructor=ea(a,d,this);c.models[this.name]=this}function ea(a,d,c){function e(b){H(this,a,f,b);b=f._createInitialValueObj(b);y(a,f._validateItemValue,b,c);M(this,b,null,!0);b=f._aryProps;for(var d=0,k=b.length;d<k;d++)C(this,b[d],this.get(b[d]),c)}var f=A(a,d);c._schemaInfo=f;g.mixin.eventDispatcher.mix(e.prototype);b.extend(e.prototype,f,W,{_model:c,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return e}function ba(a){}function I(){this.length=0;this._src=
[]}function X(){return new I}function R(a){return a&&a.constructor===I?!0:!1}var W={get:function(a){var b=this._model,d=b?b.schema:this.schema;if(0===arguments.length){var b={},c;for(c in d)b[c]=this._values[c];return b}d.hasOwnProperty(a)||n(15014,[b?b.name:"n/a",a]);return this._values[a]},set:function(a){var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);var d=this._model;!d||!this._isRemoved&&d._manager||n(15005,[this._values[this._model._idKey],"set"],this);if(d)d._idKey in b&&
b[d._idKey]!==this._values[d._idKey]&&n(15003,[d.name,this._idKey]),y(d.schema,d._schemaInfo._validateItemValue,b,d);else{var c=this.validate(b);if(c)throw c;}c=d?d._manager.isInUpdate():!1;d&&!c&&d._manager.beginUpdate();this._isInSet=!0;b=M(this,b);this._isInSet=!1;d?(b&&N(d,b),c||d._manager.endUpdate()):b&&this.dispatchEvent(b)},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;
return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};g.mixin.eventDispatcher.mix(ma.prototype);b.extend(ma.prototype,{createModel:function(d){d&&"object"===typeof d||n(15001,null,[a(15900)]);if(!F(d))return this.models[d.name]?this.models[d.name]:Y(d,this);var c=d.length;c||n(15001,null,[a(15900)]);for(var e={},f=[],k=0;k<c;k++){var h=d[k].name;if(this.models[h])A[k]=manager.models[d.name];else try{f.push(h);h=[];d[k].base&&h.push(d[k].base.substring(1));for(var g in d[k].schema){var m=d[k].schema[g];
if(m){var l=m.type;l&&"@"===l.substring(0,1)&&(l=-1===l.indexOf("[]")?l.substring(1):l.substring(1,l.length-2),h.push(l))}}e[k]={depends:h}}catch(y){n(15001)}}for(var A={size:0};A.size<c;){g={};m=!1;for(k=0;k<c;k++)if(!e[k].registed){for(var h=e[k].depends,l=0,t=h.length;l<t;l++)if(!this.models[h[l]]){g[h[l]]=!0;break}l===t&&(A[k]=Y(d[k],this),A.size++,m=!0,e[k].registed=!0)}if(!m){var k=!0,q;for(q in g)if(-1===b.inArray(q,f)){k=!1;break}k&&n(15004);n(15001,null,[a(15903,q)])}}d=[];for(k=0;k<c;k++)d.push(A[k]);
return d},dropModel:function(a){if((a=D(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(a){if(this.isInUpdate()){var b=!this._isArrayPropChangeSilentlyRequested,c=this._updateLogs,e=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;a={};for(var k in c)if(c.hasOwnProperty(k)){var h;
h=this.models[k];var g=c[k],m=[],l=[],A=[],y=[],t=void 0;for(t in g){for(var q=g[t],G=!0,E=[],B=q.length-1;0<=B;B--){var p=q[B],n=p.type;if(2===n)E.push(p.ev);else{a:{for(G=0;G<B;G++){var u=q[G].type;if(1===u||3===u){B=q[G];break a}}B=null}if(1===n)B&&3===B.type?m.push({id:t,oldItem:B.item,newItem:p.item}):l.push(p.item);else if(B=B&&3===B.type?B.item:B?null:p.item)y.push(B),B.dispatchEvent({type:"remove",model:h});G=!1;break}}if(G&&0<E.length){p={};for(B=E.length-1;0<=B;B--)for(var C in E[B].props)p[C]||
(R(h.get(t).get(C))?(n=e&&e[h.name]&&e[h.name][t]&&e[h.name][t][C],h.get(t).get(C).equals(n)||(p[C]={oldValue:n})):p[C]={oldValue:E[B].props[C].oldValue});B=!1;for(C in p)n=p[C].oldValue,q=h.get(t).get(C),(G=n===q)||(G=f(n)&&f(q)),G?delete p[C]:(B=h.get(t).get(C),b&&R(B)&&B.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),p[C].newValue=B,B=!0);B&&(E={type:"change",target:E[0].target,props:p},A.push(E),E.target.dispatchEvent(E))}}(h=0===l.length&&0===m.length&&0===y.length&&0===
A.length?!1:{created:l,recreated:m,removed:y,changed:A})&&(a[k]=h)}C=!1;for(k in a)C=!0,h=a[k],this.models[k].dispatchEvent(d(h.created,h.recreated,h.removed,h.changed));k={type:"itemsChange",models:a};C&&this.dispatchEvent(k)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,d={};d[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:d})}});g.mixin.eventDispatcher.mix(Ka.prototype);b.extend(Ka.prototype,{create:function(a){this._manager||n(15006,[this.name,"create"]);var b=
this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var d=[],c=P(a),e=[],f=this._idKey,k=0,h=c.length;k<h;k++){var g=c[k],l=g[f],t=this._findById(l);t?(e.push(t),(l=M(t,g,[f]))&&N(this,l)):(g=new this._itemConstructor(g),this.items[l]=g,this.size++,d.push(g),e.push(g))}0<d.length&&m(this,1,d);b||this._manager.endUpdate();return F(a)?e:e[0]},validate:function(a,b){try{var d=this._idKey,c=P(a);"object"===typeof a||F(a)||n(15007);if(b)for(var e=
0,f=c.length;e<f;e++){var k=c[e],h=k[d];""!==h&&null!=h||n(15002,[this.name,d]);var g=this._schemaInfo._createInitialValueObj(k);y(this.schema,this._schemaInfo._validateItemValue,g,this)}else for(var e=0,m=c.length;e<m;e++)k=c[e],y(this.schema,this._schemaInfo._validateItemValue,k,this)}catch(l){return l}return null},get:function(a){if(F(a)||g.core.data.isObservableArray(a)){for(var b=[],d=0,c=a.length;d<c;d++)b.push(this._findById(a[d]));return b}return this._findById(a)},remove:function(a){this._manager||
n(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var d=this._idKey,c=P(a),e=[],f=[],k=0,h=c.length;k<h;k++)if(this.has(c[k])){var g=D(c[k])||v(c[k],!0)?c[k]:c[k]._values[d],l=this.items[g];delete this.items[g];this.size--;f.push(l);l._model&&(l._isRemoved=!0);e.push(l)}else f.push(null);0<e.length&&m(this,3,e);b||this._manager.endUpdate();return F(a)?f:f[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},
has:function(a){return D(a)||v(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&L(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return"undefined"===typeof a?null:a},_dispatchItemsChangeEvent:function(a){a=d([],[],[],[a]);this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,d;for(d in b)b.hasOwnProperty(d)&&a.push(b[d]);return a},
createQuery:V.data.createQuery});g.mixin.eventDispatcher.mix(ba.prototype);b.extend(ba.prototype,W,{validate:function(a){try{var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);y(this.schema,this._validateItemValue,b)}catch(d){return d}return null}});g.mixin.eventDispatcher.mix(I.prototype);var O={equals:function(a){var b=R(a);if(!b&&!F(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==b)return!1;for(var d=0;d<b;d++){var c=this[d],e=a[d],k;(k=c===e)||(k=f(c)&&f(e));if(!k)return!1}return!0},
copyFrom:function(a){null==a&&(a=[]);a=R(a)?a._src:a;F(a)||n(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=g.u.obj.argsToArray(arguments),b=0,d=a.length;b<d;b++)R(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},na="concat join pop push reverse shift slice sort splice unshift indexOf lastIndexOf every filter forEach map some reduce reduceRight".split(" "),
Z;for(Z in O)O.hasOwnProperty(Z)&&-1===b.inArray(Z,na)&&na.push(Z);var U=["concat","slice","splice","filter","map"],S=["reverse","sort"],G="sort reverse pop shift unshift push splice copyFrom set".split(" ");Z=0;for(var Da=na.length;Z<Da;Z++){var aa=na[Z];I.prototype[aa]=function(a){function d(){var e=c.apply(this._src,arguments);if(-1!==b.inArray(a,S))e=this;else if(-1!==b.inArray(a,U)){var f=X();f.copyFrom(e);e=f}return e}var c=O[a]?O[a]:Array.prototype[a];return-1===b.inArray(a,G)?d:function(){if(!this.dispatchEvent({type:"changeBefore",
method:a,args:arguments})){var b=d.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:a,args:arguments,returnValue:b});return b}}}(aa)}g.u.obj.expose("h5.core.data",{createManager:function(a,b){ra(a)||n(15E3);var d=new ma(a);if(null!=b){""===b&&(b="window");var c={};c[a]=d;g.u.obj.expose(b,c)}return d},createObservableArray:X,createObservableItem:function(a){u(a,!1,null,!0);var b=z(a);w(a,b,!0);var d=new ba,b=A(a,b);H(d,a,b);d.schema=a;for(var c in b)d[c]=
b[c];c=b._createInitialValueObj();y(a,b._validateItemValue,c);M(d,c,null,!0);a=0;for(b=d._aryProps.length;a<b;a++)C(d,d._aryProps[a],d.get(d._aryProps[a]));return d},isObservableArray:R,isObservableItem:function(a){return!(!(a&&a.constructor&&a._validateItemValue)||L(a.getModel))},createSequence:function(a,d,c){function e(){return m}function f(){var a=m;m+=l;return a}function k(){return m.toString()}function h(){var a=m;m+=l;return a.toString()}function g(){}var m=null!=a?a:1,l=null!=d?d:1;a=1===
c?{current:k,next:h,returnType:1}:{current:e,next:f,returnType:2};a.setCurrent=function(a){m=a};b.extend(g.prototype,a);return new g},SEQ_STRING:1,SEQ_INT:2})})();(function(){function c(c){return g.u.obj.isJQueryObject(c)?c:b(c)}function e(){this.__cachedTemplates={}}var f=g.async.deferred,q={escapeHtml:function(b){return g.u.str.escapeHtml(b)}};b.extend(e.prototype,{load:function(c){var e=f(),q=null;switch(b.type(c)){case "string":b.trim(c)||n(7004);q=[c];break;case "array":q=c;0===q.length&&n(7004);
c=0;for(var v=q.length;c<v;c++)D(q[c])?b.trim(q[c])||n(7004):n(7004);break;default:n(7004)}v=[];c=0;for(var p=q.length;c<p;c++)v.push(g.res.get(q[c]));var l=this;la(v,function(b){b=F(b)?b:[b];for(var c=[],f,a=0,d=b.length;a<d;a++){for(var k=b[a].templates,g=0,q=k.length;g<q;g++){if(!l.isValid(k[g].content)){f=k[g];break}c.push(k[g])}if(f)break}if(f)try{l.register(f.id,f.content)}catch(t){return t.detail.url=b[a].url,t.detail.path=b[a].path,e.reject(t)}a=0;for(d=c.length;a<d;a++)l.register(c[a].id,
c[a].content);e.resolve()},function(b){e.reject(b)});return e.promise()},getAvailableTemplates:function(){var b=[],c;for(c in this.__cachedTemplates)b.push(c);return b},register:function(c,e){"string"!==b.type(e)?n(7E3,null,{id:c}):D(c)&&b.trim(c)||n(7002,[]);try{var f=new EJS.Compiler(e,"[");f.compile();this.__cachedTemplates[c]=f.process}catch(g){f=g.lineNumber,n(7010,[f?" line:"+f:"",g.message],{id:c})}},isValid:function(b){try{return(new EJS.Compiler(b,"[")).compile(),!0}catch(c){return!1}},get:function(c,
e){var f=this.__cachedTemplates;D(c)&&b.trim(c)||n(7002);(f=f[c])||n(7005,c);var g=e?b.extend(!0,{},e):{},p=g.hasOwnProperty("_h")?new EJS.Helpers(g):new EJS.Helpers(g,{_h:q}),l=null;try{l=f.call(g,g,p)}catch(v){n(7006,v.toString(),v)}return l},update:function(b,e,f){return c(b).html(this.get(e,f))},append:function(b,e,f){return c(b).append(this.get(e,f))},prepend:function(b,e,f){return c(b).prepend(this.get(e,f))},isAvailable:function(b){return!!this.__cachedTemplates[b]},clear:function(c){if("undefined"===
typeof c)this.__cachedTemplates={};else{var e=null;switch(b.type(c)){case "string":e=[c];break;case "array":c.length||n(7002);e=c;break;default:n(7002)}c=0;for(var f=e.length;c<f;c++){var g=e[c];D(g)&&b.trim(g)||n(7002)}c=0;for(f=e.length;c<f;c++)delete this.__cachedTemplates[e[c]]}},bind:function(c,e){var f;null==c&&n(7007);F(c)?f=c:(f=b(c),0===f.length&&n(7007),f=f.toArray());(null==e||"object"!==typeof e||F(e)||g.core.data.isObservableArray(e))&&n(7009);return V.view.createBinding(f,e)}});var v=
new e;v.createView=function(){return new e};b(function(){b('script[type\x3d"text/ejs"]').each(function(){var c=b.trim(this.id),e=b.trim(this.innerHTML);0!==e.length&&c&&(e=new EJS.Compiler(e,"["),e.compile(),v.__cachedTemplates[c]=e.process)})});g.u.obj.expose("h5.core",{view:v})})();(function(){function c(a,b){return a&&1===a.nodeType?a.getAttribute(b):void 0}function e(a){if(!a)return null;for(var b=[],d=0,c=a.length;d<c;d++)b.push(a[d]);return b}function f(a,b,d,c){var e=[];b=P(b);if(!0===c)return q(e,
a,b,d),e;a=a.childNodes;c=0;for(var f=a.length;c<f;c++)q(e,a[c],b,d);return e}function q(a,b,d,c){if(1===b.nodeType){for(var e=0,f=d.length;e<f;e++){var k=b.getAttribute(d[e]);if("undefined"===typeof c){if(null!==k){a.push(b);break}}else if(null!==k&&k==c){a.push(b);break}}if(0<b.childNodes.length)for(b=b.childNodes,e=0,f=b.length;e<f;e++)q(a,b[e],d,c)}}function v(a,d){a=P(a);for(var e=[],k=0,h=a.length;k<h;k++){var g=a[k];if(1===g.nodeType&&(!0!==d||null==c(g,"data-h5-context")&&null==c(g,"data-h5-loop-context")))for(var m=
f(g,"data-h5-bind",void 0,!0),l=0,q=m.length;l<q;l++){for(var y=!0,p=m[l];null!=p&&p!==g;p=p.parentNode)if(null!=c(p,"data-h5-context")||null!=c(p,"data-h5-loop-context")){y=!1;break}y&&e.push(m[l])}}return b(e)}function t(a,d,e){for(var k=[],h=0,g=a.length;h<g;h++){var m=a[h];if(1===m.nodeType){if(!0===e){if(null!=m.getAttribute(d)){k.push(m);continue}if(null!=c(m,"data-h5-context")||null!=c(m,"data-h5-loop-context"))continue}for(var l=f(m,d,void 0,!1),q=0,y=l.length;q<y;q++){var p=b(l[q])[0],n=
p.parentNode;(null==c(n,"data-h5-context")&&null==c(n,"data-h5-loop-context")||n===m)&&k.push(p)}}}return b(k)}function u(a){return a&&a.addEventListener&&a.getModel&&!F(a)&&!g.core.data.isObservableArray(a)||g.core.data.isObservableItem(a)?!0:!1}function w(a,b){for(var d=0,c=a.length;d<c;d++){var e=a[d];1===e.nodeType&&e.setAttribute("data-h5-dyn-vid",b)}}function z(a,d,f){var k=da++,h=d[0];b(h).empty();if(f){F(f)||g.core.data.isObservableArray(f)||n(7102);w(d,k);a._addBindingEntry(f,h,k);g.core.data.isObservableArray(f)&&
!a._isWatching(f)&&(d=function(b){a._observableArray_changeListener(b)},a._listeners[a._getContextIndex(f)]=d,f.addEventListener("change",d));d=c(h,"data-h5-dyn-ctx");d=e(a._getSrcCtxNode(d).childNodes);var m=[];a._loopElementsMap[k]=m;for(var k=h.ownerDocument.createDocumentFragment(),l=f.get?function(a){return f.get(a)}:function(a){return f[a]},q=0,y=f.length;q<y;q++){for(var t=[],v=0,u=d.length;v<u;v++){var M=Y(d[v]);t.push(M);k.appendChild(M)}m[q]=t;h.appendChild(k);p(a,t,l(q),!1,!0)}}}function p(a,
b,d,c,e){b=P(b);if(c)z(a,b,d);else{c=da++;d&&(("object"!==typeof d||F(d)||g.core.data.isObservableArray(d))&&n(7102),w(b,c),a._addBindingEntry(d,b,c));var f=u(d);f&&!a._isWatching(d)&&(c=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(d)]=c,d.addEventListener("change",c));v(b,e).each(function(){D(this,d,f)});l(a,b,d,!1,e);l(a,b,d,!0,e)}}function l(a,b,d,e,f){var k=e?"data-h5-loop-context":"data-h5-context";t(b,k,f).each(function(){var b=c(this,k),f=null;d&&(f=u(d)?
d.get(b):d[b]);p(a,this,f,e)})}function D(a,d,e){for(var f=c(a,"data-h5-bind").split(";"),k=[],h=[],g=[],m=0,l=f.length;m<l;m++){var q=f[m];if(-1===q.indexOf(":"))0<b.trim(q).length&&(k.push(null),h.push(null),g.push(b.trim(q)));else{var p=q.split(":"),q=b.trim(p[0]),p=b.trim(p[1]),t=null,v=y.exec(q);v&&(t=v[1],q=/(\S+)[\s\(]/.exec(q)[1]);0<q.length&&0<p.length&&(k.push(q),h.push(t),g.push(p))}}f=a.tagName.toLowerCase();m=b(a);l=0;for(q=k.length;l<q;l++){var t=k[l],v=h[l],M=g[l],p=null;d&&(p=e?d.get(M):
d[M]);null==t&&("input"===f?(t="attr",v="value"):t="text");switch(t){case "text":null==p?m.text(""):m.text(p);break;case "html":null==p?m.html(""):m.html(p);break;case "class":var t=c(a,"data-h5-dyn-cn"),M=(v=null==t)?"":" ",u=!1;p&&(u=!(new RegExp("\\s"+p+"\\s")).test(" "+t+" "));m[0].className=(v?"":t)+(u?M+p:"");break;case "attr":v||n(7100);"input"===f&&"value"===v?null==p?m.val(""):m.val(p):null==p?m.removeAttr(v):m.attr(v,p);break;case "style":v||n(7100);null==p?m.css(v,""):m.css(v,p);break;
default:n(7101)}}}function H(a,b,d){for(var c=0,e=d.length;c<e;c++){var f=d[c];b.removeChild(f);a._removeBinding(f)}}function h(a){a=a.childNodes;for(var b=[],d=0,c=a.length;d<c;d++)b.push(Y(a[d]));return b}function a(a,b,d,c,e){for(var f=d.ownerDocument.createDocumentFragment(),k=[],g=0,m=e.length;g<m;g++){var l=h(d);k[g]=l;for(var q=0,y=l.length;q<y;q++)f.appendChild(l[q]);p(a,l,e[g])}Array.prototype[c].apply(b,k);return f}function d(a,b,d,c,e,f){var k=c.length;if(0!==k){var g=c[0],m=g;for(d=1===
k?d.length:m+c[1];m<d;m++){var l=e[m];l&&H(a,b,l)}e.splice(g,c[1]);if(!(2>=k)){m=e.length;m=0===m||0===g?b.firstChild:g>=m?null:e[g][0];d=f.ownerDocument.createDocumentFragment();g=[g,0];for(l=2;l<k;l++){for(var q=h(f),y=0,t=q.length;y<t;y++)d.appendChild(q[y]);p(a,q,c[l]);g.push(q)}b.insertBefore(d,m);Array.prototype.splice.apply(e,g)}}}function k(a,b){void 0!==a.nodeType?1===a.nodeType&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=e(a));this._bindRootId=
m++;N[this._bindRootId]=this;for(var d=[],k=0,g=this._targets.length;k<g;k++){var h=this._targets[k];if(1===h.nodeType){h.setAttribute("data-h5-dyn-bind-root",this._bindRootId);for(var l=f(h,["data-h5-context","data-h5-loop-context"],void 0,!0),q=0,y=l.length;q<y;q++){var t=M++;l[q].setAttribute("data-h5-dyn-ctx",t)}l=f(h,"data-h5-bind",void 0,!0);q=0;for(y=l.length;q<y;q++)t=l[q],/class\s*:/.test(c(t,"data-h5-bind"))&&""!=t.className&&t.setAttribute("data-h5-dyn-cn",t.className)}d.push(h.cloneNode(!0))}this._srces=
d;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};p(this,this._targets,this._rootContext,!1,!0)}var y=/\(\s*(\S+)\s*\)/,M=0,da=0,m=0,N={},Q={},Y;(function(){var a=document.createElement("div");a.h5Dummy="a";var d=a.cloneNode(!1),c=void 0!==d.h5Dummy;a.h5Dummy=void 0;c?(d.h5Dummy=void 0,Y=function(a){var d=a.ownerDocument;return 1===a.nodeType?b(b.trim(a.outerHTML),d)[0]:a.cloneNode(!0)}):Y=function(a){return a.cloneNode(!0)}})();b.extend(k.prototype,
{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var d=this._targets[a];if(1===d.nodeType){this._removeBinding(d);d.removeAttribute("data-h5-dyn-bind-root");for(var c=f(d,"data-h5-dyn-cn",void 0,!0),e=0,k=c.length;e<k;e++)c[e].removeAttribute("data-h5-dyn-cn");d=f(d,"data-h5-dyn-ctx",void 0,!0);e=0;for(c=d.length;e<c;e++)d[e].removeAttribute("data-h5-dyn-ctx")}}delete N[this._bindRootId]},_observableArray_changeListener:function(b){var e=this._getViewsFromSrc(b.target);if(e)for(var f in e)if(e.hasOwnProperty(f)){var k=
e[f],g=this._getSrcCtxNode(c(k,"data-h5-dyn-ctx")),m=this._loopElementsMap[f];switch(b.method){case "set":d(this,k,b.target,[b.args[0],1,b.args[1]],m,g);break;case "shift":case "pop":var l=m[b.method]();l&&H(this,k,l);break;case "unshift":l=a(this,m,g,b.method,b.args);k.insertBefore(l,k.firstChild);break;case "push":l=a(this,m,g,b.method,b.args);k.appendChild(l);break;case "splice":d(this,k,b.target,b.args,m,g);break;case "reverse":for(var l=k,q=m;l.firstChild;)l.removeChild(l.firstChild);for(var y=
0,k=q.length;y<k;y++)for(var g=q[y],t=g.length-1;0<=t;t--)l.insertBefore(g[t],l.firstChild);m.reverse();break;case "sort":case "copyFrom":case null:for(var l=this._loopElementsMap,q=f,y=b.target,t=m,m=g,g=0,n=t.length;g<n;g++)H(this,k,t[g]);for(var t=k.ownerDocument.createDocumentFragment(),n=[],g=0,v=y.length;g<v;g++){var M=h(m);n[g]=M;for(var u=0,w=M.length;u<w;u++)t.appendChild(M[u]);p(this,M,y.get(g))}k.appendChild(t);l[q]=n}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);
if(b){var d=!1;a.target===this._rootContext&&(d=!0);var e=this,f;for(f in b)if(b.hasOwnProperty(f)){var k=b[f];v(k,d).each(function(){D(this,a.target,!0)});t(k,"data-h5-context").each(function(){var b=c(this,"data-h5-context");if(!(b in a.props))return!0;e._removeBinding(this);var d=c(this,"data-h5-dyn-ctx"),d=e._getSrcCtxNode(d),d=Y(d);this.parentNode.replaceChild(d,this);p(e,d,a.props[b].newValue)});t(k,"data-h5-loop-context").each(function(){var b=c(this,"data-h5-loop-context");if(!(b in a.props)||
a.target._isArrayProp(b))return!0;e._removeBinding(this);p(e,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,d=this._srces.length;b<d;b++){var e=this._srces[b];if(c(e,"data-h5-dyn-ctx")===a)return e;e=f(e,"data-h5-dyn-ctx",a);if(0<e.length)return e[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(a){return b.inArray(a,this._usingContexts)},_addBindingEntry:function(a,b,d){var c=this._getContextIndex(a);
-1===c&&(this._usingContexts.push(a),c=this._usingContexts.length-1);Q[d]=a;(a=this._srcToViewMap[c])?a[d]=b:(a={},a[d]=b,this._srcToViewMap[c]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=Q[a];if(b){var d=this._getContextIndex(b);if(-1!==d){var c=this._srcToViewMap[d];c&&c[a]&&(delete c[a],this._hasBindingForSrc(c)||(c=!1,u(b)?(b.removeEventListener("change",this._listeners[d]),c=!0):g.core.data.isObservableArray(b)&&
(b.removeEventListener("change",this._listeners[d]),c=!0),c&&delete this._listeners[d],delete this._srcToViewMap[d],this._usingContexts[d]=null))}Q[a]&&delete Q[a]}},_removeBinding:function(a){if(1===a.nodeType){var b=c(a,"data-h5-dyn-vid");null!=b&&(this._removeBindingEntry(b),a.removeAttribute("data-h5-dyn-vid"));a=f(a,"data-h5-dyn-vid");for(var b=0,d=a.length;b<d;b++){var e=a[b];this._removeBindingEntry(c(e,"data-h5-dyn-vid"));e.removeAttribute("data-h5-dyn-vid")}}},_getViewsFromSrc:function(a){a=
this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});V.view={createBinding:function(a,b){return new k(a,b)}}})();(function(){function c(a,d){-1===b.inArray(a,d)&&d.push(a)}function e(a,d){for(var c=[],e=a.concat(d),f=0,g=e.length;f<g;f++){var h=e[f];-1===b.inArray(h,c)&&c.push(h)}return c}function f(a,b){return null==a||"number"===typeof a&&isNaN(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(D(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function q(a,
b){return!!(null==a||D(a)||!b&&a instanceof String)}function n(a,b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean}function t(a){var d=a.name;a.isValid?(this.validProperties.push(d),this.validCount++):(this.isValid=!1,this.invalidProperties.push(d),this.invalidCount++,this.invalidReason=this.invalidReason||{},this.invalidReason[d]||(this.invalidReason[d]={name:d,value:a.value,violation:[]}),this.invalidReason[d].violation.push(a.violation),this.violationCount++);this.validatingProperties.splice(b.inArray(d,
this.validatingProperties),1);this.isValid&&this.validatingProperties.length||(this.isAllValid=this.isValid)}function u(){this._rule={}}function w(a){this.isValid=a.isValid;this.validProperties=a.validProperties;this.invalidProperties=a.invalidProperties;this.validatingProperties=a.validatingProperties;this.invalidReason=a.invalidReason;this.validCount=a.validProperties.length;this.invalidCount=a.invalidProperties.length;this.violationCount=a.violationCount;this.isAsync=a.isAsync;this.isAllValid=
a.isAllValid;this.properties=a.properties;this._validPropertyToRulesMap=a.validPropertyToRulesMap;this._nameToRuleSetMap=a.nameToRuleSetMap;this._disabledProperties=a.disabledProperties;this.addEventListener("validate",t);this.dispatchEvent=function(){this._aborted||w.prototype.dispatchEvent.apply(this,arguments)}}function z(){this.rules=[];this.rulesMap={}}function p(a,b,c,e){this._isSkipped=!1;this.name=a;this.value=b;this.rule=c;this.timing=e}function l(a,b,c,e,f,g,h){H.addValidateRule(a,b,c,e,
f,g,h)}var J=g.async.isPromise,H=new z;b.extend(u.prototype,{get:function(a){return this._rule[a]},getAll:function(){var a=[],b;for(b in this._rule)a.push(this._rule[b]);return a},_setSkipped:function(a,b){var c=this._rule[a];c&&(c.isSkipped=b)},_setRule:function(a,b,c){this._rule[a]={name:a,arg:b,message:c,isSkipped:!1}}});g.mixin.eventDispatcher.mix(w.prototype);b.extend(w.prototype,{abort:function(){this.removeEventListener("validate",t);this.dispatchEvent({type:"abort"});this._aborted=!0},_merge:function(a){for(var d=
[],f=[],g=[],h=0,l=this.properties.length;h<l;h++){var m=this.properties[h];if(-1!==b.inArray(m,a._disabledProperties))delete this.invalidReason[m],delete this._validPropertyToRulesMap[m],delete this._nameToRuleSetMap[m];else if(g.push(m),this._has(m,a.properties))if(this._nameToRuleSetMap[m]=a._nameToRuleSetMap[m],this._has(m,this.validProperties))this._has(m,a.invalidProperties)?(c(m,d),this.invalidReason[m]=a.invalidReason[m]):this._has(m,a.validProperties)&&c(m,f);else{if(this._has(m,this.invalidProperties))if(this._has(m,
a.validProperties)){var q=a._validPropertyToRulesMap[m],p=this.invalidReason[m].violation;if(q)for(var t=p.length-1;0<=t;t--){var n=p[t];-1!==b.inArray(n.ruleName,q)&&p.splice(t,1)}0===p.length?(delete this.invalidReason[m],c(m,f)):c(m,d);this._validPropertyToRulesMap[m]=a._validPropertyToRulesMap[m]}else if(this._has(m,a.invalidProperties)){q=a._validPropertyToRulesMap[m];p=this.invalidReason[m].violation;if(q)for(t=p.length-1;0<=t;t--)n=p[t],-1!==b.inArray(n.ruleName,q)&&p.splice(t,1);q=0;for(t=
a.invalidReason[m].violation.length;q<t;q++){for(var n=a.invalidReason[m].violation[q],v=!1,u=0,w=p.length;u<w;u++)if(n.ruleName===p[u].ruleName){v=!0;p[u]=n;break}v||p.push(n)}c(m,d)}}else this._has(m,this.validProperties)&&f.push(m),this._has(m,this.invalidProperties)&&d.push(m)}h=0;for(l=a.properties.length;h<l;h++)m=a.properties[h],this._nameToRuleSetMap[m]=a._nameToRuleSetMap[m],this._has(m,this.properties)||(this._has(m,a.validProperties)?c(m,f):this._has(m,a.invalidProperties)&&(c(m,d),this.invalidReason[m]=
a.invalidReason[m]));this.properties=e(g,a.properties);this.validatingProperties=e(this.validatingProperties,a.validatingProperties);this.isAsync=0===this.validatingProperties.length;this.validProperties=f;this.validCount=f.length;this.invalidProperties=d;this.invalidCount=d.length;a=0;for(var z in this.invalidReason)a+=this.invalidReason[z].violation.length;this.violationCount=a;this.isValid=0===this.invalidCount;this.isAllValid=!1;!this.isAsync&&this.isValid&&(this.isAllVaid=!0)},_has:function(a,
d){return-1!==b.inArray(a,d)}});b.extend(z.prototype,{addValidateRule:function(a,b,c,e,f,g,h){if(this.rulesMap[a])for(var l=0,q=this.rules.length;l<q;l++)if(this.rules[l].ruleName===a){this.rules.splice(l,1);break}l=null;null!=c&&(l=Array.isArray(c)?c:[c]);b={ruleName:a,func:b,priority:e,argNames:l,enableWhenEmpty:f,validateOn:g,resolveOn:h};this.rules.push(b);this.rulesMap[a]=b},getValidator:function(a){return this.rulesMap[a]},getValidateFunction:function(a){return this.rulesMap[a]&&this.rulesMap[a].func},
getValidateArgNames:function(a){return this.rulesMap[a]&&this.rulesMap[a].argNames},sortRuleByPriority:function(a){var b=this.rulesMap;a.sort(function(a,c){var e=b[a],f=b[c],e=null==e.priority?-Infinity:e.priority,f=null==f.priority?-Infinity:f.priority;return e===f?0:f-e})}});b.extend(p.prototype,{skip:function(){this._isSkipped=!0}});var h=/^[0-9]+$/;l("required",function(a){return null!=a&&""!==a},null,60,!0,null,null);l("customFunc",function(a,b){return b(a)},["func"],50,!0,null,null);l("assertNull",
function(a){return null==a},null,50,!0,null,null);l("assertNotNull",function(a){return void 0===a?!0:null!=a},null,50,!0,null,null);l("assertFalse",function(a){return null==a||n(a)&&0==a},null,50,!1,null,null);l("assertTrue",function(a){return null==a||n(a)&&1==a},null,50,!1,null,null);l("max",function(a,b,c){return null==a||(f(a,!0)||a instanceof Number)&&(c?a<=b:a<b)},["max","inclusive"],50,!1,null,null);l("min",function(a,b,c){return null==a||(f(a,!0)||a instanceof Number)&&(c?b<=a:b<a)},["min",
"inclusive"],50,!1,null,null);l("future",function(a,b){if(null==a)return!0;var c;c=b instanceof Date?b.getTime():"number"===typeof b?b:"string"===typeof b&&h.test(b)?parseInt(b):(new Date).getTime();var e;if(a instanceof Date)e=a.getTime();else if("number"===typeof a)e=a;else if("string"===typeof a&&h.test(a))e=parseInt(a);else return!1;return c<e},["referenceTime"],50,!1,null,null);l("past",function(a,b){if(null==a)return!0;var c;c=b instanceof Date?b.getTime():"number"===typeof b?b:"string"===typeof b&&
h.test(b)?parseInt(b):(new Date).getTime();var e;if(a instanceof Date)e=a.getTime();else if("number"===typeof a)e=a;else if("string"===typeof a&&h.test(a))e=parseInt(a);else return!1;return e<c},["referenceTime"],50,!1,null,null);l("digits",function(a,b,c){if(null==a)return!0;if(!q(a)||!/^([+|-])?\d*(\.\d+)?$/.test(a))return!1;var e=parseInt(a);return null!=b&&(0>e?-e:e)>=Math.pow(10,b)?!1:null!=c?(b=a.indexOf("."),-1===b?!0:a.slice(b+1).length<=c):!0},["integer","fraction"],50,!1,null,null);l("pattern",
function(a,b){return null==a||q(a)&&b.test(a)},["regexp"],50,!1,null,null);l("size",function(a,d,c){d=d||0;c=c||Infinity;if(b.isPlainObject(a)){var e=0,f;for(f in a)e++;return d<=e&&e<=c}return null==a||(q(a)||F(a))&&d<=a.length&&a.length<=c},["min","max"],50,!1,null,null);V.validation||(V.validation={});V.validation.ValidationResult=w;g.u.obj.expose("h5.validation",{defineRule:l,ValidationTiming:{VALIDATE:"validate",CHANGE:"change",BLUR:"blur",FOCUS:"focus",KEY_UP:"keyup",ASYNC_RESULT:"asyncResult"}});
g.core.expose({__name:"h5.validation.FormValidationLogic",_rule:{},_disableProperties:[],_isForceEnabledWhenEmptyMap:{},_isEnabledAllWhenEmpty:!1,validate:function(a,d,c,e){var f={},g=[],h;for(h in a){if(b.isPlainObject(a[h]))for(var l in a[h])f[l]=a[h][l],g.push(l);f[h]=a[h]}a=null;d&&(a=(b.isArray(d)?d.slice(0):[d]).concat(g));null==c&&(c="validate");return this._validate(f,a,c,e)},_preValidationHook:null,setPreValidationHook:function(a){this._preValidationHook=a},addRule:function(a){for(var b in a){var c=
a[b],e=this._rule[b];null==e&&(e={},this._rule[b]=e);for(var f in c)e[f]=c[f]}},removeRule:function(a){F(a)||delete this._rule[a];for(var b=0,c=a.length;b<c;b++)delete this._rule[a[b]]},disableRule:function(a){a=P(a);for(var d=0,c=a.length;d<c;d++)-1===b.inArray(a[d],this._disableProperties)&&this._disableProperties.push(a[d])},enableRule:function(a){a=P(a);for(var d=0,c=a.length;d<c;d++){var e=b.inArray(a[d],this._disableProperties);-1!==e&&this._disableProperties.splice(e,1)}},setRuleForceEnabledWhenEmpty:function(a,
b){this._isForceEnabledWhenEmptyMap[a]=b},setAllRulesEnabledWhenEmpty:function(a){this._isEnabledAllWhenEmpty=a},_validate:function(a,d,e,f){var g=[],h=[],m=[],l=[],q={},t=d&&(F(d)?d:[d]),n=!1,v={},z=0,D={},L={},P=this._disableProperties.slice(0),I;for(I in this._rule)if(!(d&&-1===b.inArray(I,t)||-1!==b.inArray(I,this._disableProperties))){var X=this._rule[I],R=a[I],W=!1,O=!1,S=new u;L[I]=S;var Z=[],U;for(U in X)Z.push(U);H.sortRuleByPriority(Z);for(var V=!1,G=0,Da=Z.length;G<Da;G++){U=Z[G];var aa=
X[U];if(a.hasOwnProperty(I)&&null!=aa||"required"===U&&aa){var r={},x=H.getValidateArgNames(U);if(x&&null!=aa)for(var K=Array.isArray(aa)?aa:[aa],T=0,ca=x.length;T<ca;T++)r[x[T]]=K[T];S._setRule(U,r);K=H.getValidator(U);if(this._shouldValidateWhen(I,K,e,f)){if(this._preValidationHook){var x={},Ga;for(Ga in r)x[Ga]=r[Ga];x=new p(I,R,{name:U,arg:x},e);this._preValidationHook(x);if(x._isSkipped){S._setSkipped(U,!0);continue}}x=this._convertBeforeValidate?this._convertBeforeValidate(R,U):R;aa=F(aa)?[x].concat(aa):
[x,aa];T=H.getValidateFunction(U);if(!T)break;x=null;if(""!==R||this._shouldValidateWhenEmpty(K))x=T.apply(this,aa);else if(f&&f.invalidReason[I]){aa=!1;K=f.invalidReason[I].violation;T=0;for(ca=K.length;T<ca;T++)if(K[T].ruleName===U){aa=x=!0;break}if(!aa)continue}else continue;V=!0;!J(x)||va(x)||Aa(x)||(O=!0,v[I]=v[I]||[],v[I].push(x.promise({ruleName:U,value:R,ruleValue:r})));!x||J(x)&&va(x)?(q[I]||(q[I]={name:I,value:R,violation:[]}),q[I].violation.push(this._createViolation(U,r)),W=!0,z++):(r=
D[I],r||(r=[],D[I]=r),c(U,r))}else S._setSkipped(U,!0)}}V&&(O?(n=!0,l.push(I)):(W?h:g).push(I),m.push(I))}d=!h.length;var ga=new w({validProperties:g,invalidProperties:h,validatingProperties:l,properties:m,invalidReason:q,isAsync:n,isValid:d,isAllValid:d?n?null:!0:!1,violationCount:z,validPropertyToRulesMap:D,nameToRuleSetMap:L,disabledProperties:P});if(n){var qa=function(a){a.validCount+a.invalidCount===a.properties.length&&(a.isAllValid=a.isValid,a.dispatchEvent({type:"validateComplete"}))},Ca=
this;for(I in v)g=v[I],h=function(b){return function(){ga.dispatchEvent({type:"validate",name:b,isValid:!0,value:a[b],violation:null});qa(ga)}}(I),m=function(a,d,c){return function(){if(-1===b.inArray(a,ga.invalidProperties)){for(var c,e,f,k=0,g=d.length;k<g;k++){var h=d[k];if(va(h)){c=h.ruleName;e=h.ruleValue;f=h.value;break}}ga.dispatchEvent({type:"validate",name:a,isValid:!1,value:f,violation:Ca._createViolation(c,e,arguments)});qa(ga)}}}(I,g),b.when.apply(b,g).done(h).fail(m)}return ga},_createViolation:function(a,
b,c){a={ruleName:a,ruleValue:b,reason:null};c&&(a.reason=g.u.obj.argsToArray(c));return a},_convertBeforeValidate:function(a,b){if(null==a)return a;switch(b){case "max":case "min":return f(a)?parseFloat(a):NaN;case "future":case "past":if(!(a instanceof Date)&&"number"===typeof a)return new Date(a)}return a},_shouldValidateWhenEmpty:function(a){return null!=this._isForceEnabledWhenEmptyMap[a.ruleName]?this._isForceEnabledWhenEmptyMap[a.ruleName]:this._isEnabledAllWhenEmpty?!0:!0===a.enableWhenEmpty},
_shouldValidateWhen:function(a,d,c,e){if(null==d.validateOn)return!0;var f=-1!==b.inArray(c,d.validateOn);if(!f&&e&&e.invalidReason[a]&&d.resolveOn){a=e.invalidReason[a].violation;e=0;for(var g=a.length;e<g;e++)if(a[e].ruleName===d.ruleName&&-1!==b.inArray(c,d.resolveOn)){f=!0;break}}return f},_setRuleResolveTiming:function(a,b){var c=Array.isArray(b)?b:[b];H.getValidator(a).resolveOn=c},_setRuleValidateTiming:function(a,b){var c=Array.isArray(b)?b:[b];H.getValidator(a).validateOn=c}})})();(function(){function c(a){var d=
{},c;for(c in C){var e=b("\x3cdiv\x3e\x3c/div\x3e").addClass(a).addClass(c).appendTo("body"),f=b.camelCase(c);d[f]={};b.map(C[c],function(a,b){d[f][a]="width"===a||"height"===a?parseInt(e.css(a).replace(/\D/g,""),10):e.css(a)});e.remove()}return d}function e(a,b,d){a=b.createElement("v:"+a);for(var c in d)a.style[c]=d[c];return a}function f(a,b){for(var d=[],c=a/2,e=.8*a/2,f=360/b*Math.PI/180,k=1;k<=b;k++){var g=f*k,h=Math.cos(g),g=Math.sin(g);d.push({from:{x:c+e/2*h,y:c+e/2*g},to:{x:c+e*h,y:c+e*
g}})}return d}function q(a){return function(){var b=document.body,d=document.documentElement,c=ea?b:ba?d:null;return c?"Height"===a?c["client"+a]>c["scroll"+a]?c["client"+a]:c["scroll"+a]:c["client"+a]:Math.max(b["scroll"+a],d["scroll"+a],b["offset"+a],d["offset"+a],d["client"+a])}}function n(a){return function(){var b=ea?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function t(a){var b=ea?document.body:document.documentElement;return Q.isiOS?
window["inner"+a]:b["client"+a]}function u(a){var d=b(a)[0],c=document.body,e=b("html")[0];a={top:0,left:0};if(d===c&&ba)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(c.currentStyle.marginTop||0)+parseFloat(c.currentStyle.borderTop||0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(c.currentStyle.marginLeft||0)+parseFloat(c.currentStyle.borderLeft||0)};"undefined"!==typeof d.getBoundingClientRect&&(a=d.getBoundingClientRect());c=ea?c:document.documentElement;d=c.clientTop||
0;c=c.clientLeft||0;return{top:a.top+na()-d,left:a.left+Z()-c}}function w(){b.each(A(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function z(a){a=Y(a)?a[0]:a;return a===window||a===document||a===document.body}function p(a){return ka(S(a)).getComputedStyle(a,null)}function l(a,d){return ka(S(a)).getComputedStyle?p(a)[d]:b(a).css(d)}
function J(a){if(!ka(S(a)).getComputedStyle)return b(a).height();var d=p(a);return a.offsetHeight-parseFloat(d.paddingTop)-parseFloat(d.paddingBottom)}function H(a){if(!ka(S(a)).getComputedStyle)return b(a).width();var d=p(a);return a.offsetWidth-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight)}function h(a,d){if(!ka(S(a)).getComputedStyle)return b(a).outerHeight();var c=p(a);return J(a)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)+parseFloat(c.borderTopWidth)+parseFloat(c.borderBottomWidth)+
(d?parseFloat(c.marginTop)+parseFloat(c.marginBottom):0)}function a(a,d){if(!ka(S(a)).getComputedStyle)return b(a).outerWidth();var c=p(a);return H(a)+parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)+parseFloat(c.borderLeftWidth)+parseFloat(c.borderRightWidth)+(d?parseFloat(c.marginLeft)+parseFloat(c.marginRight):0)}function d(a){if(!ka(S(a)).getComputedStyle)return b(a).innerHeight();var d=p(a);return J(a)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)}function k(a){if(!ka(S(a)).getComputedStyle)return b(a).innerWidth();
var d=p(a);return H(a)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)}function y(a,d,c,e){function f(){k+=13;k>c?(clearInterval(m),d.each(function(b){for(var d in a[b])this.style[d]=""}),e()):d.each(function(a){var d=g[a],c;for(c in d)d[c]+=h[a][c];b(this).css(d)})}var k=0,g=[],h=[];d.each(function(b){var e=a[b];h[b]={};g[b]={};var f=p(d[b]),k;for(k in e)g[b][k]=parseFloat(f[k]),h[b][k]=13*(parseFloat(e[k])-parseFloat(f[k]))/c});f();var m=setInterval(f,13)}function M(a,b,d){var c=[];a.each(function(){var a=
parseFloat(l(this,"opacity"));c.push({opacity:a})});a.css({opacity:0,display:"block"});y(c,a,b,d)}function da(a,b,d){var c=[];a.each(function(){c.push({opacity:0})});y(c,a,b,d)}function m(a,d){this.style=b.extend(!0,{},a);if(!d.getElementById("h5-vmlstyle")){d.namespaces.add("v","urn:schemas-microsoft-com:vml");var c=d.createElement("style");d.getElementsByTagName("head")[0].appendChild(c);c.id="h5-vmlstyle";c.setAttribute("type","text/css");c.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}c=
this.style.throbber.width;this.group=e("group",d,{width:c+"px",height:this.style.throbber.height+"px"});this.group.className="vml-root";for(var c=f(c,this.style.throbber.lines),k=this.style.throbberLine.color,g=this.style.throbberLine.width,h=0,m=c.length;h<m;h++){var l=c[h],q=l.from,p=l.to,l=e("line",d);l.strokeweight=g;l.strokecolor=k;l.fillcolor=k;l.from=q.x+","+q.y;l.to=p.x+","+p.y;q=e("stroke",d);q.opacity=1;l.appendChild(q);this.group.appendChild(l)}this._createPercentArea(d)}function N(a,d){var e=
this,f=b(a);if(f.length){var k=z(f),f=k?b("body"):f,h=S(f[0]);h===window.document||f[0]!==h&&ka(h)!==f[0]||(f=b(h.body));var m=b.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},d);this._displayed=!1;this._throbbers=[];this._settings=m;this._styles=b.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},c(m.theme));m.throbber&&b.extend(this._styles.throbber,m.throbber);this._isScreenLock=k;this._$target=f;this._target=
1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){e._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){e._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof m.fadeIn?m.fadeIn:-1;this._fadeOutTime="number"===typeof m.fadeOut?m.fadeOut:-1;this._$content=b();this._$overlay=b();this._$skin=b();this._showContent=m.showThrobber||
m.message;for(var f=g.u.str.format('\x3cspan class\x3d"indicator-throbber"\x3e\x3c/span\x3e\x3cspan class\x3d"indicator-message" {0}\x3e{1}\x3c/span\x3e',""===m.message?'style\x3d"display: none;"':"",m.message),k="https"===document.location.protocol?"return:false":"about:blank",l=0,q=this._$target.length;l<q;l++)this._$content=this._$content.add(b(h.createElement("div")).append(f).addClass("h5-indicator").addClass(m.theme).addClass("content").css("display","none")),this._$overlay=this._$overlay.add((m.block?
b(h.createElement("div")):b()).addClass("h5-indicator").addClass(m.theme).addClass("overlay").css("display","none")),this._$skin=this._$skin.add((ba||ea?b(h.createElement("iframe")):b()).attr("src",k).addClass("h5-indicator").addClass("skin").css("display","none"));var p=this._isScreenLock&&I?"fixed":"absolute";b.each([this._$overlay,this._$content],function(){this.css("position",p)});h=m.promises;m=function(){e.hide()};f=b.hasOwnProperty("curCSS")?"pipe":"then";F(h)?(h=b.map(h,function(a,b){return a&&
L(a.promise)?a:null}),0<h.length&&Fa(g.async.when(h),f,[m,m])):h&&L(h.promise)&&Fa(h,f,[m,m])}}var Q=g.env.ua,Y=g.u.obj.isJQueryObject,A=g.u.obj.argsToArray,C={throbber:["width","height"],"throbber-line":["width","color"]},P=!!document.createElement("canvas").getContext,V=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='\x3cv:line strokeweight\x3d"1"/\x3e';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),
ea="CSS1Compat"!==document.compatMode,ba=Q.isIE&&6>=Q.browserVersion,I=!(Q.isAndroidDefaultBrowser||Q.isiOS&&5>Q.browserVersion||ba||ea||Q.isWindowsPhone),X=null,R=null,W=null,O=null,na=null,Z=null,U=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div")),d=["Webkit","Moz","O","ms","Khtml"],c=d.length;return function(e){e=b.camelCase(e);if(e in a.style)return!0;e=e.charAt(0).toUpperCase()+e.slice(1);for(var f=0;f<c;f++)if(d[f]+e in a.style)return!0;return!1}}(),
R=function(a){return function(){var b=document.body,d=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+a]:ea?b["client"+a]:d["client"+a]}}("Height"),W=q("Height"),O=q("Width"),na=n("Top"),Z=n("Left"),X=U("animationName");m.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;
if(0!==a){for(var b=this.style.throbber.roundTime,d=this.highlightPos,c=this.group.childNodes,e=0,f=c.length;e<f;e++){var k=c[e];if("textbox"!==k.nodeName){var h=e+1;k.firstChild.opacity=h==d?"1":h==d+1||h==d-1?"0.75":"0.4"}}d==a?d=0:d++;this.highlightPos=d;var g=this;this._runId=setTimeout(function(){g._run.call(g)},Math.floor(b/a))}},_createPercentArea:function(a){var d=e("textbox",a);a=b(a.createElement("table"));a.append("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e");var c=a.find("td");c.width(this.group.style.width);
c.height(this.group.style.height);c.css("line-height",this.group.style.height);c.addClass("throbber-percent");d.appendChild(a[0]);this.group.appendChild(d)},setPercent:function(a){b(this.group).find(".throbber-percent").html(a)}};var fa=function(a,d){this.style=b.extend(!0,{},a);this.canvas=d.createElement("canvas");this.baseDiv=d.createElement("div");this.percentDiv=d.createElement("div");var c=this.canvas,e=this.baseDiv,k=this.percentDiv;c.width=this.style.throbber.width;c.height=this.style.throbber.height;
c.style.display="block";c.style.position="absolute";e.style.width=this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";e.appendChild(c);k.style.width=this.style.throbber.width+"px";k.style.height=this.style.throbber.height+"px";k.style.lineHeight=this.style.throbber.height+"px";k.className="throbber-percent";e.appendChild(k);this.positions=f(c.width,this.style.throbber.lines)};fa.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),
this._run())},hide:function(){b(this.baseDiv).remove();this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,d=b.getContext("2d"),c=this.highlightPos,e=this.positions,f=this.style.throbberLine.color,k=this.style.throbberLine.width,h=this.style.throbber.roundTime;b.width=b.width;for(var g=0,m=e.length;g<m;g++){d.beginPath();d.strokeStyle=f;d.lineWidth=k;var l=g+1;d.globalAlpha=l==c?1:l==c+1||l==c-1?.75:.4;var q=e[g],l=
q.from,q=q.to;d.moveTo(l.x,l.y);d.lineTo(q.x,q.y);d.stroke()}c==a?c=0:c++;this.highlightPos=c;if(X)b.className="throbber-canvas";else{var p=this;this._runId=setTimeout(function(){p._run.call(p)},Math.floor(h/a))}}},setPercent:function(a){this.percentDiv.innerHTML=a}};N.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children(".h5-indicator").length)return this;this._displayed=!0;for(var a=this,d=this._fadeInTime,c=function(){var d=b(window);a._isScreenLock&&(w(a._$overlay,
a._$content),I||(d.bind("touchmove",a._scrollHandler),d.bind("scroll",a._scrollHandler)));d.bind("orientationchange",a._resizeHandler);d.bind("resize",a._resizeHandler)},e=0,f=this._$target.length;e<f;e++){var k=this._$target.eq(e),h=this._$content.eq(e),g=this._$skin.eq(e),q=this._$overlay.eq(e),p=this._settings,t=l(k[0],"position");this._isScreenLock||"static"!==t||(k.data("before-position",t),k.data("before-zoom",l(k[0],"zoom")),k.css({position:"relative",zoom:"1"}));var t=S(k[0]),n=null;p.showThrobber&&
(n=P?new fa(this._styles,t):V?new m(this._styles,t):null);n&&(a._throbbers.push(n),a.percent(this._settings.percent),n.show(h.children(".indicator-throbber")[0]));k.append(g).append(q);this._showContent&&k.append(h)}e=this._$skin.toArray();Array.prototype.push.apply(e,this._$content.toArray());Array.prototype.push.apply(e,this._$overlay.toArray());e=b(e);0>d?(e.css("display","block"),c()):M(e,d,c);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&
I||0===this._$overlay.length))for(var d=0,c=this._$target.length;d<c;d++){var e=this._$content.eq(d),f=this._$overlay.eq(d);b=this._$target.eq(d);var k=this._$skin.eq(d);if(this._isScreenLock)e=O(),b=W();else{f.css("display","none");e.css("display","none");var h=b[0];a=h.scrollWidth;b=h.scrollHeight;if(ba)a=Math.max(a,h.clientWidth),b=Math.max(b,h.clientHeight);else if(Q.isIE&&"function"===typeof getComputedStyle){var h=ka(S(h)).getComputedStyle(h,null),g=parseFloat(h.width)+parseFloat(h.paddingLeft)+
parseFloat(h.paddingRight);a+=g-parseInt(g)-1;h=parseFloat(h.height)+parseFloat(h.paddingTop)+parseFloat(h.paddingBottom);b+=h-parseInt(h)-1}f.css("display","block");e.css("display","block");e=a}f[0].style.width=e+"px";f[0].style.height=b+"px";if(ba||ea)k[0].style.width=e+"px",k[0].style.height=b+"px"}},_reposition:function(){for(var c=0,e=this._$target.length;c<e;c++){var f=this._$target.eq(c),g=this._$content.eq(c);if(this._isScreenLock){var m=R();I?g.css("top",(m-h(g[0]))/2+"px"):g.css("top",na()+
m/2-h(g[0])/2+"px")}else g.css("top",f.scrollTop()+(d(f[0])-h(g[0]))/2);var m=k(g[0])-H(g[0]),q=0;g.children().each(function(){var d=b(this);if("none"===l(d[0],"display"))return!0;q+=a(this,!0)});g.css("width",q+m);g.css("left",f.scrollLeft()+(k(f[0])-a(g[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var a=this,d=this._fadeOutTime,c=this._$skin.toArray();Array.prototype.push.apply(c,this._$content.toArray());Array.prototype.push.apply(c,this._$overlay.toArray());for(var e=
b(c),c=function(){var d=b(window);e.remove();a._isScreenLock||a._$target.each(function(a,d){var c=b(d);c.css({position:c.data("before-position"),zoom:c.data("before-zoom")});c.removeData("before-position").removeData("before-zoom")});d.unbind("touchmove",a._scrollHandler);d.unbind("scroll",a._scrollHandler);d.unbind("orientationchange",a._resizeHandler);d.unbind("resize",a._resizeHandler);a._resizeEventTimerId&&clearTimeout(a._resizeEventTimerId);a._scrollEventTimerId&&clearTimeout(a._scrollEventTimerId)},
f=0,k=this._throbbers.length;f<k;f++)this._throbbers[f].hide();0>d?(e.css("display","none"),c()):da(e,d,c);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,d=this._throbbers.length;b<d;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!D(a))return this;if(!this._redrawable)return this._lastMessage=a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):
this._$content.remove();this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);
b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;I||ba||ea?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};g.u.obj.expose("h5.ui",{indicator:function(a,d){return b.isPlainObject(a)?new N(a.target,a):new N(a,d)},isInView:function(a,d){var c,e,f,k,h=b(a);if("undefined"===typeof d)e=t("Height"),k=t("Width"),c=na(),f=Z();else{k=b(d);if(0===k.find(h).length)return;f=u(k);c=f.top+parseInt(k.css("border-top-width"));
f=f.left+parseInt(k.css("border-left-width"));e=k.innerHeight();k=k.innerWidth()}e=c+e;k=f+k;var g=u(h),m=g.top,g=g.left,l=m+h.outerHeight(),h=g+h.outerWidth();return(c<=m&&m<e||c<l&&l<=e)&&(f<=g&&g<k||f<h&&h<=k)},scrollToTop:function(){function a(){1===window.scrollY&&(d=0);0<d&&(window.scrollTo(0,1),d--,setTimeout(a,500))}var d=3;window.scrollTo(0,1);1!==b(window).scrollTop()&&setTimeout(a,500)}})})();(function(){function c(){var a=b.mobile.activePage,a=a&&a[0]&&a[0].id;return D(a)&&0<a.length?
a:null}function e(){var a=c();null!==a&&b(function(){t.addCSS(a);t.bindController(a)})}function f(a,b){for(var c in w)for(var e=w[c],f=a===c,h=0,g=e.length;h<g;h++){var l=e[h];if(f)l[(b?"enable":"disable")+"Listeners"]()}for(c in z)for(e=z[c],f=a===c,h=0,g=e.length;h<g;h++)if(l=e[h],f)l[(b?"enable":"disable")+"Listeners"]()}function q(a,b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var c=a.split("."),e=b.split("."),f=c.length,h=0;h<f;h++){if(null==e[h])return 1;var g=
parseInt(c[h],10),l=parseInt(e[h],10);if(g!==l)return g<l?-1:1}return null!=e[f]?-1:0}var v,t=null,u={},w={},z={},p={},l={},J=!1,H=!1,h=!1;g.u.obj.ns("h5.ui.jqm");g.ui.jqm.dataPrefix="h5";var a={__name:"JQMController",__ready:function(){var a=this,e=c();b(':jqmData(role\x3d"page"), :jqmData(role\x3d"dialog")').each(function(){a.loadScript(this.id)});var f=this.$find("#"+e);f.one("h5controllerready.emulatepageshow",function(){h&&f[0]===b.mobile.activePage[0]&&f.trigger("h5jqmpageshow",{prevPage:b("")})})},
':jqmData(role\x3d"page"), :jqmData(role\x3d"dialog") pageinit':function(a){v||this._initPage(a.event.target.id)},':jqmData(role\x3d"page"), :jqmData(role\x3d"dialog") pagecreate':function(a){v&&this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(a){b(a.event.target).trigger("h5jqmpagehide",{nextPage:b.mobile.activePage});H=!0;a=a.event.target.id;var c=w[a],e=z[a];if(c){for(var f=0,h=c.length;f<h;f++)c[f].dispose();
w[a]=[]}if(e){f=0;for(h=e.length;f<h;f++)e[f].dispose();z[a]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);f(a,!0)},"{rootElement} pagehide":function(a){H||b(a.event.target).trigger("h5jqmpagehide",{nextPage:a.evArg.nextPage});H=!1;a=a.event.target.id;f(a,!1);this.removeCSS(a)},"{rootElement} pageshow":function(a){var c=!1,e=b(a.event.target),f=a.evArg?a.evArg.prevPage:b("");if(a=w[e[0].id])for(var h=0,g=a.length;h<g;h++)if(!a[h].isReady){e.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",
function(){b.mobile.activePage[0]===e[0]&&e.trigger("h5jqmpageshow",{prevPage:f})});c=!0;break}c||e.trigger("h5jqmpageshow",{prevPage:f})},"{rootElement} h5controllerbound":function(a){a=a.evArg;if(this!==a){var e=c();null!==e&&-1===b.inArray(a,w[e])&&(z[e]||(z[e]=[]),z[e].push(a))}},"{rootElement} h5controllerunbound":function(a){var e=a.evArg;a=c();null!==a&&(e=b.inArray(e,z[a]),-1!==e&&z[a].splice(e,1))},loadScript:function(a){a=b("#"+a);var c=b.trim(a.data(this.getDataAttribute("script")));if(0!==
c.length)return c=b.map(c.split(","),function(a){return b.trim(a)}),a=1==a.data(this.getDataAttribute("async")),g.u.loadScript(c,{async:a})},getDataAttribute:function(a){var b=g.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=u[a],c=p[a];if(b&&0!==b.length){w[a]||(w[a]=[]);for(var e=w[a],f=0,h=b.length;f<h;f++){for(var l=b[f],q=!1,t=0,n=e.length;t<n;t++){var v=e[t];if(v&&v.__name===l.__name){q=!0;break}}q||w[a].push(g.core.controller("#"+a,l,c[f]))}}},
addCSS:function(a){if(a=l[a])for(var c=document.getElementsByTagName("head")[0],e=c.getElementsByTagName("link"),f=e.length,h=0,g=a.length;h<g;h++){for(var q=b.mobile.path.parseUrl(a[h]).filename,p=!1,t=0;t<f;t++)if(b.mobile.path.parseUrl(e[t].href).filename===q){p=!0;break}p||(q=document.createElement("link"),q.type="text/css",q.rel="stylesheet",q.href=a[h],c.appendChild(q))}},removeCSS:function(a){var e=l[a];if(e&&(a=c(),null!==a)){var f=l[a];b("link").filter(function(){var a=b(this).attr("href");
return-1!==b.inArray(a,e)&&-1===b.inArray(a,f)}).remove()}}};g.u.obj.expose("h5.ui.jqm.manager",{init:function(){J||(J=!0,v=0<=q(b.mobile.version,"1.4"),b(document).one("pageshow",function(){h=!0}),b(function(){t=V.core.controllerInternal("body",a,null,{managed:!1});e()}))},define:function(a,f,h,g){D(a)||n(12E3,"id");null==f||D(f)||F(f)||n(12E3,"cssSrc");null!=h&&((D(h)||F(h))&&n(12001),b.isPlainObject(h)&&"__name"in h||n(12E3,"controllerDefObject"),null==g||b.isPlainObject(g)||n(12E3,"initParam"));
l[a]||(l[a]=[]);u[a]||(u[a]=[]);p[a]||(p[a]=[]);b.merge(l[a],b.map(b.makeArray(f),function(c,e){return-1!==b.inArray(c,l[a])?null:c}));h&&-1===b.inArray(h,u[a])&&(u[a].push(h),p[a].push(g));J&&null!==c()?e():this.init()}})})();(function(){function c(c,f,g){this._$arrowbox=b(c).css("display","none");this.setContent(f);b(g&&g.container||g.target.parentElement||document.body).append(this._$arrowbox);this._$arrowbox.data("validation-balloon",this);g=g||{};g.cls&&this._$arrowbox.addClass(g.cls)}b.extend(c.prototype,
{show:function(c){if(!this._isDisposed){var f=this._$arrowbox;this.hide();f.css("display","block");if(c){var g=c.direction||"top";f.addClass(g);var n=c.position,t=b(c.target);c=n?0:t.outerWidth();var u=n?0:t.outerHeight(),n=n?b.extend({},n):{top:t.offset().top,left:t.offset().left};"top"===g||"bottom"===g?(n.left+=(c-f.outerWidth())/2,n.top="top"===g?n.top-(f.outerHeight()+34):n.top+(u+34)):(n.top+=(u-f.outerHeight())/2,n.left="left"===g?n.left-(f.outerWidth()+34):n.left+(c+34));f.css(n)}}},hide:function(){this._isDisposed||
this._$arrowbox&&this._$arrowbox.css("display","none")},setContent:function(b){this._isDisposed||(this._$arrowbox.children().remove(),this._$arrowbox.append(b))},dispose:function(){this._isDisposed||(this.hide(),this._$arrowbox.remove(),this._$arrowbox=null,this._isDisposed=!0)}});g.core.expose({__name:"h5.ui.components.BalloonController",__init:function(b){this.view.register("balloon",'\x3cdiv class\x3d"validation-balloon"\x3e\x3c/div\x3e')},create:function(b,f){var g=this.view.get("balloon");return new c(g,
b,f)},getBalloonFromElement:function(c){return b(c).data("validation-balloon")}})})();(function(){var c=g.u.str.format,e={required:"{displayName}は必須項目です。",min:function(b){return c("{displayName}は{targetViolation.ruleValue.min}{1}数値を入力してください。",b,b.targetViolation.ruleValue.inclusive?"以上の":"より大きい")},max:function(b){return c("{displayName}は{targetViolation.ruleValue.max}{1}数値を入力してください。",b,b.targetViolation.ruleValue.inclusive?"以下の":"未満の")},pattern:"{displayName}は正規表現{targetViolation.ruleValue.regexp}を満たす文字列を入力してください。",
digits:"{displayName}は整数部分{targetViolation.ruleValue.integer}桁、小数部分{targetViolation.ruleValue.fraction}桁以下の数値を入力してください。",size:function(b){var e="",g="",t=b.targetViolation.ruleValue.min,n=b.targetViolation.ruleValue.max;null!=t&&(g=c("{0}以上",t));null!=n&&(e=c("{0}以下",n));return c("{displayName}は{1}{2}の長さでなければいけません。",b,g,e)},future:"{displayName}は現在時刻より未来の時刻を入力してください。",past:"{displayName}は現在時刻より過去の時刻を入力してください。",assertNull:"{displayName}はnullでなければなりません。",assertNotNull:"{displayName}はnullでない値を設定してください。",
assertFalse:"{displayName}はfalseとなる値を入力してください。",assertTrue:"{displayName}はtrueとなる値を入力してください。",customFunc:"{displayName}は条件を満たしません。"};V.validation||(V.validation={});V.validation.createValidateErrorMessage=function(c,q,n,t,u,w,z,p){p=n&&n.displayName||p||c;n=n&&n.message;null==n&&null!=z&&(n=z);null==t&&(t=0);w=b.extend({},q,{displayName:p,rules:w});w.targetViolation=q.violation[t];if(D(n))return g.u.str.format(n,w);if(L(n))return n(w);t=q.violation[t].ruleName;u=u[t];null==u&&(u=e[t]);return null!=
u?L(u)?u(w):g.u.str.format(u,w):g.u.str.format("{0}:{1}はルール{2}を満たしません",c,q.value,t)};g.core.expose({__name:"h5.ui.validation.MessageOutputController",_container:null,_wrapper:null,_setting:{},_validatorDefaultMessageMap:{},_outputPluginDefaultMessage:null,_outputPluginDefaultDisplayName:null,_setOutputDefaultMessage:function(b){this._outputPluginDefaultMessage=b},_setOutputDefaultDisplayName:function(b){this._outputPluginDefaultDisplayName=b},_setDefaultMessage:function(b,c){this._validatorDefaultMessageMap[b]=
c},setContainer:function(b){this._container=b},setWrapper:function(b){this._wrapper=b},addMessageSetting:function(b){if(this._setting)for(var c in b)this._setting[c]=b[c];else this._setting=b},clearMessage:function(){this._container&&b(this._container).empty()},appendMessage:function(c){var e=b(this._container);if(e.length){var n=this._wrapper;n?g.u.str.startsWith(b.trim(n),"\x3c")?(n=b(n),n.html(c)):n=b(document.createElement(n)).html(c):n=b.parseHTML(c);e.append(n)}},getMessageByValidationResult:function(b,
c,e){var g=b.invalidReason[c];if(!g)return null;b=this._getAppliedRules(b,c);return V.validation.createValidateErrorMessage(c,g,this._setting[c],e,this._validatorDefaultMessageMap,b,this._outputPluginDefaultMessage,this._outputPluginDefaultDisplayName)},_getAppliedRules:function(b,c){for(var g=b._nameToRuleSetMap[c].getAll(),n=0,u=g.length;n<u;n++){var w=g[n];w.message=this._validatorDefaultMessageMap[w.name]||e[w.name]}return g},getAllMessagesByValidationResult:function(b,c){return this._getAllMessagesForName(b,
b.invalidReason[c],c)},_getAllMessagesForName:function(b,c,e){if(!c)return[];b=this._getAppliedRules(b,e);for(var g=[],n=0,w=c.violation.length;n<w;n++){var z=V.validation.createValidateErrorMessage(e,c,this._setting[e],n,this._validatorDefaultMessageMap,b,this._outputPluginDefaultMessage,this._outputPluginDefaultDisplayName);g.push(z)}return g},appendMessageByValidationResult:function(c,e,g){var n=c.invalidProperties.sort();e=D(e)?[e]:e;for(var u=0,w=n.length;u<w;u++){var z=n[u];if(!e||-1!==b.inArray(z,
e))if(!0===g)for(var z=this.getAllMessagesByValidationResult(c,z),p=0,l=z.length;p<l;p++)this.appendMessage(z[p]);else z=this.getMessageByValidationResult(c,z),this.appendMessage(z)}}})})();(function(){g.core.expose({__name:"h5.ui.validation.Style",_setting:{},_styleAppliedElements:{},_updateOn:null,_setSetting:function(b){this._setting=b;null==b.updateOn?this._updateOn=["validate","change"]:(b=b.updateOn,F(b)?this._updateOn=b:this._updateOn=[b])},_shouldUpdateOn:function(c){return-1!==b.inArray(c,
this._updateOn)},_onValidate:function(b){if(this._shouldUpdateOn("validate"))for(var e=b.properties,f=0,g=e.length;f<g;f++){var n=e[f];this._setStyle(this.parentController._getElementByName(n),n,b)}},_onFocus:function(b,e,f){this._shouldUpdateOn("focus")&&this._setStyle(b,e,f)},_onBlur:function(b,e,f){this._shouldUpdateOn("blur")&&this._setStyle(b,e,f)},_onChange:function(b,e,f){this._shouldUpdateOn("change")&&this._setStyle(b,e,f)},_onKeyup:function(b,e,f){this._shouldUpdateOn("keyup")&&this._setStyle(b,
e,f)},reset:function(){for(var c in this._styleAppliedElements){var e=this._styleAppliedElements[c],f=b.extend({},this._setting,this._setting.property&&this._setting.property[c]);this._setValidateState(null,e,f,c)}},_setStyle:function(c,e,f){var g=b.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!g.off){var n=g.replaceElement;if(c=L(n)?n(c):n||c)-1!==b.inArray(e,f.validatingProperties)?(this._setValidateState("validating",c,g),f.addEventListener("validate",this.own(function(b){b.name===
e&&this._setValidateState(b.isValid?"success":"error",c,g,e)}))):this._setValidateState(-1===b.inArray(e,f.invalidProperties)?"success":"error",c,g,e)}},_setValidateState:function(c,e,f,g){var n=f.errorClassName,t=f.successClassName,u=f.validatingClassName;b(e).removeClass(n).removeClass(t).removeClass(u);null==c?this._styleAppliedElements[g]&&delete this._styleAppliedElements[g]:(c=f[c+"ClassName"],b(e).addClass(c),this._styleAppliedElements[g]=e)},_setDefaultMessage:function(b,e){}})})();(function(){g.core.expose({__name:"h5.ui.validation.Composition",
_messageOutputController:g.ui.validation.MessageOutputController,_updateOn:null,_lastValidationResult:null,_hideWhenEmpty:null,_hideWhenEmptyChanged:!1,_container:null,_setting:{},__construct:function(){this._hideWhenEmpty=!1},_setSetting:function(b){this._setting=b;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_shouldUpdateOn:function(c){return this._updateOn?-1!==b.inArray(c,this._updateOn)?!0:!1:!1},_update:function(b,e,f){!0!==this._setting.off&&(b=
f,this._showAllErrors&&(b=this.parentController.getLastValidationResult()),this._lastValidationResult=b,this._messageOutputController.clearMessage(),this._messageOutputController.appendMessageByValidationResult(b,null,this._showAllErrors),this._updateVisible())},_onChange:function(b,e,f){this._shouldUpdateOn("change")&&this._update(b,e,f)},_onBlur:function(b,e,f){this._shouldUpdateOn("blur")&&this._update(b,e,f)},_onFocus:function(b,e,f){this._shouldUpdateOn("focus")&&this._update(b,e,f)},_onKeyup:function(b,
e,f){this._shouldUpdateOn("keyup")&&this._update(b,e,f)},_updateVisible:function(){var c=b(this._container);this._hideWhenEmptyChanged&&(this._hideWhenEmptyChanged=!1,c.show());this._lastValidationResult&&0<this._lastValidationResult.invalidCount?(!0===this._hideWhenEmpty&&c.show(),c.addClass("h5-composition-has-error")):(!0===this._hideWhenEmpty&&c.hide(),c.removeClass("h5-composition-has-error"))},_onValidate:function(b){this._shouldUpdateOn("validate")&&this._update(null,null,b)},_onAsyncValidate:function(b,
e,f){this._update(null,null,f)},reset:function(){this._update(null,null,this.parentController.getLastValidationResult())},_setChildSetting:function(){var b=this._setting;if(null==b.updateOn)this._updateOn=["validate"];else{var e=b.updateOn;F(e)?this._updateOn=e:this._updateOn=[e]}this._showAllErrors=!1!==b.showAllErrors;this._container=b.container;this._messageOutputController.setContainer(b.container);this._messageOutputController.setWrapper(b.wrapper);this._hideWhenEmpty="hideWhenEmpty"in b&&!0===
b.hideWhenEmpty?!0:!1;this._hideWhenEmptyChanged=!0;this._updateVisible();"message"in b&&this._messageOutputController._setOutputDefaultMessage(b.message);"displayName"in b&&this._messageOutputController._setOutputDefaultDisplayName(b.displayName);var b=b.property,e={},f;for(f in b)e[f]={displayName:b[f].displayName,message:b[f].message};this._messageOutputController.addMessageSetting(e)},_setDefaultMessage:function(b,e){this._messageOutputController._setDefaultMessage(b,e)}})})();(function(){g.core.expose({__name:"h5.ui.validation.ErrorBalloon",
_messageOutputController:g.ui.validation.MessageOutputController,_setting:{},_balloonTargets:[],_nameToTargetMap:{},_updateOn:null,_setSetting:function(b){this._setting=b;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(b){},_onChange:function(b,e,f){this._shouldUpdateOn("change")&&this._setErrorBalloon(b,e,f,"change")},_onFocus:function(b,e,f){this._shouldUpdateOn("focus")&&this._setErrorBalloon(b,e,f,"focus")},_onBlur:function(b,e,
f){this._shouldUpdateOn("blur")&&this._setErrorBalloon(b,e,f,"blur")},_onKeyup:function(b,e,f){this._shouldUpdateOn("keyup")&&this._setErrorBalloon(b,e,f,"keyup")},reset:function(){for(var b=0,e=this._balloonTargets.length;b<e;b++)this._hideBalloon(this._balloonTargets[b]);this._balloonTargets=[];this._nameToTargetMap={}},_setErrorBalloon:function(c,e,f,n){var v=b.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!v.off){var t=null,u=null;if(this.parentController._isGroupName(e))var u=
b(this.parentController._getInputGroupElements()).filter('[data-h5-input-group-container\x3d"'+e+'"]'),w=u.has(document.activeElement),u=0<w.length?w[0]:u[0];w=v.replaceElement;L(w)?(c=w(c),t=g.u.obj.isJQueryObject(c)?c[0]:c):t=D(w)?document.querySelector(w):g.u.obj.isJQueryObject(w)?w[0]:null!=w?w:u?u:c;if(t){var z=this._nameToTargetMap[e]?this._nameToTargetMap[e]:t;if("blur"===n&&z!==document.activeElement&&0===b(document.activeElement).closest(z).length)this._hideBalloon(z,e);else{var p=v.placement||
"top",l=v.container||null;-1!==b.inArray(e,f.validatingProperties)?f.addEventListener("validate",this.own(function(b){t===document.activeElement&&(b.isValid?this._hideBalloon(z,e):this._showBalloon(t,p,l,this._messageOutputController.getMessageByValidationResult(f,b.name)))})):f.invalidReason&&f.invalidReason[e]?(this.parentController._isGroupName(e)&&(this._nameToTargetMap[e]=t),this._showBalloon(t,p,l,this._messageOutputController.getMessageByValidationResult(f,e),e)):this._hideBalloon(z,e)}}}},
_showBalloon:function(b,e,f,n,v){this._hideBalloon(b,v);if(this._balloonController)v=this._balloonController.create(n,{target:b,container:f}),v.show({target:b,direction:e}),this._currentBalloon=v,this._addBalloonTarget(b);else{var t=g.core.controller(this.rootElement,g.ui.components.BalloonController);this.manageChild(t);t.readyPromise.done(this.own(function(){this._balloonController=t;this._showBalloon(b,e,f,n)}))}},_hideBalloon:function(b,e){this._currentBalloon&&(this._currentBalloon.dispose(),
this._currentBalloon=null);this._removeBalloonTarget(b);null!=e&&this._nameToTargetMap[e]&&delete this._nameToTargetMap[e]},_setChildSetting:function(){var b=this._setting;if(null==b.updateOn)this._updateOn=["focus","blur"];else{var e=b.updateOn;F(e)?this._updateOn=e:this._updateOn=[e]}"message"in b&&this._messageOutputController._setOutputDefaultMessage(b.message);"displayName"in b&&this._messageOutputController._setOutputDefaultDisplayName(b.displayName);var b=b.property,e={},f;for(f in b)e[f]=
{displayName:b[f].displayName,message:b[f].message};this._messageOutputController.addMessageSetting(e)},_addBalloonTarget:function(c){-1<b.inArray(c,this._balloonTargets)||this._balloonTargets.push(c)},_removeBalloonTarget:function(c){c=b.inArray(c,this._balloonTargets);-1!==c&&this._balloonTargets.splice(c,1)},_setDefaultMessage:function(b,e){this._messageOutputController._setDefaultMessage(b,e)},_shouldUpdateOn:function(c){return this._updateOn?-1!==b.inArray(c,this._updateOn)?!0:!1:!1}})})();(function(){var c=
{__name:"h5.ui.validation.BootstrapErrorBalloon",_hideBalloon:function(c,f){b(c).tooltip("hide");this._removeBalloonTarget(c);null!=f&&this._nameToTargetMap[f]&&delete this._nameToTargetMap[f]},_showBalloon:function(c,f,g,n,t){b(c).removeAttr("title").attr({"data-placement":f,"data-container":g,"data-original-title":n,"data-animation":!1}).tooltip({trigger:"manual",html:!0}).tooltip("show");this._addBalloonTarget(c)}},c=b.extend({},g.ui.validation.ErrorBalloon,c);g.core.expose(c)})();(function(){g.core.expose({__name:"h5.ui.validation.Message",
_messageElementMap:{},_messageOutputController:g.ui.validation.MessageOutputController,_updateOn:null,_wrapper:null,_setSetting:function(b){this._setting=b;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(b){if(this._shouldUpdateOn("validate"))for(var e=b.properties,f=0,g=e.length;f<g;f++){var n=e[f];this._setMessage(this.parentController._getElementByName(n),n,b,"validate")}},_onFocus:function(b,e,f){this._shouldUpdateOn("focus")&&this._setMessage(b,
e,f,"focus")},_onBlur:function(b,e,f){this._shouldUpdateOn("blur")&&this._setMessage(b,e,f,"blur")},_onChange:function(b,e,f){this._shouldUpdateOn("change")&&this._setMessage(b,e,f,"change")},_onKeyup:function(b,e,f){this._shouldUpdateOn("keyup")&&this._setMessage(b,e,f,"keyup")},reset:function(){for(var b in this._messageElementMap)this._removeMessage(b)},_setMessage:function(c,e,f,n){var v=b.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!v.off)if("blur"===n)this._removeMessage(e);
else if(-1!==b.inArray(e,f.validatingProperties))this._removeMessage(e),f.addEventListener("validate",this.own(function(b){b.name!==e||b.isValid||"focus"===n&&document.activeElement!==c||this._setMessage(c,e,f,n)}));else if(this._removeMessage(e),-1!==b.inArray(e,f.invalidProperties)){var t=v.appendMessage,v=v.replaceElement,v=L(v)?v(c):v||c,u=this._messageOutputController.getMessageByValidationResult(f,e),w;w=null!=this._wrapper?g.u.str.startsWith(b.trim(this._wrapper),"\x3c")?b(this._wrapper):b(document.createElement(this._wrapper)):
b('\x3cspan class\x3d"h5-message"\x3e\x3c/span\x3e');w.html(u);this._messageElementMap[e]=w;t?t(w[0],v,e):v&&b(v).after(w)}},_removeMessage:function(b){var e=this._messageElementMap[b];e&&(e.remove(),delete this._messageElementMap[b])},_setChildSetting:function(){var b=this._setting;if(null==b.updateOn)this._updateOn=["change","validate"];else{var e=b.updateOn;F(e)?this._updateOn=e:this._updateOn=[e]}"wrapper"in b&&(this._wrapper=b.wrapper);"message"in b&&this._messageOutputController._setOutputDefaultMessage(b.message);
"displayName"in b&&this._messageOutputController._setOutputDefaultDisplayName(b.displayName);var b=b.property,e={},f;for(f in b)e[f]={displayName:b[f].displayName,message:b[f].message};this._messageOutputController.addMessageSetting(e)},_setDefaultMessage:function(b,e){this._messageOutputController._setDefaultMessage(b,e)},_shouldUpdateOn:function(c){return-1!==b.inArray(c,this._updateOn)}})})();(function(){g.core.expose({__name:"h5.ui.validation.AsyncIndicator",_indicators:{},_updateOn:null,_setSetting:function(b){this._setting=
b;null==b.updateOn?this._updateOn=["validate","change"]:(b=b.updateOn,F(b)?this._updateOn=b:this._updateOn=[b])},_shouldUpdateOn:function(c){return-1!==b.inArray(c,this._updateOn)},_onValidate:function(c){if(this._shouldUpdateOn("validate"))for(var e=c.validatingProperties,f=c.properties,g=0,n=f.length;g<n;g++){var t=f[g];if(-1!==b.inArray(t,e)){var u=this.parentController._getElementByName(t);this._showIndicator(u,t,c)}else this._hideIndicator(t)}},_onFocus:function(c,e,f){this._shouldUpdateOn("focus")&&
(-1!==b.inArray(e,f.validatingProperties)?(c=this.parentController._getElementByName(e),this._showIndicator(c,e,f)):this._hideIndicator(e))},_onBlur:function(c,e,f){this._shouldUpdateOn("blur")&&-1!==b.inArray(e,f.validatingProperties)&&this._showIndicator(c,e,f)},_onChange:function(c,e,f){this._shouldUpdateOn("change")&&-1!==b.inArray(e,f.validatingProperties)&&this._showIndicator(c,e,f)},_onKeyup:function(c,e,f){this._shouldUpdateOn("keyup")&&-1!==b.inArray(e,f.validatingProperties)&&this._showIndicator(c,
e,f)},reset:function(){for(var b in this._indicators)this._hideIndicator(b)},_showIndicator:function(c,e,f){var n=b.extend({},this._setting,this._setting.property&&this._setting.property[e]);!n.off&&(n=n.replaceElement,c=L(n)?n(c):n||c)&&(this._indicators[e]=this._indicators[e]||g.ui.indicator({target:c,block:!1}),this._indicators[e].show(),f.addEventListener("validate",this.own(function(b){e===b.name&&this._hideIndicator(b.name)})),f.addEventListener("abort",this.own(function(b){this._hideIndicator(e)})))},
_hideIndicator:function(b){this._indicators[b]&&(this._indicators[b].hide(),delete this._indicators[b])},_setDefaultMessage:function(b,e){}})})();(function(){function c(a,c){return-1===b.inArray(a,c)?(c.push(a),!0):!1}var e=V.validation.ValidationResult,f={style:g.ui.validation.Style,composition:g.ui.validation.Composition,balloon:g.ui.validation.ErrorBalloon,bsBalloon:g.ui.validation.BootstrapErrorBalloon,message:g.ui.validation.Message,asyncIndicator:g.ui.validation.AsyncIndicator},n=function(a){if(null!=
b(a).data("required"))return!0},v=function(a){if(null!=b(a).data("assertFalse"))return!0},t=function(a){if(null!=b(a).data("assertTrue"))return!0},u=function(a){if(null!=b(a).data("nul"))return!0},w=function(a){if(null!=b(a).data("notNull"))return!0},z=function(a){a=b(a).data("max");if(null!=a)return"number"===typeof a?a:F(a)?[parseFloat(a[0]),"true"===b.trim(a[1])]:parseFloat(a)},p=function(a){a=b(a).data("min");if(null!=a)return"number"===typeof a?a:F(a)?[parseFloat(a[0]),"true"===b.trim(a[1])]:
parseFloat(a)},l=function(a){a=b(a).data("future");if(null!=a)return new Date(a)},D=function(a){a=b(a).data("past");if(null!=a)return new Date(a)},H=function(a){a=b(a).data("pattern");if(null!=a)return new RegExp(a)},h=function(a){a=b(a).data("size");if(null!=a){if(F(a)){for(var c=0,e=a.length;c<e;c++)a[c]=parseInt(a[c]);return a}return parseInt(a)}};g.core.expose({__name:"h5.ui.FormController",_config:{},_bindedForm:null,_ruleCreators:[],_plugins:[],_validationLogic:g.validation.FormValidationLogic,
_waitingValidationResultMap:{},_waitingAllValidationResult:null,_setting:{},_pluginSetting:{},setSetting:function(a){this._setting=a;"customRule"in a&&this._addCustomRule(a.customRule);"isAllRulesEnabledWhenEmpty"in a&&this._validationLogic.setAllRulesEnabledWhenEmpty(!0===a.isAllRulesEnabledWhenEmpty);if("ruleDefault"in a)for(var b in a.ruleDefault){var c=a.ruleDefault[b];"isForceEnabledWhenEmpty"in c&&this._validationLogic.setRuleForceEnabledWhenEmpty(b,!0===c.isForceEnabledWhenEmpty);"message"in
c&&this.setDefaultMessage(b,c.message);"validateOn"in c&&this._validationLogic._setRuleValidateTiming(b,c.validateOn);"resolveOn"in c&&this._validationLogic._setRuleResolveTiming(b,c.resolveOn)}if("customRule"in a)for(b in a.customRule)c=a.customRule[b],"message"in c&&this.setDefaultMessage(b,c.message);a=this._plugins;for(var e in a)b=a[e],b._setSetting&&b._setSetting(this._margePluginSettings(e)),this._setDefaultMessages(b);this.isInit&&this._updateRuleByElement()},_addCustomRule:function(a){for(var b in a){var c=
a[b];if(!("message"in c))throw Error("カスタムバリデータの定義にはmessageの指定が必須です。定義しようとしたルール\x3d"+b);g.validation.defineRule(b,c.func,null,40,!1,c.validateOn,c.resolveOn);"isForceEnabledWhenEmpty"in c&&this._validationLogic.setRuleForceEnabledWhenEmpty(b,c.isForceEnabledWhenEmpty)}},_margePluginSettings:function(a){this._pluginSetting;var c=this._setting,e=c.output,c=c.property,e=b.extend({},e&&e[a]);e.property={};for(var f in c){var h=b.extend({},c[f]);b.extend(h,h[a]);var l=g.u.obj.getByPath("output."+a,h);
delete h.output;e.property[f]=b.extend({},h,l)}return e},__construct:function(){this._addRuleCreator("required",n);this._addRuleCreator("assertFalse",v);this._addRuleCreator("assertTrue",t);this._addRuleCreator("nul",u);this._addRuleCreator("notNull",w);this._addRuleCreator("max",z);this._addRuleCreator("min",p);this._addRuleCreator("future",l);this._addRuleCreator("past",D);this._addRuleCreator("pattern",H);this._addRuleCreator("size",h);this._lastResult=this._createEmptyValidationResult();var a=
this;this._asyncValidateResultListenerWrapper=function(b){switch(b.type){case "validate":a._asyncValidateListener(b);break;case "abort":a._asyncAbortListener(b);break;case "validateComplete":a._asyncValidateCompleteListener(b)}}},_asyncValidateResultListenerWrapper:null,__init:function(){"FORM"===this.rootElement.tagName.toUpperCase()&&(this._bindedForm=this.rootElement,b(this._bindedForm).prop("novalidate",!0));this._updateRuleByElement();if(this._bindedForm)this.on(this._bindedForm,"submit",this._submitHandler)},
_updateRuleByElement:function(){var a={};b(this._getElements()).each(this.ownWithOrg(function(b){var c=b.getAttribute("name");if(null!=c){var e={};a[c]=e;for(var c=0,f=this._ruleCreators.length;c<f;c++){var g=this._ruleCreators[c].key,h=this._ruleCreators[c].func,h=h(b);void 0!==h&&(e[g]=h)}b=b.attributes;c=0;for(f=b.length;c<f;c++)g=b[c].name,this._startsWith(g,"data-h5-v-")&&(g=g.substr(10),e[g]=!0)}}));this.addRule(a)},_startsWith:function(a,b){return a.substr(0,b.length)===b},addOutput:function(a){if(this.isInit){a=
b.isArray(a)?a:[a];for(var c=0,e=a.length;c<e;c++){var g=a[c],h=f[g];h?this._addOutputPlugin(g,h):this.log.warn('プラグイン"{0}"は存在しません',g)}}else this.initPromise.done(this.own(function(){this.addOutput(a)}))},addRule:function(a){a&&this._validationLogic.addRule(a)},removeRule:function(a){this._validationLogic.removeRule(a);this.validate(a)},enableRule:function(a){this._validationLogic.enableRule(a)},disableRule:function(a){this._validationLogic.disableRule(a)},getValue:function(a){a=a&&(F(a)?a:[a]);var c=
b(this._getElements()),e=b(this._getInputGroupElements()),f=this._setting&&this._setting.property||{},g={},h=[],m=this.rootElement;c.each(function(){var c=this.name;h.push(c);var d=g,l=null;e.find(this).length&&(l=b(this).closest("[data-h5-input-group-container]").data("h5-input-group-container"));if(l){h.push(l);if(a&&-1===b.inArray(c,a)&&-1===b.inArray(l,a))return;g[l]=g[l]||{};d=g[l]}else if(a&&-1===b.inArray(c,a))return;if("file"===this.type){var l=this.files,n=l.length;if(n){d[c]=d[c]||[];for(var p=
0;p<n;p++)d[c].push(l[p])}}else"radio"===this.type&&!1===this.checked||!c||(n=(l=f[c]&&f[c].valueFunc)?l(m,c):b(this).val(),l&&void 0===n||("checkbox"===this.type&&!1===this.checked&&(n=null),f[c]&&f[c].isArray&&(n=P(n)),void 0!==d[c]?(b.isArray(d[c])||(d[c]=[d[c]]),b.isArray(n)?Array.prototype.push.apply(d[c],n):d[c].push(n)):d[c]=n))});for(var l in f)a&&-1===b.inArray(l,a)||-1!==b.inArray(l,h)||(c=(c=f[l]&&f[l].valueFunc)&&c(m,l),void 0!==c&&(g[l]=c));return g},setValue:function(a){var c=b(this._getElements()),
e={},f={},g;for(g in a)if(b.isPlainObject(a[g]))for(var h in a[g])f[h]=a[g][h];else f[g]=a[g];a=f;c.each(function(){var c=this.name;if(c){var d=a[c];if("radio"===this.type||"checkbox"===this.type)b.isArray(d)&&(e[c]=e[c]?e[c]+1:0,d=d[e[c]]),b(this).prop("checked",d);else if(b(this).is("select[multiple]")){if(b(this).val([]),b.isArray(d)&&(e[c]=e[c]||0,d=d.slice(e[c])),null!=d)for(var f=[],g=0,h=d.length;g<h;g++){f.push(d[g]);b(this).val(f);e[c]++;var l=b(this).val(),l=b.isArray(l)?l:[l];if(l.length<
f.length){e[c]--;break}}}else b.isArray(d)&&(e[c]=e[c]||0,d=d[e[c]++]),b(this).val(d)}})},clearValue:function(){b(this._getElements()).each(function(){"radio"===this.type||"checkbox"===this.type?b(this).prop("checked",!1):b(this).val(null)})},resetValue:function(){this._bindedForm&&this._bindedForm.reset()},resetValidation:function(){this._lastResult=this._createEmptyValidationResult();this._waitingValidationResultMap={};var a=this._plugins,b;for(b in a)this._resetPlugin(b,a[b]);this._fireValidationUpdateEvent("reset")},
validate:function(a){a=this._validate(a,"validate");this._callPluginValidateEvent("_onValidate",a);this._fireValidationUpdateEvent("validate");return a},getOutput:function(a){return this._plugins[a]},setPreValidationHook:function(a){this._validationLogic.setPreValidationHook(a)},"{document} focusin":function(a){this._pluginElementEventHandler(a,"_onFocus")},"{document} focusout":function(a){this._pluginElementEventHandler(a,"_onBlur")},"{document} keyup":function(a){this._pluginElementEventHandler(a,
"_onKeyup")},"{document} change":function(a){this._pluginElementEventHandler(a,"_onChange")},_getElementByName:function(a){var c=this._setting.property&&this._setting.property[a]&&this._setting.property[a].srcElement;return c||(c=b(this._getElements()).filter('[name\x3d"'+a+'"]')[0])?c:(a=b(this._getInputGroupElements()).filter('[data-h5-input-group-container\x3d"'+a+'"]')[0])?a:null},_getElements:function(){var a=this.$find("input,select,textarea").not('[type\x3d"submit"],[type\x3d"reset"],[type\x3d"image"]');
if(!this._bindedForm)return a;var c=b(this._bindedForm).attr("id");return b("input,select,textarea").not('[type\x3d"submit"],[type\x3d"reset"],[type\x3d"image"]').filter(function(){var e=b(this),f=e.attr("form");return f&&f===c||!f&&-1!==a.index(e)}).toArray()},_getInputGroupElements:function(){var a=b("[data-h5-input-group-container]");return this.$find("[data-h5-input-group-container]").filter(function(){var c=b(this),e=c.attr("form");return e&&e===formId||!e&&-1!==a.index(c)}).toArray()},_isGroupName:function(a){if(null==
a||""==a)return!1;for(var c=this._getInputGroupElements(),e=0,f=c.length;e<f;e++){var g=b(c[e]).data("h5-input-group-container");if(a===g)return!0}return!1},_addRuleCreator:function(a,b){this._ruleCreators.push({key:a,func:b})},_resetPlugin:function(a,b){b.reset&&b.reset.call(b)},_addOutputPlugin:function(a,b){if(this._plugins[a])this.log.warn('プラグイン"{0}"は登録済みです。',a);else{var c=g.core.controller(this._bindedForm||this.rootElement,b);c._setSetting&&c._setSetting(this._margePluginSettings(a));this.manageChild(c);
this._setDefaultMessages(c);this._plugins[a]=c}},_ruleDefaultMessageMap:{},_setDefaultMessages:function(a){for(var b in this._ruleDefaultMessageMap)a._setDefaultMessage(b,this._ruleDefaultMessageMap[b])},setDefaultMessage:function(a,b){this._ruleDefaultMessageMap[a]=b},_lastResult:null,_validate:function(a,b){var c=this.getValue(a),c=this._validationLogic.validate(c,a,b,this._lastResult);this._lastResult._merge(c);if(c.isAsync){for(var e=c.validatingProperties,f=0,g=e.length;f<g;f++)this._waitingValidationResultMap[e[f]]=
c;c.addEventListener("validate",this._asyncValidateResultListenerWrapper);c.addEventListener("validateComplete",this._asyncValidateResultListenerWrapper);c.addEventListener("abort",this._asyncValidateResultListenerWrapper)}return c},getLastValidationResult:function(){return this._lastResult},_asyncValidateListener:function(a){var b=a.target,c=a.name;this._waitingValidationResultMap[c]===b&&(this._updateByAsyncResult(a),this._callPluginForAsyncValidation(c,b),delete this._waitingValidationResultMap[c],
this._fireValidationUpdateEvent("asyncResult"))},_updateByAsyncResult:function(a){var d=a.name,e=a.violation,f=this._lastResult;if(e){f.isValid=!1;c(d,f.invalidProperties)&&f.invalidCount++;f.invalidReason[d]||(f.invalidReason[d]={name:d,value:a.value,violation:[]});a=0;for(var g=f.invalidReason[d].violation.length;a<g;a++)if(e.ruleName===f.invalidReason[d].violation[a].ruleName){f.invalidReason[d].violation[a]=e;return}f.invalidReason[d].violation.push(e);f.violationCount++}else c(d,f.validProperties),
f.validCount++;f.validatingProperties.splice(b.inArray(d,f.validatingProperties),1);f.isValid&&f.validatingProperties.length||(f.isAllValid=f.isValid)},_asyncAbortListener:function(a){a=a.target;for(var b in this._waitingValidationResultMap)this._waitingValidationResultMap[b]===a&&delete this._waitingValidationResultMap[b];this._removeAllValidationResultListenerWrapper(a)},_asyncValidateCompleteListener:function(a){this._removeAllValidationResultListenerWrapper(a.target)},_removeAllValidationResultListenerWrapper:function(a){a.removeEventListener("validate",
this._asyncValidateResultListenerWrapper);a.removeEventListener("validateComplete",this._asyncValidateResultListenerWrapper);a.removeEventListener("abort",this._asyncValidateResultListenerWrapper)},_pluginElementEventHandler:function(a,c){var e=a.event.target;if(this._isFormControls(e)){var f=e.name;if(f){var g;b(this._getInputGroupElements()).find(e).length&&(g=b(e).closest("[data-h5-input-group-container]").data("h5-input-group-container"));var h;switch(c){case "_onValidate":h="validate";break;
case "_onFocus":h="focus";break;case "_onBlur":h="blur";break;case "_onChange":h="change";break;case "_onKeyup":h="keyup";break;default:h="validate"}var l=this._validate(g||f,h);this._callPluginElementEvent(c,e,f,l);g&&(e=this._getElementByName(g),this._callPluginElementEvent(c,e,g,l));this._fireValidationUpdateEvent(h)}}},_fireValidationUpdateEvent:function(a){this.trigger("validationUpdate",{timing:a})},_callPluginValidateEvent:function(a,b){var c=this._plugins,e;for(e in c){var f=c[e];f[a]&&f[a].call(f,
b)}},_callPluginElementEvent:function(a,b,c,e){var f=this._plugins,g;for(g in f){var h=f[g];if(h[a])h[a](b,c,e)}},_callPluginForAsyncValidation:function(a,b){var c=this._getElementByName(a),e=this._plugins,f;for(f in e){var g=e[f];g._onAsyncValidate&&g._onAsyncValidate(c,a,b)}},_submitHandler:function(a,b){a.event.preventDefault();var c=this.validate();c.isAsync?c.addEventListener("validateComplete",function(){this.isAllValid&&b[0].submit()}):c.isAllValid&&b[0].submit()},_isFormControls:function(a){return-1!==
b(this._getElements()).index(a)},_createEmptyValidationResult:function(){return new e({validProperties:[],invalidProperties:[],validatingProperties:[],properties:[],invalidReason:{},isAsync:!1,isValid:!0,isAllValid:!0,violationCount:0,validPropertyToRulesMap:{},nameToRuleSetMap:{},disabledProperties:[]})}})})();(function(){function c(){q||(q=navigator.geolocation);return q}function e(b,c){this.oblateness=b;this.semiMajorAxis=c}function f(){}var q=null,v=g.env.ua;e.prototype.getOblateness=function(){return this.oblateness};
e.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var t=new e(298.257222,6378137),u=new e(299.152813,6377397.155),w=Math.PI/180;b.extend(f.prototype,{isSupported:v.isIE&&9<=v.browserVersion?!0:!!c(),getCurrentPosition:function(b){var e=g.async.deferred();c().getCurrentPosition(function(b){e.resolve(b)},function(b){e.reject(ja(2002,null,b))},b);return e.promise()},watchPosition:function(b){function e(){}var f=g.async.deferred(),n=c().watchPosition(function(b){f.notify(b)},function(b){c().clearWatch(n);
f.reject(ja(2002,null,b))},b);e.prototype.unwatch=function(){c().clearWatch(n);f.resolve()};return f.promise(new e)},getDistance:function(b,c,f,g,q){isFinite(b)&&isFinite(c)&&isFinite(f)&&isFinite(g)||n(2E3);var h=q?q:t;h instanceof e||n(2001);q=h.getSemiMajorAxis();h=h.getOblateness();b*=w;f*=w;var a=(b+f)/2,h=Math.pow(Math.sqrt(2*h-1)/h,2),d=Math.sqrt(1-h*Math.pow(Math.sin(a),2));return Math.sqrt(Math.pow(q*(1-h)/Math.pow(d,3)*(b-f),2)+Math.pow(q/d*Math.cos(a)*(c*w-g*w),2))},GS_GRS80:t,GS_BESSEL:u});
g.u.obj.expose("h5.api",{geo:new f})})();(function(){function c(b){if(b){var a=b.deferred;(va(a)||Aa(a)||!b.result)&&n(3E3)}}function e(c,a,d){if(b.isPlainObject(c))for(var e in c){var f=b.trim(e).replace(/ +/g," ").split(" "),g=[];""===f[0]?n(3011):1===f.length?(g.push(f[0]),g.push("\x3d"),g.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(f[1])?3===f.length&&/^like$/i.test(f[1])?(g.push(f[0]),g.push(f[1]),g.push("?"),g.push("ESCAPE"),g.push('"'+f[2]+'"')):(g.push(f[0]),g.push(f[1]),g.push("?")):n(3003);
a.push(g.join(" "));d.push(c[e])}}function f(){}function q(){this._multiple=!1}function v(b){this._db=b;this._df=J();this._tx=null;this._tasks=[];this._queue=[]}function t(b,a,c){this._statements=[];this._parameters=[];this._executor=b;this._tableName=a;this._columns=F(c)?c.join(", "):"*";this._orderBy=this._where=null}function u(b,a,c){this._statements=[];this._parameters=[];this._executor=b;this._tableName=a;this._values=c?P(c):[];this._df=J();this._multiple=!0}function w(b,a,c){this._statements=
[];this._parameters=[];this._executor=b;this._tableName=a;this._values=c;this._where=null}function z(b,a){this._statements=[];this._parameters=[];this._executor=b;this._tableName=a;this._where=null}function p(b,a,c){this._statements=[];this._parameters=[];this._executor=b;this._statements.push(a);this._parameters.push(c||[])}function l(b){this._db=b}var J=g.async.deferred,H=g.u.str.format;b.extend(q.prototype,{execute:function(){return this._executor.add(this)._execute(function(b){return b[0]})}});
b.extend(v.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(b){this._tasks.push({deferred:b,result:null})},_setResult:function(b){this._getRecentTask().result=b},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(b){b instanceof q||n(3009);var a=this._getRecentTask();a&&!a.result||this._queue.push(b);return this},_execute:function(b){function a(){if(0===f.length){var c=b(g);d._setResult.apply(d,[c]);e.notify(c,d)}else{for(var l=f.shift(),
m=l._statements,n=l._parameters,p=J().resolve().promise(),c=[],q=0,t=m.length;q<t;q++)(function(b,a){p=pa(p,function(){var e=J();d._tx.executeSql(b,a,function(b,a){c.push(l._onComplete(a));e.resolve()});return e.promise()})})(m[q],n[q]);pa(p,function(){g.push(l._multiple?c:c[0]);a()})}}var d=this,e=this._df,f=this._queue,g=[];try{c(this._getRecentTask());this._addTask(e);for(var l=0,m=f.length;l<m;l++)f[l]._buildStatementAndParameters();this._runTransaction()?a():this._db.transaction(function(b){d._tx=
b;a()},function(b){d._tx=null;for(var a=d._tasks,c=a.length-1;0<=c;c--)a[c].deferred.reject(ja(3010,["SQLDB ERROR(code\x3d"+b.code+")",b.message],b))},function(){d._tx=null;for(var b=d._tasks,a=b.length-1;0<=a;a--){var c=b[a];c.deferred.resolve(c.result)}})}catch(n){e.reject(n)}this._df=J();return e.promise()},execute:function(){return this._execute(function(b){return b})},promise:function(){return this._df.promise()}});t.prototype=new q;b.extend(t.prototype,{where:function(c){b.isPlainObject(c)||
D(c)||n(3004,["Select","where"]);this._where=c;return this},orderBy:function(c){b.isPlainObject(c)||D(c)||n(3004,["Select","orderBy"]);this._orderBy=P(c);return this},_buildStatementAndParameters:function(){var c,a=this._where;c=H("SELECT {0} FROM {1}",this._columns,this._tableName);if(b.isPlainObject(a)){var d=[];e(a,d,this._parameters);c+=" WHERE "+d.join(" AND ")}else D(a)&&(c+=" WHERE "+a);F(this._orderBy)&&(c+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([c]);this._parameters=
[this._parameters]},_onComplete:function(b){return b.rows}});u.prototype=new q;b.extend(u.prototype,{_buildStatementAndParameters:function(){var c=this._values,a=this._statements,d=this._parameters;if(0===c.length)a.push(H("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else for(var e=0,f=c.length;e<f;e++){var g=c[e];if(null==g)a.push(H("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else if(b.isPlainObject(g)){var l=[],m=[],n=[],p;for(p in g)l.push("?"),m.push(p),n.push(g[p]);
a.push(H("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,m.join(", "),l.join(", ")));d.push(n)}}},_onComplete:function(b){return b.insertId}});w.prototype=new q;b.extend(w.prototype,{where:function(c){b.isPlainObject(c)||D(c)||n(3004,["Update","where"]);this._where=c;return this},_buildStatementAndParameters:function(){var c,a=this._where;c=this._values;var d=[],f;for(f in c)d.push(f+" \x3d ?"),this._parameters.push(c[f]);c=H("UPDATE {0} SET {1}",this._tableName,d.join(", "));b.isPlainObject(a)?
(d=[],e(a,d,this._parameters),c+=" WHERE "+d.join(" AND ")):D(a)&&(c+=" WHERE "+a);this._statements.push([c]);this._parameters=[this._parameters]},_onComplete:function(b){return b.rowsAffected}});z.prototype=new q;b.extend(z.prototype,{where:function(c){b.isPlainObject(c)||D(c)||n(3004,["Del","where"]);this._where=c;return this},_buildStatementAndParameters:function(){var c,a=this._where;c=H("DELETE FROM {0}",this._tableName);if(b.isPlainObject(a)){var d=[];e(a,d,this._parameters);c+=" WHERE "+d.join(" AND ")}else D(a)&&
(c+=" WHERE "+a);this._statements.push([c]);this._parameters=[this._parameters]},_onComplete:function(b){return b.rowsAffected}});p.prototype=new q;b.extend(p.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(b){return b}});b.extend(l.prototype,{select:function(b,a,c){D(b)||n(3001,"select");F(a)||"*"===a||n(3005,"select");return new t(this.transaction(c),b,a)},insert:function(c,a,d){D(c)||n(3001,"insert");null==a||F(a)||b.isPlainObject(a)||n(3006,"insert");return new u(this.transaction(d),
c,a)},update:function(c,a,d){D(c)||n(3001,"update");b.isPlainObject(a)||n(3006,"update");return new w(this.transaction(d),c,a)},del:function(b,a){D(b)||n(3001,"del");return new z(this.transaction(a),b)},sql:function(b,a,c){D(b)||n(3007,"sql");null==a||F(a)||n(3008,"sql");return new p(this.transaction(c),b,a)},transaction:function(b){void 0==b||b instanceof v||n(3002,"transaction");return b?b:new v(this._db)}});b.extend(f.prototype,{isSupported:!!window.openDatabase,open:function(b,a,c,e){if(this.isSupported)return b=
openDatabase(b,a,c,e),new l(b)}});g.u.obj.expose("h5.api",{sqldb:new f})})();(function(){function c(b){this._storage=b}b.extend(c.prototype,{getLength:function(){return this._storage.length},key:function(b){return this._storage.key(b)},getItem:function(b){b=this._storage.getItem(b);return null===b?null:g.u.obj.deserialize(b)},setItem:function(b,c){this._storage.setItem(b,g.u.obj.serialize(c))},removeItem:function(b){this._storage.removeItem(b)},clear:function(){this._storage.clear()},each:function(b){for(var c=
this._storage,g=0,n=c.length;g<n;g++){var t=c.key(g);b(g,t,this.getItem(t))}}});g.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__","ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(b){return!1}}():!1,local:new c(window.localStorage),session:new c(window.sessionStorage)})})();(function(){function c(b){b=g.core.controllerManager.getControllers(b,{deep:!0});for(var a=0,c=b.length;a<c;a++)na(b[a])||
b[a].dispose()}function e(a,c){var d=b(a).filter(c),e=b(a).find(c);if(0===d.length)return e;if(0===e.length)return d;d=b.makeArray(d);e=b.makeArray(e);return b(d.concat(e))}function f(a){a=b(a).closest("[data-h5-default-scene],[data-h5-scene]");return a.length?a.get(0):null}function q(a){a=b(a).closest("[data-h5-main-scene-container],[data-h5-scene-container]");return a.length?a.get(0):null}function v(b,a){if(b===a)return!0;var c=q(b),d=a?q(a):null;return c!==d?!1:f(b)===a}function t(a,c,d){var h=
a?a:document.body;a=b(h);if(0!==a.length){1!==a.length&&n(1E5);if(!ta){var k=e(h,"[data-h5-main-scene-container]");0===k.length&&(k=e(h,"main"),0===k.length&&h===document.body&&(k=b(h)),0<k.length&&k.eq(0).attr("data-h5-main-scene-container","data-h5-main-scene-container"))}if(a.is("[data-h5-scene-container]"))ea(h);else if(a.is("[data-h5-main-scene-container]"))ea(h,!0);else{var l=b(h).is("[data-h5-default-scene],[data-h5-scene]")&&!u(h),m=l?g.async.deferred():null,q=b(h).is("[data-h5-default-scene],[data-h5-scene]")?
h:f(h),r=!1;e(h,"[data-h5-controller]").each(function(){for(var a=this.getAttribute("data-h5-controller").split(","),e=0,f=a.length;e<f;e++){var g=b.trim(a[e]);if(""===g||c&&g!==c)return!0;if(!u(this,g)){if(!v(this,q))return!0;var k=!1;l&&!r&&this===h&&(k=r=!0);w(this,g);g=p(g,this,k?d:null);k&&g.done(function(b){m.resolve(b)})}}});a.find("[data-h5-main-scene-container],[data-h5-scene-container]").each(function(){if(v(this,q))return!0;var a=b(this);a.is("[data-h5-main-scene-container]")?ea(this,!0):
a.is("[data-h5-scene-container]")&&ea(this)});if(l)return m.promise()}}}function u(a,c){var d=b(a).attr("data-h5-dyn-controller-bound");if(!d)return!1;d=d.split(",");if(!c&&0<d.length)return!0;for(var e=0;e<d.length;e++)if(b.trim(d[e])===c)return!0;return!1}function w(a,c){var d=b(a).attr("data-h5-dyn-controller-bound")||"";d&&(d+=",");d+=c;b(a).attr("data-h5-dyn-controller-bound",d)}function z(a,c,d){var e=a?a:document.body,f=g.async.deferred();a=!1;var h=null,k=b(e).find("\x3e[data-h5-default-scene]");
0<k.length&&(h=k.eq(0),u(h)||(a=!0,h.is("[data-h5-controller]")||(w(h,ga.__name),h=g.core.controller(h,ga,d),f.resolve(h))));a||(e=b(e).children().eq(0).filter("[data-h5-scene]"),0<e.length&&!u(e)&&(a=!0,e.attr("data-h5-default-scene","data-h5-default-scene"),k=e,e.is("[data-h5-controller]")||(w(e,ga.__name),h=g.core.controller(e,ga,d),f.resolve(h))));a||n(100001);c=t(k.get(0),c,d);Aa(f)||c.done(function(b){f.resolve(b)});return f.promise()}function p(b,a,c){var d=g.async.deferred();g.res.get(b).then(function(b){b=
g.core.controller(a,b,c);d.resolve(b)});return d.promise()}function l(b,a){this.type=b;this.data=a}function F(a,c){this.type=a;this._targetWindow=c;this._closed=!1;this._subscribers=[];var d=this;this._recv=function(b){d._receiveMessage(b.originalEvent)};b(window).on("message",this._recv)}function H(b,a){var c=qa[b];c||(c=new F(b,a),qa[b]=c);return c}function h(){this._recvChannel=new F("__h5__RMI",window.opener);this._recvChannel.subscribe(this._receive,this);this._sendChannel=new F("__h5__RMI_Result",
window.opener)}function a(b){this.targetWindow=b;this.id="FIXME";this._invocationMap={};this._invocationSeq=g.core.data.createSequence(1,1,g.core.data.SEQ_INT);this._sendChannel=H("__h5__RMI",b);this._recvChannel=H("__h5__RMI_Result",b);this._recvChannel.subscribe(this._receive,this)}function d(b){b=b||{};var a;if(d._instance)a=d._instance;else{a=d._instance=this;var c=!!window.history.pushState;a.urlHistoryMode=b.urlHistoryMode||W.HISTORY;switch(a.urlHistoryMode){case W.HASH:a.urlHistoryActualMode=
O.HASH;break;case W.NONE:a.urlHistoryActualMode=O.NONE;break;case W.FULLRELOAD:a.urlHistoryActualMode=O.FULLRELOAD;break;case W.HISTORY:case W.HISTORY_OR_HASH:case W.HISTORY_OR_ERROR:case W.HISTORY_OR_NONE:case W.HISTORY_OR_FULLRELOAD:c&&(a.urlHistoryActualMode=O.HISTORY)}if(!a.urlHistoryActualMode&&!c)switch(a.urlHistoryMode){case W.HISTORY_OR_ERROR:n(100011);return;case W.HISTORY:case W.HISTORY_OR_HASH:a.urlHistoryActualMode=O.HASH;break;case W.HISTORY_OR_NONE:a.urlHistoryActualMode=O.NONE;break;
case W.HISTORY_OR_FULLRELOAD:a.urlHistoryActualMode=O.FULLRELOAD}a.urlHistoryActualMode||n(100012,a.urlHistoryMode);b.baseUrl&&(c=new k(b.baseUrl),a._baseUrl=c.pathname.replace(/^\/?(.*?)\/?$/,"/$1/"));a._urlMaxLength=b.urlMaxLength||URL_MAX_LENGTH;var e=a._onChange;a._onChange=function(){return e.apply(a,arguments)}}b.routes&&(a._routes=a._routes.concat(b.routes));return a}function k(b){null!=b&&(b=b.match(k.regExp),this.href=b[0]||"",this.protocol=b[1]||"",this.host=b[2]||"",this.hostname=b[3]||
"",this.port=b[4]||"",this.pathname=b[5]||"",this.dir=b[6]||"",this.file=b[7]||"",this.search=b[8]||"",this.hash=b[9]||"")}function y(b){this.__controller=b}function M(){}function S(a){a=b(a);if(!1===a.children().eq(0).is("[data-h5-default-scene],[data-h5-scene]")){a.wrapInner(b("\x3cdiv data-h5-default-scene\x3e\x3c/div\x3e"));var c=a.attr("data-h5-controller");c&&a.removeAttr("data-h5-controller").children().attr("data-h5-controller",c)}}function m(a,c,d){var f=g.async.deferred();g.ajax({url:a,
dataType:"html",method:c||"get",data:d}).done(function(a){var c=a.replace(ra,"").match(oa);a=c?"\x3cdiv data-h5-dyn-dummy-body "+c[1]+"\x3e"+c[2]+"\x3c/div\x3e":a;va.test(a)&&(a="\x3cdiv data-h5-scene-container\x3e"+a+"\x3c/div\x3e");a=b(a);c=e(a,"[data-h5-main-scene-container]");0===c.length&&(c=e(a,"main"));0<c.length&&(a=c.eq(0),a.attr("data-h5-main-scene-container","data-h5-main-scene-container"));if(1<a.length||!b(a).is("[data-h5-main-scene-container],[data-h5-scene-container]")&&!a.is("[data-h5-dyn-dummy-body]"))a=
b("\x3cdiv data-h5-scene-container\x3e\x3c/div\x3e").append(a);S(a);f.resolve(a.children())}).fail(function(b){f.reject(b)});return f}function N(a,c,d){D(a)?c=m(a,c,d):(c=g.async.deferred(),a=null==a?b('\x3cdiv class\x3d"h5-scene"\x3e\x3c/div\x3e').get(0):g.u.obj.isJQueryObject(a)?a[0]:a,c.resolve(a));return c.promise()}function Q(){}function Y(a,c){var d="";b.each(a,function(a,b){d&&(d+="\x26");if(c||"args"!==a&&"serverArgs"!==a)if("serverArgs"===c){var e=encodeURIComponent(a);if(b instanceof Array){for(var f=
"",h=0;h<b.length;h++)f&&(f+="\x26"),f+=e+"[]",f+="\x3d",f+=encodeURIComponent(b[h]);d+=f}else d+=e,d+="\x3d",d+=encodeURIComponent(b)}else d="args"===c?d+encodeURIComponent(U+a):d+encodeURIComponent(ja+a),d+="\x3d",d+=encodeURIComponent(g.u.obj.serialize(b).substring(2));else d+=Y(b,a)});return d}function A(a){A._checkKeyRegExp||(A._checkKeyRegExp=new RegExp("^("+G+"|"+la+")?(.+)"),A._checkArrayRegExp=/^(.*)\[\]$/);var c={},d=A._checkKeyRegExp,e=A._checkArrayRegExp;b.each(a.split("\x26"),function(a,
b){b=b.split("\x3d");var f=decodeURIComponent(b[0]),h=decodeURIComponent(b[1]),k=f.match(d);if(k){f=k[1]||"";k=k[2];if(!f){c.serverArgs=c.serverArgs||{};var l=k.match(e);l?(l=l[1],!1===l in c.serverArgs&&(c.serverArgs[l]=[]),c.serverArgs[l]instanceof Array&&c.serverArgs[l].push(h)):c.serverArgs[k]=h}f===U?(c.args=c.args||{},c.args[k]=g.u.obj.deserialize("2|"+h)):f===ja&&(c[k]=g.u.obj.deserialize("2|"+h))}});return c}function C(b){if(!b)return"";C._regExp||(C._regExp=new RegExp("(^|\x26)(?:"+G+"|"+
la+")[^\x3d]*\x3d.*?(?\x3d\x26|$)","g"));var a=C._regExp,c=new k(b);b=c.pathname;c=c.search||"";(c=c.substring(1).replace(a,""))&&(c="?"+c);return b+c}function ma(b){var a=new k(b);b=a.pathname||"";a=A((a.search||"").substring(1));a.to||(a.to=b);return a}function ka(a){a=b.extend(!0,{},a);var c=a.to,d="",e="";x.test(c)||(delete a.to,c=C(c),e=new k(c),d=e.pathname,e=e.search);(a=Y(a))&&(e=e+(e?"\x26":"?")+a);return d+e}function ea(a,c){null==a&&(a=b("\x3cdiv\x3e\x3c/div\x3e").get(0));b(a).is("[data-h5-dyn-container-bound]")&&
n(100007);var d=c;c?b(a).is(":not([data-h5-main-scene-container])")&&b(a).attr("data-h5-main-scene-container","data-h5-main-scene-container"):(b(a).is(":not([data-h5-scene-container])")&&b(a).attr("data-h5-scene-container","data-h5-scene-container"),d=g.settings.scene.followTitle);d=V.core.controllerInternal(a,ua,{isMain:c,followTitle:d},{async:!1});b(a).attr("data-h5-dyn-container-bound","data-h5-dyn-container-bound");return d}function ba(){Z||(Z=!0,t())}function I(a,b){return g.core.controllerManager.getControllers(a||
document.body,{name:ua.__name,deep:b&&!1===b.deep?!1:!0})}var X={NORMAL:"normal",ONCE:"once",SILENT:"silent"},R={GET:"get",POST:"post"},W={HASH:"hash",HISTORY:"history",NONE:"none",FULLRELOAD:"fullreload",HISTORY_OR_HASH:"historyOrHash",HISTORY_OR_ERROR:"historyOrError",HISTORY_OR_NONE:"historyOrNone",HISTORY_OR_FULLRELOAD:"historyOrFullreload"},O={HASH:"hash",HISTORY:"history",NONE:"none",FULLRELOAD:"fullreload"},na=V.core.isDisposing,Z=!1,U=g.settings.scene.clientQueryStringPrefix,ja=g.settings.scene.clientFWQueryStringPrefix,
G=null,la=null,aa=g.settings.scene.urlHistoryMode,r=null,x=/Controller$/,K=null,T=null,ca=null,pa=null,ga={__name:"h5.scene.DummyController"};g.mixin.eventDispatcher.mix(F.prototype);b.extend(F.prototype,{send:function(a){this._closed?alert("クローズ済みのチャネルです。送信できません。"):(a=new l(this.type,a),a=g.u.obj.serialize(a),this._targetWindow.postMessage(a,location.origin))},subscribe:function(a,b){this._subscribers.push({func:a,thisObj:b?b:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},
_receiveMessage:function(a){var b;try{if(b=g.u.obj.deserialize(a.data),b.type!==this.type)return}catch(c){return}a=this._subscribers;for(var d=0,e=a.length;d<e;d++){var f=a[d];f.func.call(f.thisObj,b.data)}this.dispatchEvent({type:"message",data:b.data})}});var qa={};b.extend(h.prototype,{_receive:function(a){var b;b=g.core.controllerManager.getControllers(document.body)[0];var c=a.id,d=a.method;a=a.args;!b[d]||L(b[d])?this._callFunction(c,b,d,a):this._sendChannel.send({id:c,isAsync:!1,status:4,result:null})},
_callFunction:function(a,b,c,d){d=P(d);var e=void 0;try{e=b[c].apply(b,d)}catch(f){this._sendChannel.send({id:a,isAsync:!1,status:1,result:null});return}var h=this;g.async.isPromise(e)?e.done(function(){var b=g.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=g.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:e})}});b.extend(a.prototype,{invoke:function(a,
b){var c=g.async.deferred(),d={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[d.id]=c;this._sendChannel.send(d);return c.promise()},_receive:function(a){var b=a.id,c=this._invocationMap[b];if(c){delete this._invocationMap[b];var b=a.result,d=a.status;a.isAsync?2===d?c.resolve.apply(c,b):c.reject.apply(c,b):0===d?c.resolve(b):c.reject()}}});b.extend(d.prototype,{_routes:[],_baseUrl:null,_started:!1,_urlMaxLength:null,_silentOnce:!1,urlHistoryMode:null,urlHistoryActualMode:null,
_urlForSimulate:null,_onChange:function(){if(this._silentOnce)this._silentOnce=!1;else{var a,b=null;this._urlForSimulate?(a=this._urlForSimulate,b=this._contextualData,this._urlForSimulate=this._contextualData=null):(a=this._getRouterLocation(),a=a.pathname+a.search);for(var c=this._removeBaseUrl(a),d=null,e=0;e<this._routes.length;e++){var f=this._routes[e];if(D(f.test)){if(c===f.test){d=f.func(a,b);break}}else if(f.test instanceof RegExp){if(f.test.test(c)){d=f.func(a,b);break}}else if("function"===
typeof f.test&&f.test(c)){d=f.func(a,b);break}}d&&this.evaluate(d,b)}},start:function(a){a=a||{};if(!this._started)switch(this._checkUrlLength(location.href,{throwOnError:!0}),this._started=!0,a&&a.silent||this._onChange(),this.urlHistoryActualMode){case O.HASH:b(window).on("hashchange",this._onChange);break;case O.HISTORY:b(window).on("popstate",this._onChange)}},navigate:function(a,b){b=b||{};if(this._started){this._checkUrlLength(a,{throwOnError:!0});var c=!1,d=this.urlHistoryActualMode;switch(b.mode){case "silent":c=
!0;break;case "none":d=O.NONE;break;case "fullreload":d=O.FULLRELOAD}var e=this._toAbusolute(a);switch(d){case O.HASH:c&&(this._silentOnce=!0);this.compareUrl(e)?this._onChange():b.replaceHistory?location.replace("#"+e):location.hash=e;break;case O.HISTORY:c&&(this._silentOnce=!0);this.compareUrl(e)||(b.replaceHistory?history.replaceState(null,null,e):history.pushState(null,null,e));this._onChange();break;case O.FULLRELOAD:this.compareUrl(e)?location.reload():b.replaceHistory?location.replace(e):
location.href=e;break;case O.NONE:this.evaluate(e)}}},stop:function(){if(this._started)switch(this._started=!1,this.urlHistoryActualMode){case O.HASH:b(window).off("hashchange",this._onChange);break;case O.HISTORY:b(window).off("popstate",this._onChange)}},_checkUrlLength:function(a,b){b=b||{};if(null==this._urlMaxLength)return!0;if((new k(a)).protocol)return a.length<=this._urlMaxLength;var c=this._toAbusolute(a);this.urlHistoryActualMode===O.HASH&&(c=window.location.pathname+(window.location.search||
"")+"#"+c);c=fa(c);b.writeBack&&(b.url=c,b.urlLength=c.length,b.urlMaxLength=this._urlMaxLength);return c.length<=this._urlMaxLength?!0:!1},_getBaseDir:function(){return this._baseUrl?this._baseUrl:this._getRouterLocation().dir},_removeBaseUrl:function(a){var b=this._baseUrl;b&&0===a.indexOf(b)&&(a=a.replace(b,""));return a},evaluate:function(a,b){this._urlForSimulate=this._toAbusolute(a);this._contextualData=b;this._onChange()},_toAbusolute:function(a){a=new k(a);var b=this._getRouterLocation();
a.isSearch()?a=b.pathname+a.search+a.hash:a.isHash()?a=b.pathname+b.search+a.hash:(a=a.pathname+a.search+a.hash,0!==a.indexOf("/")&&(a=this._getBaseDir()+a));a=fa(a);a=new k(a);return a.pathname+a.search+a.hash},compareUrl:function(a,b){if(null==b){var c=this._getRouterLocation();b=c.pathname+c.search}0!==a.indexOf("/")&&(a=this._toAbusolute(a));0!==b.indexOf("/")&&(b=this._toAbusolute(b));return a===b},_getRouterLocation:function(){return this.urlHistoryActualMode===O.HASH&&location.hash?new k(location.hash.substring(1)):
new k(location.href)}});b.extend(k.prototype,{href:void 0,protocol:void 0,host:void 0,hostname:void 0,port:void 0,pathname:void 0,dir:void 0,file:void 0,search:void 0,hash:void 0,isSearch:function(){return!this.protocol&&!this.host&&!this.pathname&&this.search},isHash:function(){return!this.protocol&&!this.host&&!this.pathname&&!this.search&&this.hash}});k.regExp=/^(?:(\w+:)?\/\/(([^\/:]+)(?::(\d+))?))?((\/?.*?)([^\/]*?))(\?.*?)?(#.*)?$/;window.opener&&new h;b.extend(y.prototype,{navigate:function(a){na(this.__controller)||
this.__controller.trigger("sceneChangeRequest",a)},getParentContainer:function(){if(na(this.__controller))return null;var a=q(this.__controller.rootElement);return a?I(a)[0]:null}});b.extend(function(b,c,d,e){this.window=b=window.open(b,c,d);this._isModal=!1;this._parentBlocker=null;this.setModal(!0===e?!0:!1);this._rmi=new a(b);this._watchChild()}.prototype,{invoke:function(a,b){return this._rmi.invoke(a,b)},getControllerProxy:function(a){return new M},setModal:function(a){this._isModal!=a&&(this._isModal?
(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=g.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),this._isModal=a)},close:function(){var a=g.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=this,b=setInterval(function(){a.window.closed&&(clearInterval(b),a.setModal(!1))},300)}});var ra=/\x3c!--(?:\s|\S)*?--\x3e/g,oa=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,va=/^\s*(?!\s|<)/;
b.extend(Q.prototype,{onChange:function(a,c){var d=g.async.deferred();b(a).empty();b(c).appendTo(a);d.resolve();return d.promise()},onChangeStart:function(a,b,c){this._ind=g.ui.indicator({target:a,block:!0,message:"遷移中..."}).show()},onChangeEnd:function(a,b,c){this._ind.hide()}});var ta=null,wa={__name:"h5.scene.NotReshowableController",__init:function(a){a=a.args._notReshowableMessage;b(this.rootElement).html("\x3ch1\x3e"+a+"\x3c/h1\x3e")}},ua={__name:"h5.scene.SceneContainerController",isMain:!1,
_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,_detour:{},_router:null,_first:!0,_title:"",__init:function(a){a=a.args||{};var c=this.rootElement,d=a.isMain,e=this;this.isMain=!!d;this.followTitle=d&&a.followTitle;this.isMain&&ta&&n(100003);this._containerName=b(c).attr("data-h5-main-scene-container")||b(c).attr("data-h5-scene-container");this._currentController=null;S(c);this._transition=new Q;this._transition.onChangeStart(c);this.on("{rootElement}","sceneChangeRequest",
this.own(this._onSceneChangeRequest));this._router=pa;if(this.isMain){ta=this;if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));r=this._router.urlHistoryActualMode;this._router.start()}else z(c).done(function(a){e._currentController=a;e._transition.onChangeEnd(e.rootElement,null,a.rootElement);e._transition=null;a=e._getTitleFromCurrentScene();null!=a&&e.setTitle(a)})},__dispose:function(){na(this._currentController)||this._currentController.dispose();this._currentController=
null;this.isMain&&(this._router.stop(),ta=this._router=null)},_onAClick:function(a){a.event.preventDefault();this.navigate(a.event.originalEvent.target.href)},_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.navigate(a.evArg)}),0)},navigate:function(a){if(D(a))return this.navigate({to:a});this._navigateParam=a;a=b.extend(!0,{},a);this._transition=new Q;this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var c=this._dfd=
g.async.deferred();this._isNavigated=!0;var d=a.to;if(this.isMain&&a.navigationType!==X.SILENT){D(d)||n(100004,[d]);-1!==d.indexOf("#")&&n(100005,[d]);a.method===R.POST&&(this._detour.serverArgs=a.serverArgs,delete a.serverArgs);if(a.navigationType===X.ONCE||a.method===R.POST)this._detour.args=g.u.obj.deserialize(g.u.obj.serialize(a.args)),delete a.args;d=a.replaceHistory;delete a.replaceHistory;a=ka(a);this._router.navigate(a,{replaceHistory:d})}else a=ka(a),this._router.evaluate(a,{container:this});
return c.promise()},setTitle:function(a){this._title=a;this.followTitle&&(document.title=a)},getTitle:function(){return this._title},_navigate:function(a,d){if(a){d=d||{};var e=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=new Q,this._transition.onChangeStart(this.rootElement,e));e&&c(e);var f=this,g=null;if(d.navigationType===X.ONCE||d.method===R.POST){if(!this._isNavigated){this._onNotReshowable(d);return}g=this._detour.args;delete this._detour.args}else g=d.args;
e=null;d.method===R.POST?(e=this._detour.serverArgs,delete this._detour.serverArgs):e=d.serverArgs;D(a)?x.test(a)?p(a,b("\x3cdiv\x3e\x3c/div\x3e"),g).done(function(a){f._navigateEnd(a,d)}):N(a,d.method,e).done(function(a){z(b("\x3cdiv\x3e\x3c/div\x3e").append(a),null,g).done(function(a){f._navigateEnd(a,d)})}).fail(function(b){n(100008,[a],b)}):a.__name&&x.test(a.__name)&&f._navigateEnd(a,d)}},_navigateEnd:function(a,c){var d=this,e=(this._currentController||{}).rootElement,f=a.rootElement;d._currentController=
a;var g=c&&c.title;null==g?this._navigateParam&&x.test(this._navigateParam.to)&&null!=a.sceneTitle?this.setTitle(a.sceneTitle):(g=this._getTitleFromCurrentScene(),null!=g&&this.setTitle(g)):this.setTitle(g);this._navigateParam=null;this._transition.onChange(this.rootElement,f).done(this.own(function(){this._dfd&&this._dfd.resolve({from:e,to:f});e&&b(e).remove();d._transition.onChangeEnd(d.rootElement,e,f);d._isNavigated=!1;d._dfd=null;d._transition=null}))},_getTitleFromCurrentScene:function(){var a=
this._currentController.rootElement,c=b(a).data("h5-scene-title");if(null!=c)return c;a=b(a).find("title");if(a.length)return a.text()},_onNotReshowable:function(a){if(T.__name&&x.test(T.__name)){var c=V.core.controllerInternal(b("\x3cdiv\x3e\x3c/div\x3e"),T,{_notReshowableMessage:"この画面は再表示できません。"});this._navigateEnd(c,a)}else a=D(T)?{to:T}:b.extend(!0,{},T),a.args=a.args||{},a.args._notReshowableMessage="この画面は再表示できません。",this._navigate(a.to,a)},_defaultFuncForRouter:function(a){var b=this,c=ma(a),
d=c.to;if(this.isMain&&this._first){if(c.navigationType===X.ONCE||c.method===R.POST){this._onNotReshowable(c);this._first=!1;return}var e=d&&x.test(d),f=r===O.HASH&&location.hash.substring(1);if(this._router.compareUrl(a)&&!f&&!e){z(this.rootElement,null,c.args).done(function(a){b._currentController=a;b._transition.onChangeEnd(b.rootElement,null,a.rootElement);b._transition=null;a=b._getTitleFromCurrentScene();null!=a&&b.setTitle(a)});this._first=!1;return}}d=d||location.pathname+location.search;
d=C(d);this._first&&(this._navigated=!0);this._navigate(d,c);this._first=!1}};V.core.addControllerInstantiationHook(function(a){a.scene=new y(a)});b(function(){U=g.settings.scene.clientQueryStringPrefix;G=U.replace(/\\/g,"\\\\");ja=g.settings.scene.clientFWQueryStringPrefix;la=ja.replace(/\\/g,"\\\\");aa=g.settings.scene.urlHistoryMode;K=parseInt(g.settings.scene.urlMaxLength);T=wa;ca=g.settings.scene.baseUrl;var a=[];g.settings.scene.routes&&(a=a.concat(g.settings.scene.routes));a=b.map(a,function(a){var b=
a.test;if(L(b))var c=b,b=function(a){var b=ma(a);return c(a,b)};return{test:b,func:function(b,c){c=c||{};var d=a.navigationInfo;if(L(d))var e=ma(b),d=d(b,e);if(null==d)return(c.container||ta)._defaultFuncForRouter(b),null;D(d)&&(d={to:d});return ka(d)}}});a.push({test:/.*/,func:function(a,b){b=b||{};(b.container||ta)._defaultFuncForRouter(a)}});pa=new d({routes:a,urlHistoryMode:aa,baseUrl:ca,urlMaxLength:K});g.settings.scene.autoInit&&ba()});g.u.obj.expose("h5.scene",{createSceneContainer:ea,init:ba,
getMainSceneContainer:function(){return ta},getSceneContainers:I,getSceneContainerByName:function(a){if(null==a)return null;var b=I();if(0===b.length)return null;if(a){for(var c=0;c<b.length;c++)if(b[c]._containerName===a)return b[c];return null}return b[0]},navigationType:X,method:R,urlHistoryMode:W})})()})(jQuery);