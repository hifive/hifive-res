/* Copyright (C) 2012-2018 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.3.3 gitCommitId 39990125704305e5c214bf547ea366973efbbf28 (scopedglobals,util,async,cls,event,resource,controller,dataModel,view,modelWithBinding,validation,ui,api.geo,api.sqldb,api.storage,scene) */
(function(b){function m(b,e,f){var r=null,w=ua[b],t=Sa[b];t&&(r=t(b,w,e,f));!r&&w&&(r=g.u.str.format.apply(null,[w].concat(e)));r&&(r+="(code\x3d"+b+")");e=r?Error(r):Error("FwError: code \x3d "+b);b&&(e.code=b);f&&(e.detail=f);throw e;}function Ta(b){for(var e in b)b.hasOwnProperty(e)&&(ua[e]=b[e])}function ka(b,e,f){var r=null,w=ua[b];w&&(e=[w].concat(e),r=g.u.str.format.apply(null,e));return{code:b,message:r,detail:f}}function Q(b){return null==b?b:F(b)?b:[b]}function D(b){return"string"===typeof b}
function va(b){return b.isRejected?b.isRejected():"rejected"===b.state()}function Aa(b){return b.isResolved?b.isResolved():"resolved"===b.state()}function ra(b){return D(b)?!!b.match(/^[A-Za-z_\$][\w|\$]*$/):!1}function wa(c){if("regexp"===b.type(c))return c;var e="",e=-1!==c.indexOf("*")?b.map(c.split("*"),function(b){return b.replace(/\W/g,"\\$\x26")}).join(".*"):c;return new RegExp("^"+e+"$")}function Fa(b,e,f){if(b)if(b._h5UnwrappedCall)b._h5UnwrappedCall(e,f);else if(F(f))b[e].apply(b,f);else b[e](f)}
function pa(c,e,f,r){return c[b.hasOwnProperty("curCSS")?"pipe":"then"](e,f,r)}function Ya(b){return b&&b.document&&9===b.document.nodeType&&ea(b.document)===b}function S(b){return"undefined"===typeof b.nodeType?Ya(b)?b.document:null:9===b.nodeType?b:b.ownerDocument}function ea(b){return window.document===b?window:b.defaultView||b.parentWindow}function Ia(c,e,f,r){function w(h){return function(){if(!m._rejected){var a=g.u.obj.argsToArray(arguments),d=b.inArray(h,c);y[d]=2>a.length?a[0]:a;++m._resolveCount===
m._promisesLength&&m._doneCallbackExecuter()}}}var t=c?c.length:0,u=g.async.isPromise,m=this,y=null;this._doneCallbackExecuter=function(){m._resolved=!0;e&&(y?e.call(this,y):e.apply(this,arguments))};this._failCallbackExecuter=function(){m._rejected=!0;f?f.apply(this,arguments):r&&g.settings.commonFailHandler&&g.settings.commonFailHandler.call(this,arguments)};if(1===t||u(c)){var p=1===t?c[0]:c;u(p)?(this.remove=function(b){this._resolved||this._rejected||p===b&&this._doneCallbackExecuter()},p.done(this._doneCallbackExecuter),
p.fail(this._failCallbackExecuter)):this._doneCallbackExecuter()}else{for(var t=[],n=0,H=c.length;n<H;n++){var G=c[n];u(G)&&t.push(G)}u=t.length;if(0===u)this._resolved=!0,e&&e();else for(this._promises=t,y=[],this._resolveArgs=[],this._resolveCount=0,this._promisesLength=u,n=0;n<u;n++)H=t[n],H.done(w(H)).fail(this._failCallbackExecuter)}}function la(b,e,f,r){return new Ia(b,e,f,r)}var Ja=void 0;if(window.h5){if(window.h5.env&&"1.3.3"===window.h5.env.version)return;Ja=window.h5}var g={};window.h5=
g;g.coexist=function(){window.h5=Ja;return g};g.env={version:"1.3.3"};var ua={},Sa={},ga=function(){var b=null,e=null,f=null;return function(r){b||(b=document.createElement("a"));null===f&&(b.setAttribute("href","./"),f="./"!==b.href);if(f)return b.setAttribute("href",r),b.href;e||(e=document.createElement("span"));e.innerHTML='\x3ca href\x3d"'+r+'" /\x3e';return e.firstChild.href}}(),F=Array.isArray||function(){var b=Object.prototype.toString;return function(e){return"[object Array]"===b.call(e)}}(),
K=function(){if("function"===typeof RegExp()){var b=Object.prototype.toString;return function(e){return"[object Function]"===b.call(e)}}return function(b){return"function"===typeof b}}();Ia.prototype=b.extend(Ia.prototype,{remove:function(c){if(!this._resolved&&!this._rejected)if(promsie===this._promises)this._doneCallback&&doneCallback(),this._resolved=!0;else{var e=b.inArray(c,this._promises);-1!==e&&(this._promises.splice(e,1),this._resolveArgs.splice(e,1),Aa(c)||(this._promisesLength--,that._resolveCount===
this._promisesLength&&this._doneCallbackExecuter()))}}});var O={core:{controllerInternal:null}};(function(){function c(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case "undefined":return"u";case "undefElem":return"_";
case "objElem":return"@"}}function e(a,d){if(D(a)){var b=a;d&&(b=b.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return b=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(e(a.toString())):a}function f(a,d){return"1"===d?a:D(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof
String?new String(f(a.toString())):a}function r(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function w(a,d,b){var c=g.async.deferred();g.ajax({url:a,async:d,cache:b,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=y(arguments);a.push(this.url);c.notifyWith(c,a);c.resolveWith(c,a)}).fail(function(){c.rejectWith(c,y(arguments))});return c.promise()}function t(a){D(a)||m(11E3,"h5.u.obj.ns()");a=a.split(".");for(var d=a.length,b=0;b<d;b++)ra(a[b])||
m(11E3,"h5.u.obj.ns()");for(var c=window,b=0;b<d;b++){var h=a[b];"undefined"===typeof c[h]&&(c[h]={});c=c[h]}return c}function u(a,d){var b=t(a),c;for(c in d)d.hasOwnProperty(c)&&(void 0!==b[c]&&m(11001,[a,c]),b[c]=d[c])}function z(a){return a&&a.jquery?a.jquery===b().jquery:!1}function y(a){return Array.prototype.slice.call(a)}function p(a,d){D(a)||m(11E3,"h5.u.obj.getByPath()");a=a.replace(/\[(\d+)\]/g,function(a,d,b){return b?"."+d:d});var b=a.split("."),c=0;"window"!==b[0]||d&&d!==window||(c=
1);for(var h=d||window,f=b.length;c<f&&(h=h[b[c]],null!=h);c++);return h}var n={},H={"\x26":"\x26amp;",'"':"\x26quot;","\x3c":"\x26lt;","\x3e":"\x26gt;","'":"\x26#39;"},G=void 0!==document.createElement("script").onload,h=-1===/\r\n/.toString().indexOf("\r\n");u("h5.u",{loadScript:function(a,d){var c=g.async.deferred,h=Q(a);h&&0!==h.length||m(11007);for(var f=0,e=h.length;f<e;f++)a=h[f],D(a)&&b.trim(a)||m(11007);null==d||b.isPlainObject(d)||m(11008,"h5.u.loadScript()");var k=d&&!1===d.async?!1:!0,
r=!(!d||!0!==d.force),f=!(!d||!0!==d.parallel),p=!(!d||!0!==d.atomic),t=!r,A=k?c():null,u=k?function(a){A.reject(ka(11010,[a]))}:null,e=k?function(){var a=c();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,V=f?[]:null,oa=[],H={};if(k){if(!p&&G){var z=b("head"),I=function(a){var d=c(),b=document.createElement("script");b.onload=function(){b.onload=null;n[a]=a;d.resolve()};b.onerror=function(){b.onerror=null;d.reject(a)};b.type="text/javascript";b.src=t?a:a+(-1<a.indexOf("?")?"\x26_":
"?_")+ +new Date;z[0].appendChild(b);return d.promise()};if(f)V.push(e()),b.each(h,function(){var a=ga(this.toString());if(!r&&a in n)return!0;V.push(I(a))}),la(V,function(){A.resolve()},u);else{var Y=pa(c().resolve(),e);b.each(h,function(){var a=ga(this.toString());Y=pa(Y,function(){if(r||!(a in n))return I(a)},u)});pa(Y,function(){A.resolve()},u)}}else if(f){var R=[];V.push(e());R.push(null);b.each(h,function(){var a=ga(this.toString());if(!r&&(a in n||a in H))return!0;V.push(w(a,k,t));p?H[a]=a:
R.push(null)});f=h=null;p?(h=function(){b.each(y(arguments),function(a,d){b.globalEval(d[0])});b.extend(n,H);A.resolve()},f=b.noop):(h=function(){A.resolve()},f=function(){for(var a=y(arguments),d=0;d<R.length;d++)if(a[d]){var c=a[d][3];R[d]!==c&&(b.globalEval(a[d][0]),R.splice(d,1,c))}});g.async.when(V).done(h).fail(u).progress(f)}else Y=pa(c().resolve(),e),b.each(h,function(){var a=ga(this.toString());Y=pa(Y,function(){var d=c();!r&&(a in n||a in H)?d.resolve():w(a,k,t).done(function(c,l,h){p?(oa.push(c),
H[a]=a):(b.globalEval(c),n[a]=a);d.resolve()}).fail(function(){d.reject(this.url)});return d.promise()},u)}),pa(Y,function(){p&&(b.each(oa,function(a,d){b.globalEval(d)}),b.extend(n,H));A.resolve()},u);return A.promise()}b.each(h,function(){var a=ga(this.toString());if(!r&&(a in n||a in H))return!0;w(a,k,t).done(function(d,c,l){p?(oa.push(d),H[a]=a):(b.globalEval(d),n[a]=a)}).fail(function(){m(11010,[a])})});p&&(b.each(oa,function(a,d){b.globalEval(d)}),b.extend(n,H))},createInterceptor:function(a,
d){return function(b){var c={},h=a?a.call(this,b,c):b.proceed();b.result=h;if(!d)return h;if(h&&K(h.promise)&&!z(h)){var f=this;Fa(h,"always",function(){d.call(f,b,c)});return h}d.call(this,b,c);return h}}});u("h5.u.str",{startsWith:function(a,d){return 0===a.lastIndexOf(d,0)},endsWith:function(a,d){var b=a.length-d.length;return 0<=b&&a.lastIndexOf(d)===b},format:function(a,d){if(null==a)return"";var b=y(arguments).slice(1);return a.replace(/\{(.+?)\}/g,function(a,d){if(/^\d+$/.test(d)){var c=b[parseInt(d,
10)];return"undefined"===typeof c?"undefined":c}c=/^\d+[\.|\[]/.test(d)?d:"0."+d;c=p(c,b);return"undefined"===typeof c?"undefined":c})},escapeHtml:function(a){return"string"!==b.type(a)?a:a.replace(/[&"'<>]/g,function(a){return H[a]})}});u("h5.u.obj",{expose:u,ns:t,serialize:function(a){function d(a){for(var d=0,b=n.length;d<b;d++)if(a===n[d])return!0;return!1}function l(a){for(var d=0,b=n.length;d<b;d++)a===n[d]&&n.splice(d,1)}function f(a){var k=a,p=b.type(a);"object"===typeof a&&(a instanceof String?
p="String":a instanceof Number?p="Number":a instanceof Boolean&&(p="Boolean"));switch(p){case "String":case "string":k=c(p)+e(k);break;case "Boolean":k=k.valueOf();case "boolean":k=c(p)+(k?1:0);break;case "Number":k=k.valueOf();if(b.isNaN&&b.isNaN(a)||b.isNumeric&&!b.isNumeric(a))k=Infinity===a.valueOf()?c("infinity"):-Infinity===a.valueOf()?c("-infinity"):c("nan");k=c(p)+k;break;case "number":k=b.isNaN&&b.isNaN(a)||b.isNumeric&&!b.isNumeric(a)?Infinity===a?c("infinity"):-Infinity===a?c("-infinity"):
c("nan"):c(p)+k;break;case "regexp":k=c(p)+e(k.toString(),h);break;case "date":k=c(p)+ +k;break;case "array":d(a)&&m(ERR_CODE_REFERENCE_CYCLE);n.push(a);for(var y=[],k=c(p)+"[",p=0,t=a.length;p<t;p++){y[p.toString()]=!0;var A;A=a.hasOwnProperty(p)?"function"===b.type(a[p])?c("undefined"):r(f(a[p])):c("undefElem");k+='"'+A+'"';p!==a.length-1&&(k+=",")}var p="",u;for(u in a)y[u]||"function"!==b.type(a[u])&&(p+='"'+r(e(u))+'":"'+r(f(a[u]))+'",');p&&(k+=(a.length?",":"")+'"'+c("objElem")+"{"+r(p),k=k.replace(/,$/,
""),k+='}"');k+="]";l(a);break;case "object":d(a)&&m(11005);n.push(a);k=c(p)+"{";for(u in a)a.hasOwnProperty(u)&&"function"!==b.type(a[u])&&(k+='"'+r(e(u))+'":"'+r(f(a[u]))+'",');k=k.replace(/,$/,"");k+="}";l(a);break;case "null":case "undefined":k=c(p)}return k}K(a)&&m(11002);var n=[];return"2|"+f(a)},deserialize:function(a){function d(a){function h(a){switch(a){case "s":return"string";case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";
case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return"undefined";case "_":return"undefElem";case "@":return"objElem"}}a.match(/^(.)(.*)/);a=RegExp.$1;k=RegExp.$2?RegExp.$2:"";if(void 0!==a&&""!==a)switch(h(a)){case "String":k=new String(f(k,l));break;case "string":break;case "Boolean":"0"===k||"1"===k?k=new Boolean("1"===k):m(11006);break;case "boolean":"0"===
k||"1"===k?k="1"===k:m(11006);break;case "nan":""!==k&&m(11006);k=NaN;break;case "infinity":""!==k&&m(11006);k=Infinity;break;case "-infinity":""!==k&&m(11006);k=-Infinity;break;case "Number":"infinity"===h(k)?k=new Number(Infinity):"-infinity"===h(k)?k=new Number(-Infinity):"nan"===h(k)?k=new Number(NaN):(k=new Number(k),isNaN(k.valueOf())&&m(11006));break;case "number":k=(new Number(k)).valueOf();isNaN(k)&&m(11006);break;case "array":var e;try{e=b.parseJSON(k)}catch(n){m(11006)}F(e)||m(11006);for(var k=
[],p=0,r=e.length;p<r;p++)switch(h(e[p].substring(0,1))){case "undefElem":k[p]=void 0;delete k[p];break;case "objElem":a=d(c("object")+e[p].substring(1));for(var y in a)k[f(y)]=a[y];break;default:k[p]=d(e[p])}break;case "object":try{e=b.parseJSON(k)}catch(n){m(11006)}b.isPlainObject(e)||m(11006);k={};for(y in e)a=d(e[y]),k[f(y)]=a;break;case "date":k=new Date(parseInt(k,10));break;case "regexp":try{p=k.match(/^\/(.*)\/(.*)$/),r=f(p[1],l),k=new RegExp(r,p[2])}catch(n){m(11006)}break;case "null":""!==
k&&m(11006);k=null;break;case "undefined":""!==k&&m(11006);k=void 0;break;default:m(11004)}return f(k,l)}D(a)||m(11009);a.match(/^(.)\|(.*)/);var l=RegExp.$1;"1"!==l&&"2"!==l&&m(11003,[l,"2"]);return d(RegExp.$2)},isJQueryObject:z,argsToArray:y,getByPath:p})})();(function(){function c(b,c){b.target||(b.target=c);b.timeStamp||(b.timeStamp=(new Date).getTime());if(!b.isDefaultPrevented){var f=!1;b.isDefaultPrevented=function(){return f};b.preventDefault=function(){f=!0}}if(!b.isImmediatePropagationStopped){var e=
!1;b.isImmediatePropagationStopped=function(){return e};b.stopImmediatePropagation=function(){e=!0}}}function e(b){var c={},f;for(f in b){var e=b[f];b.hasOwnProperty(f)&&(K(e)||null===e||"string"===typeof e||"number"===typeof e||"boolean"===typeof e)&&(c[f]=e)}this._mix=function(b){for(var f in c)b[f]=c[f]};this._hasInterface=function(b){for(var f in c)if(!g.u.str.startsWith(f,"_")&&"undefined"===typeof b[f])return!1;return!0}}function f(b){return new e(b)}b.extend(e.prototype,{mix:function(b){return this._mix(b)},
hasInterface:function(b){return this._hasInterface(b)}});g.u.obj.expose("h5.mixin",{createMixin:f,eventDispatcher:f({hasEventListener:function(b,c){if(!this._eventListeners)return!1;var f=this._eventListeners[b];if(!f||!this._eventListeners.hasOwnProperty(b))return!1;for(var e=0,g=f.length;e<g;e++)if(f[e]===c)return!0;return!1},addEventListener:function(b,c){(2>arguments.length||!D(b))&&m(16E3);null==c||this.hasEventListener(b,c)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(b)||
(this._eventListeners[b]=[]),this._eventListeners[b].push(c))},removeEventListener:function(b,c){if(this.hasEventListener(b,c))for(var f=this._eventListeners[b],e=0,g=f.length;e<g;e++)if(f[e]===c){f.splice(e,1);break}},dispatchEvent:function(b){if(this._eventListeners){var f=this._eventListeners[b.type];if(f){f=f.slice(0);c(b,this);for(var e=0,g=f.length;e<g&&!b.isImmediatePropagationStopped();e++)K(f[e])?f[e].call(b.target,b):f[e].handleEvent&&f[e].handleEvent(b);return b.isDefaultPrevented()}}}})})})();
(function(){function c(b){return b.match(/^error$/i)?u.ERROR:b.match(/^warn$/i)?u.WARN:b.match(/^info$/i)?u.INFO:b.match(/^debug$/i)?u.DEBUG:b.match(/^trace$/i)?u.TRACE:b.match(/^all$/i)?u.ALL:b.match(/^none$/i)?u.NONE:null}function e(b,c){var f={},e=b.slice(0,c),g=Math.min(3,c),h=e.slice(0,g).join(" \x3c- ");e.length>g&&(h+=" ...");f.preview=h;f.all=e.join("\n");return f}function f(b){b.name?b=b.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(b.toString()),b=RegExp.$1);return b}function r(c){c=g.u.obj.argsToArray(c);
for(var f=[],e=0,r=c.length;e<r;e++)f.push(b.type(c[e]));return f.join(", ")}function w(){}function t(c){D(c)&&0!==b.trim(c).length||m(10005);this.category=b.trim(c)}var u={ERROR:50,WARN:40,INFO:30,DEBUG:20,TRACE:10,ALL:0,NONE:-1},z=null;w.prototype={init:function(b){},log:function(b){window.console&&(D(b.args[0])?this._logMsg(b):this._logObj(b))},_logMsg:function(b){var c=b.args,c=1===c.length?c[0]:g.u.str.format.apply(g.u.str,c),c=this._getLogPrefix(b)+c;b.logger.enableStackTrace&&(c+="  ["+b.stackTrace.preview+
"]");b.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(c):this._consoleOut(b.level,c);b.logger.enableStackTrace&&this._consoleOut(b.level,b.stackTrace.all);b.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(b,c){var f=!1;b==u.ERROR&&console.error?(console.error(c),f=!0):b==u.WARN&&console.warn?(console.warn(c),f=!0):b==u.INFO&&console.info?(console.info(c),f=!0):b==u.DEBUG&&console.debug&&(console.debug(c),f=!0);!f&&console.log&&console.log(c)},
_getLogPrefix:function(b){return"["+b.levelString+"]"+b.date.getHours()+":"+b.date.getMinutes()+":"+b.date.getSeconds()+","+b.date.getMilliseconds()+": "},_logObj:function(b){var c=b.args,f=this._getLogPrefix(b);c.unshift(f);b.level==u.ERROR&&console.error?this._output(console.error,c):b.level==u.WARN&&console.warn?this._output(console.warn,c):b.level==u.INFO&&console.info?this._output(console.info,c):b.level==u.DEBUG&&console.debug?this._output(console.debug,c):this._output(console.log,c)},_output:function(b,
c){try{if(b.apply){b.apply(console,c);return}}catch(f){}b(c)}};t.prototype={enableStackTrace:!1,maxStackSize:10,error:function(b){this._log(u.ERROR,arguments,this.error)},warn:function(b){this._log(u.WARN,arguments,this.warn)},info:function(b){this._log(u.INFO,arguments,this.info)},debug:function(b){this._log(u.DEBUG,arguments,this.debug)},trace:function(b){this._log(u.TRACE,arguments,this.trace)},_traceFunctionName:function(c){var p=[],n=Error();if(n=n.stack||n.stacktrace)var g=/_traceFunctionName/,
p=n.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),t=null,h=null,p=b.map(p,function(a,d){if(0===a.length)return null==h?"":null;t=""===b.trim(a)?"{anonymous}":b.trim(a);null===h&&g.test(a)&&(h=d);return t}).slice(h+3);else{c=c.caller;for(var n=0,a=this.maxStackSize;n<a;n++){var d=f(c),l=r(c.arguments),v;try{v=c.caller}catch(L){p.push("{unable to trace}");break}d?p.push("{"+d+"}("+l+")"):v?p.push("{anonymous}("+
l+")"):p.push("{root}("+l+")");if(!v)break;c=v}}return e(p,this.maxStackSize)},_log:function(b,c,f){c={level:b,args:g.u.obj.argsToArray(c),stackTrace:this.enableStackTrace?this._traceFunctionName(f):""};var e=z.out,r=z.defaultOut;f=[];var h=!1;if(e)for(var e=Q(e),a=0,d=e.length;a<d;a++){var l=e[a];if(l.compiledCategory.test(this.category)&&b>=l.compiledLevel&&0<=l.compiledLevel&&(f.push(l),!1!==l.terminate)){h=!0;break}}f.length&&h||f.push(r);a=0;for(e=f.length;a<e;a++){r=f[a];d=r.compiledLevel;r=
r.compiledTargets;if(b<d||0>d)break;c.logger=this;c.date=new Date;c.levelString=this._levelToString(b);if(!r||0===r.length)break;h=0;for(d=r.length;h<d;h++)r[h].log(c)}},_levelToString:function(b){if(b===u.ERROR)return"ERROR";if(b===u.WARN)return"WARN";if(b===u.INFO)return"INFO";if(b===u.DEBUG)return"DEBUG";if(b===u.TRACE)return"TRACE"}};g.u.obj.expose("h5.log",{createLogger:function(b){return new t(b)},configure:function(){function f(a,d,h){if(!h){var l=d.category;D(l)&&0!==b.trim(l).length||m(10010);
l=b.trim(l);d.compiledCategory=wa(l);t.push(l)}h=null==d.level?c(h?e.level:r.level):D(d.level)?c(b.trim(d.level)):d.level;"number"!==typeof h&&m(10003,d.level);d.compiledLevel=h;h=[];l=d.targets;if(null!=l){var n=[];null==l||F(l)||D(l)&&b.trim(l).length||m(10008);for(var l=Q(l),g=0,u=l.length;g<u;g++){null==l[g]||D(l[g])&&b.trim(l[g]).length||m(10008);var A=l[g];if(A){-1!==b.inArray(A,n)&&m(10007,A);var w=a[A];w||m(10004,A);n.push(A);h.push(w.compiledTarget)}}}d.compiledTargets=h}var e={level:"NONE",
targets:null},n=b.extend(!0,{},g.settings.log),r=n.defaultOut;r||(r=e,n.defaultOut=r);var t=[],h=n.target;h||(h={},n.target=h);(function(a){b.isPlainObject(a)||m(10009);for(var d in a){var c=a[d];"object"!==b.type(c.type)&&"console"!==c.type&&m(1E4);var l;l="console"===c.type?new w:b.extend(!0,{},c.type);l.init&&l.init(c);c.compiledTarget=l}a.console={type:"console",compiledTarget:new w}})(h);f(h,r,!0);var a=n.out;if(a)for(var a=Q(a),d=0,l=a.length;d<l;d++)f(h,a[d]);z=n}})})();(function(){function c(c){g.settings.aspects=
b.map(Q(c),function(b){b.target&&(b.compiledTarget=wa(b.target));b.pointCut&&(b.compiledPointCut=wa(b.pointCut));return b})}g.u.obj.ns("h5.settings");g.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(b,c,e){b=b.status;if("POST"===this.type||0!==b&&12029!==b)return!1}},trackstartTouchAction:"none",res:{baseUrl:null,resolveTimeout:1E4},scene:{followTitle:!0,clientQueryStringPrefix:"",
clientFWQueryStringPrefix:"_h5_",urlHistoryMode:"history",urlMaxLength:1800,baseUrl:null,autoInit:!1}};var e=g.u.createInterceptor(function(b,c){this.log.info("{0}.{1}が開始されました。",this.__name,b.funcName);this.log.info(b.args);c.start=new Date;return b.proceed()},function(b,c){var e=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time\x3d{2}ms",this.__name,b.funcName,e)});g.u.obj.expose("h5.core.interceptor",{lapInterceptor:e,logInterceptor:e,errorInterceptor:function(b){var c=
null;try{c=b.proceed()}catch(e){g.settings.commonFailHandler&&K(g.settings.commonFailHandler)&&g.settings.commonFailHandler.call(null,e)}return c}});b(document).trigger("h5preinit");g.settings.aspects&&c(g.settings.aspects);g.log.configure()})();(function(){g.u.obj.expose("h5.env",{ua:function(c){function e(a,b){var d=Z(a,"[^;)]*",b).split(" ");return 1===d.length?"":d[d.length-1]}function f(a,b){var d=Z(a,"[^;) ]*",b).split("/");return 1===d.length?"":d[d.length-1]}function g(a,b){var d=Z(a,"[^;) ]*",
b).split(":");return 1===d.length?"":d[d.length-1]}var w=!!c.match(/iPhone/i),t=!!c.match(/iPad/i),u=w||t,m=!!c.match(/android/i),y=!!c.match(/Windows Phone/i),p=!!c.match(/Edge/),n=!!c.match(/MSIE/)||!!c.match(/Trident/),H=!!c.match(/Firefox/i),G=!p&&!!c.match(/Chrome/i)||!!c.match(/CrMo/)||!!c.match(/CriOS/),h=!p&&!m&&!G&&!!c.match(/Safari/i),a=!p&&!!c.match(/Webkit/i),d=!!c.match(/Opera/i),l=m&&!!c.match(/Safari/i)&&!G,v=!!(w||y||l&&c.match(/Mobile/)&&!c.match(/SC-01C/)||m&&G&&c.match(/Mobile/)||
c.match(/Fennec/i)||c.match(/Opera Mobi/i)),L=!!(t||l&&!c.match(/Mobile/)||m&&G&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i)),fa=!v&&!L,k=null,N=null,T=function(a,d){return b.trim(c.substring(c.indexOf(a)+a.length,c.indexOf(d))).split("_")},Z=function(a,d,l){return b.trim(c.match(!1===l?new RegExp(a+d):new RegExp(a+d,"i")))};w?(N=T("iPhone OS","like"),k=parseInt(N[0]),N=N.join(".")):t?(N=T("CPU OS","like"),k=parseInt(N[0]),N=N.join(".")):m&&H||(m?(N=e("Android"),
k=parseInt(N.split(".")[0])):y&&((N=e("Windows Phone OS"))||(N=e("Windows Phone")),k=parseInt(N.split(".")[0])));n&&d&&(n=!1);var A=T=null;if(u||m&&l)T=k,A=N;else{var C=null;n?C=e("MSIE",!1)||g("rv"):G?(C=f("Chrome",!1))||(C=f("CrMo",!1)):h?C=f("Version"):H?C=f("Firefox"):d?((C=f("Version"))||(C=f("Opera")),C||(C=e("Opera"))):p&&(C=f("Edge"));C&&(T=parseInt(C.split(".")[0]),A=C)}return{osVersion:k,osVersionFull:N,browserVersion:T,browserVersionFull:A,isiPhone:w,isiPad:t,isiOS:u,isAndroid:m,isWindowsPhone:y,
isIE:n,isFirefox:H,isChrome:G,isSafari:h,isOpera:d,isEdge:p,isAndroidDefaultBrowser:l,isSmartPhone:v,isTablet:L,isDesktop:fa,isWebkit:a}}(navigator.userAgent)})})();(function(){function c(b){function c(){f=!0;h=this;a=u(arguments);if(va(b)||Aa(b))return b;var l=u(arguments);if(0<d.length)for(var e=0,p=d.length;e<p;e++){var g=l;g!==arguments&&(g=Q(g));K(d[e])&&d[e].apply(this,g)}return b}var f=!1,h=null,a=null,d=[];b.progress=function(){for(var c=u(arguments),e=0,p=c.length;e<p;e++){var g=c[e];if(F(g))b.progress.apply(this,
g);else if(K(g))if(f){var k=a;k!==a&&(k=Q(k));g.apply(h,k)}else d.push(g)}return this};b.notify=c;b.notifyWith=function(a,b){return b?c.apply(a,b):c.apply(a)}}function e(b){if(!b)return!1;b=Q(b);for(var c=0,f=b.length;c<f;c++)if(K(b[c]))return!0;return!1}function f(n,m){function G(a){m?m[a]&&(n[a]=m[a]):(v[a]=n[a],n[a]=function(b){return function(){if(!d){var b=u(arguments);if("then"===a||"pipe"===a)b=b[1];e(b)&&(d=!0)}return n._h5UnwrappedCall.call(this,a,u(arguments))}}(a),L[a]=n[a])}function h(a){return function(){var b=
g.settings.commonFailHandler;d||!b||l||(n.fail.call(this,b),l=!0);return a.apply(this,arguments)}}if(n._h5UnwrappedCall)return n;var a=!!n.progress;a||p(n)?m&&(n.progress=m.progress):c(n);var d=!1,l=!1,v={},L={};n._h5UnwrappedCall=m?m._h5UnwrappedCall:function(a,d){d=Q(d);b.extend(n,v);var c=n[a].apply(this,d);b.extend(n,L);return c};for(var fa=0,k=r.length;fa<k;fa++){var N=r[fa];n[N]&&G(N)}n.pipe&&!m&&(n.pipe=function(){for(var a=g.async.deferred(),b=u(arguments),d=0,c=w.length;d<c;d++){var l=this;
(function(b,d,c){function h(){if(e){var d=b.apply(this,arguments);if(d&&K(d.promise))f(d),d.done(a.resolve),d._h5UnwrappedCall("fail",a.reject),K(d.progress)&&d.progress(a.notify);else a[c+"With"](this,[d])}else a[c+"With"](this,arguments)}var e=K(b);if(e||"fail"!==d)l[d](h);else l._h5UnwrappedCall(d,h)})(b[d],w[d],t[d])}return a.promise()},L.pipe=n.pipe);if(n.then&&!m){var y=n.then;n.then=z?n.pipe:function(){var b=arguments,d=y.apply(this,b);!a&&e(b[2])&&n.progress.call(n,b[2]);return d};L.then=
n.then}n.reject&&(n.reject=m&&m.reject?m.reject:h(n.reject));n.rejectWith&&(n.rejectWith=m&&m.rejectWith?m.rejectWith:h(n.rejectWith));if(n.promise)if(m&&m.promise)n.promise=m.promise;else{var Z=n.promise;n.promise=function(){return f(Z.apply(this,arguments),n)}}return n}var r=["fail","always","pipe","then"],w=["done","fail","progress"],t=["resolve","reject","notify"],u=g.u.obj.argsToArray,z=function(){var c=b.Deferred();return c!==c.then()}(),y=function(){var c=b.Deferred();return f(c)},p=function(b){return!!b&&
b.done&&b.fail&&!b.resolve&&!b.reject};g.u.obj.expose("h5.async",{deferred:y,when:function(){var c=u(arguments);1===c.length&&F(c[0])&&(c=c[0]);var e=c.length,f=g.async.deferred(),h=f.promise(),a=b.when.apply(b,c).done(function(){f.resolveWith(this&&this.promise&&this.promise()===a?f:this,u(arguments))}).fail(function(){f.rejectWith(this,u(arguments))});if(a.progress)a.progress(function(){f.notifyWith(this===a?h:this,u(arguments))});else{for(var d=function(a){return function(b){l[a]=1<arguments.length?
u(arguments):b;f.notifyWith(h,l)}},l=[],v=0;v<e;v++)l[v]=void 0;for(v=0;v<e;v++){var p=c[v];p&&K(p.promise)&&p.progress&&(1<e?p.progress(d(v)):p.progress(function(){f.notifyWith(h,u(arguments))}))}}return h},isPromise:p,loop:function(c,f,e){F(c)||m(5E3);var h=y(),a="number"===b.type(e)?e:20,d=0,l=c.length,v,g=null,r=function(){if(d===l)h.resolve(c);else{var a=f.call(c,d,c[d],g);d++;p(a)?a.done(function(){v()}).fail(function(){h.reject(c)}):v()}},k=function(){setTimeout(function(){var a=d-1;0<d&&h.notify({data:c,
index:a,value:c[a]});r()},0)},t=!1;v=function(){t||(0===d%a?k():r())};var u=!1,g={resume:function(){!u&&t&&(t=!1,v())},pause:function(){t=!0},stop:function(){u=!0;h.resolve(c)}};k();return h.promise()}})})();(function(){function c(b,c){for(var f=0,e=m.length;f<e;f++){var g=m[f];b[g]&&(c[t[g]](b[g]),b[g]=void 0)}}function e(c,f,e){for(var p in f)!f.hasOwnProperty(p)||!e&&K(f[p])||-1!==b.inArray(p,r)||(c[p]=f[p])}function f(b,c){e(this,b,!0);c.promise(this);var f=this.always;this.always=function(){f.apply(this,
arguments);return this}}var r=["error","success","complete"],m=["error","success","complete"],t={success:"done",error:"fail",complete:"always"};g.u.obj.expose("h5",{ajax:function(){function r(b,c,a){e(w,a);n.resolveWith(this,arguments)}function t(c,f,a){if(0===m.retryCount||!1===m.retryFilter.apply(this,arguments))e(w,c),n.rejectWith(this,arguments);else if(m.retryCount--,this.async){var d=this;setTimeout(function(){b.ajax(d).done(r).fail(t)},m.retryInterval)}else b.ajax(this).done(r).fail(t)}var m=
{},p=arguments;D(p[0])?(b.extend(m,p[1]),m.url=p[0]):b.extend(m,p[0]);var m=b.extend({},g.settings.ajax,m),n=g.async.deferred();c(m,n);var p=b.ajax(m),w=new f(p,n);p.done(r).fail(t);return w}})})();(function(){function c(b){y.forEach(function(c){b===c&&m(18008,b)})}function e(b,c,a){a||m(18E3);a.name||m(18001);a.method&&a.method.constructor||m(18002,a.name);var d=a.method.constructor;c&&(d.prototype=Object.create(c._ctor.prototype),d.prototype.constructor=d);var l={constructor:function(){for(var a=
arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return d.apply(this,b)}},e=new u(b,a,d,c,l);d.prototype.__name=a.name;d.prototype._class=e;var p=[{descriptor:a,ctor:d}],g={};if(c){do{p.unshift({descriptor:c._descriptor,ctor:c._ctor});for(var k in c._descriptor.field||{})g[k]="field";for(k in c._descriptor.accessor||{})g[k]="accessor";for(k in c._descriptor.method||{})"constructor"!==k&&(g[k]="method")}while(c=c._parentClass)}c=a.field;var n=a.accessor,r=a.method;for(k in r)if("constructor"!==
k){var t=r[k];"function"!==typeof t&&m(18004,[a.name,k]);("string"===typeof g[k]&&"method"!==g[k]||c&&k in c||n&&k in n)&&m(18009,[a.name,k]);d.prototype[k]=t}if(c)for(var A in c)("string"===typeof g[A]&&"field"!==g[A]||n&&A in n||A in r)&&m(18009,[a.name,A]),k=c[A],t=null,k&&void 0!==k.defaultValue&&(t=k.defaultValue),d.prototype[A]=t;if(n){"_class"in n&&m(18006,[a.name,"_class"]);for(var w in n){("string"===typeof g[w]&&"accessor"!==g[w]||c&&w in c||w in r)&&m(18009,[a.name,w]);var V=n[w];V?Object.defineProperty(d.prototype,
w,{configurable:!1,enumerable:!0,get:V.get,set:V.set}):function(a){Object.defineProperty(d.prototype,a,{configurable:!1,enumerable:!0,get:function(){return this["_p_"+a]},set:function(b){this["_p_"+a]=b}});var b=null;V&&void 0!==V.defaultValue&&(b=V.defaultValue);Object.defineProperty(d.prototype,"_p_"+a,{writable:!0,configurable:!1,enumerable:!1,value:b})}(w)}}p.forEach(function(a){if(a.descriptor.method){var b=a.descriptor.method,d;for(d in b)"constructor"!==d&&(l[d]=b[d])}if(a.descriptor.accessor){var b=
a.descriptor.accessor,c;for(c in b){b=c;d={};var f=Object.getOwnPropertyDescriptor(a.ctor.prototype,b);f.get&&(d.get=f.get);f.set&&(d.set=f.set);Object.freeze(d);l[b]=d}}});Object.freeze(l);f(e,a);return b._classMap[a.name]=e}function f(b,f){var a=f.staticField||{},d=f.staticAccessor||{},l=f.staticMethod||{},e=Object.keys(a).concat(Object.keys(d)).concat(Object.keys(l));e.forEach(function(a){c(a)});for(var g=e.length,p=0;p<g-1;p++)for(var k=p+1;k<g;k++)e[p]===e[k]&&m(18010,[f.name,e[p]]);r(b,a);w(b,
d);t(b,l);Object.seal(b.statics)}function r(b,c){Object.keys(c).forEach(function(a){var d=c[a],f=d&&!0===d.isReadOnly;Object.defineProperty(b._ctor,a,{enumerable:!0,configurable:!1,value:d&&"defaultValue"in d?d.defaultValue:null,writable:!f});d={enumerable:!0,configurable:!1,get:function(){return b._ctor[a]}};f||(d.set=function(d){b._ctor[a]=d});Object.defineProperty(b.statics,a,d)})}function w(b,c){Object.keys(c).forEach(function(a){var d=c[a],f={enumerable:!0,configurable:!1};if(d)f.get=d.get,f.set=
d.set;else{var e=null;f.get=function(){return e};f.set=function(a){e=a}}Object.defineProperty(b._ctor,a,f);Object.defineProperty(b.statics,a,f)})}function t(b,c){Object.keys(c).forEach(function(a){var d=c[a];"function"!==typeof d&&m(18011,[b.getFullName(),a]);d={enumerable:!1,configurable:!1,value:d,writable:!1};Object.defineProperty(b._ctor,a,d);Object.defineProperty(b.statics,a,d)})}function u(b,c,a,d,f){this._descriptor=c;this._ctor=a;this._parentClass=d;this._isCtorChained=!1;this._manager=b;
this._superObject=f;Object.defineProperty(this,"statics",{value:{},writable:!1})}function z(){this._rootClass=null;this._classMap={};this._rootClass=e(this,null,p)}var y="length name displayName arguments prototype caller".split(" ").concat(["extend","getClass"]);b.extend(u.prototype,{extend:function(b){var c=b;"function"===typeof b&&(c=b(this._superObject));return e(this._manager,this,c)},create:function(){!0===this._descriptor.isAbstract&&m(18005,this._descriptor.name);for(var b=Object.create(this._ctor.prototype),
c=arguments.length,a=Array(c),d=0;d<c;d++)a[d]=arguments[d];this._ctor.apply(b,a);!1===this._isCtorChained&&m(18003,this._descriptor.name);return b},getDescriptor:function(){return this._descriptor},getParentClass:function(){return this._parentClass},getFullName:function(){return this._descriptor.name},isClassOf:function(b){return b instanceof this._ctor},getManager:function(){return this._manager}});var p={name:"h5.cls.RootClass",method:{constructor:function(){this._class._isCtorChained=!0},getClass:function(){return this._class}}};
b.extend(z.prototype,{getRootClass:function(){return this._rootClass},getClass:function(b){b=this._classMap[b];return void 0===b?null:b},getNamespaceObject:function(b){b||m(18007);b+=".";var c={},a=this._classMap,d=b.length,f;for(f in a)if(0===f.lastIndexOf(b,0)&&-1===f.indexOf(".",d)){var e=f.substr(d);c[e]=a[f]}return c}});var n=new z,H=n.getRootClass();g.u.obj.expose("h5.cls",{manager:n,RootClass:H})})();(function(){var b=g.cls.RootClass;b.extend(function(b){return{name:"h5.event.EventDispatcher",
field:{_eventListeners:null},method:{constructor:function(){b.constructor.call(this);this._eventListeners={}},hasEventListener:function(b,c){if(!this._eventListeners)return!1;var e=this._eventListeners[b];if(!e||!this._eventListeners.hasOwnProperty(b))return!1;for(var g=0,m=e.length;g<m;g++)if(e[g]===c)return!0;return!1},addEventListener:function(b,c){(2>arguments.length||!D(b))&&m(ERR_CODE_INVALID_ARGS_ADDEVENTLISTENER);null==c||this.hasEventListener(b,c)||(this._eventListeners.hasOwnProperty(b)||
(this._eventListeners[b]=[]),this._eventListeners[b].push(c))},removeEventListener:function(b,c){if(this.hasEventListener(b,c))for(var e=this._eventListeners[b],g=0,m=e.length;g<m;g++)if(e[g]===c){e.splice(g,1);break}},dispatchEvent:function(b){var c=this._eventListeners[b.type];if(c){c=c.slice(0);b.target||(b.target=this);b.timeStamp||(b.timeStamp=(new Date).getTime());for(var e=0,g=c.length;e<g&&!b.isImmediatePropagationStopped();e++)K(c[e])?c[e].call(b.target,b):c[e].handleEvent&&c[e].handleEvent(b);
return b.defaultPrevented}}}}});b.extend(function(b){return{name:"h5.event.Event",field:{target:null,timeStamp:null,_type:null,_defaultPrevented:null,_isImmediatePropagationStopped:null},accessor:{type:{get:function(){return this._type}},defaultPrevented:{get:function(){return this._defaultPrevented}}},method:{constructor:function(c){b.constructor.call(this);this._type=c;this._isImmediatePropagationStopped=this._defaultPrevented=!1},preventDefault:function(){this._defaultPrevented=!0},isDefaultPrevented:function(){return this._defaultPrevented},
stopImmediatePropagation:function(){this._isImmediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this._isImmediatePropagationStopped}}}}).extend(function(b){return{name:"h5.event.PropertyChangeEvent",field:{_propertyName:null,_oldValue:null,_newValue:null},accessor:{propertyName:{get:function(){return this._propertyName}},oldValue:{get:function(){return this._oldValue}},newValue:{get:function(){return this._newValue}}},method:{constructor:function(c,g,w){b.constructor.call(this,
"propertyChange");null==c&&m(90001);this._propertyName=c;this._oldValue=void 0!==g?g:null;this._newValue=void 0!==w?w:null}}}})})();(function(){function c(b,a){this.id=b;this.content=a}function e(b,a,d){this.url=b;this.path=a;this.content=d}function f(b){this._resourceKey=b}function m(b){function a(b,d){if(0!==d.indexOf("../"))return b+d;d=d.slice(3);b=b.replace(/[^\/]+?\/$/,"");return a(b,d)}var d=g.settings.res.baseUrl;if(b===ga(b)||0===b.indexOf("/"))return b;if(!d)return 0===b.indexOf("./")?b:
"./"+b;g.u.str.endsWith(d,"/")||(d+="/");return a(d,b)}function w(b,a,d){void 0===d&&K(b)&&(d=b,b=void 0);u.unshift({type:b,test:a,resolver:d})}var t=g.async.deferred,u=[],z={},y={},p=[],n=null,H={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(b){this.cacheUrls.length>=this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);var a=b.url;this.cache[a]=b;this.cacheUrls.push(a)},clearCache:function(b,a){var d=ga(b);a||delete this.cache[d];for(var c=0,e=this.cacheUrls.length;c<e;c++)if(this.cacheUrls[c]===
d){this.cacheUrls.splice(c,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(b){var a=this.cache[b];this.clearCache(b,!0);this.cacheUrls.push(b);return a},loadResourceFromPath:function(b){var a=ga(b);if(this.accessingUrls[a])return this.accessingUrls[a];var d=t(),c=d.promise();this.accessingUrls[a]=c;var f=this;g.ajax(b,{dataType:"text"}).done(function(c,l,g){delete f.accessingUrls[a];c=new e(a,b,g.responseText);f.append(c);d.resolve(c)}).fail(function(c){delete f.accessingUrls[a];
d.reject(ka(17E3,[c.status,a],{url:a,path:b,error:c}))});return c}},G={load:function(b){var a=ga(b);return H.cache[a]?t().resolve(H.getResourceFromCache(a)).promise():H.loadResourceFromPath(b)},clearCache:function(b){H.clearCache(b)},clearAllCache:function(){H.clearAllCache()}};b.extend(f.prototype,{resolve:function(c){function a(a){for(var d=0,e=u.length;d<e;d++)if(!c||c===u[d].type){var f=u[d].test;if(!c&&f)if("regexp"===b.type(f)){if(!f.test(a))continue}else if(!1===f(a))continue;return u[d].resolver(a,
c)}return!1}if(!F(this._resourceKey))return a(this._resourceKey);for(var d=this._resourceKey,e=[],f=0,p=d.length;f<p;f++){var n=a(d[f]);e.push(n)}var k=g.async.deferred();la(e,function(b){F(b)||(b=[b]);b.unshift(b.slice(0));k.resolveWith(k,b)},function(b){k.reject(b)});return k.promise()},getKey:function(){return this._resourceKey}});w("namespace",null,function(b){var a=z[b]||g.u.obj.getByPath(b);if(a)return t().resolve(a).promise();if(y[b])return y[b].deferred.promise();var a=m(b.replace(/\./g,"/"))+
".js",d=t(),c=g.settings.res.resolveTimeout,e=null;0<c&&(e=setTimeout(function(){y[b]&&(delete y[b],d.reject(ka(17001,[b])))},c));y[b]={deferred:d,timer:e};g.u.loadScript(a).done(function(){var a=z[b]||g.u.obj.getByPath(b);a&&y[b]&&(z[b]=a,delete y[b],clearTimeout(e),d.resolve(a))}).fail(function(a){clearTimeout(e);delete y[b];d.reject(a)});return d.promise()});w("ejsfile",/.*\.ejs(\?.*$|$)/,function(e){var a=t();G.load(m(e)).done(function(d){var e=b(d.content).filter(function(){return 1===this.nodeType&&
0!==this.tagName.indexOf("/")}),f=[];0<e.not('script[type\x3d"text/ejs"]').length?a.reject(ka(7011,null,{url:d.url,path:d.path})):(0===e.length&&a.reject(ka(7001,null,{url:d.url,path:d.path})),e.each(function(){var e=b.trim(this.id);e||a.reject(ka(7002,null,{url:d.url,path:d.path}));var l=b.trim(this.innerHTML);f.push(new c(e,l))}),a.resolve({url:d.url,path:d.path,templates:f}))}).fail(function(b){var c=b.detail,c=ka(7003,[c.error.status,c.url],c);b.code=c.code;b.message=c.message;b.detail=b.detail;
a.reject(b)});return a.promise()});w("jsfile",/.*\.js(\?.*$|$)/,function(b){return g.u.loadScript(m(b))});w("cssfile",/.*\.css(\?.*$|$)/,function(b){var a=document.getElementsByTagName("head")[0],d=document.createElement("link");d.type="text/css";d.rel="stylesheet";d.href=m(b);a.appendChild(d);return t().resolve(d).promise()});g.u.obj.expose("h5.res",{dependsOn:function(b){return new f(b)},isDependency:function(b){return b instanceof f},register:function(b,a,d,c){d&&(c?g.u.obj.expose(c,a):g.u.obj.expose(b,
a));z[b]=a;if(d=y[b])delete y[b],b=d.deferred,(d=d.timer)&&clearTimeout(d),p.push({dfd:b,value:a}),n||(n=setTimeout(function(){n=null;for(var b=p.splice(0,p.length),a=0,d=b.length;a<d;a++)b[a].dfd.resolve(b[a].value)},0))},get:function(b){return g.res.dependsOn(b).resolve()}})})();(function(){function c(b){null!=b.style.transform&&(b.style.transform="");null!=b.style.mozTansform&&(b.style.mozTansform="");null!=b.style.webkitTansform&&(b.style.webkitTansform="")}function e(b,a,d,c){if(!La){La={};b=
new Oa(null,"a");for(var q in b)b.hasOwnProperty(q)&&"__name"!==q&&"__templates"!==q&&"__meta"!==q&&(La[q]=1);b=Oa.prototype;for(q in b)b.hasOwnProperty(q)&&(La[q]=null)}for(var e in d)e in La&&m(6011,[c,e],{controllerDefObj:d})}function f(a,d){function c(q,e){-1!==b.inArray(q,e)&&m(6009,[d],{controllerDefObj:a});G(q,function(b){c(b,e.concat([q]))},!0)}c(a,[])}function r(a){function d(c,q){-1!==b.inArray(c,q)&&m(6010,[a.__name],{logicDefObj:a});h(c,function(b){d(b,q.concat(c))})}d(a,[])}function w(a,
d,c){null==a&&m(6001,[c],{controllerDefObj:d});D(a)||"object"===typeof a||m(6030,[c],{controllerDefObj:d});a=b(a);0===a.length&&m(6003,[c],{controllerDefObj:d});1<a.length&&m(6004,[c],{controllerDefObj:d});9!==a[0].nodeType&&1!==a[0].nodeType&&m(6034,[c],{controllerDefObj:d})}function t(b,a,d,c,q){this.controller=b;this.event=a;this.evArg=d;this.selector=c;this.selectorType=q}function u(b){if(!qa(this)&&this.__controllerContext.executeListeners)return b.proceed()}function z(b,a,d){var c=y(b.__name,
a);d&&c.push(u);return p(b[a],a,c)}function y(b,a){var d=[],c=g.settings.aspects;if(!c||0===c.length)return d;for(var c=Q(c),q=c.length-1;-1<q;q--){var e=c[q];if(!e.target||e.compiledTarget.test(b)){var f=e.interceptors;if(!e.pointCut||e.compiledPointCut.test(a))if(F(f))for(e=f.length-1;-1<e;e--)d=d.concat(f[e]);else d.push(f)}}return d}function p(b,a,d){for(var c=function(b,a,d){return function(){var c=this;return d.call(c,{target:c,func:b,funcName:a,args:arguments,proceed:function(){return b.apply(c,
this.args)}})}},q=0,e=d.length;q<e;q++)b=c(b,a,d[q]);return b}function n(b,a,d){if(d&&"rootElement"===b)return d.rootElement;for(var c=["window","document","navigator"],q=0,e=c.length;q<e;q++){var f=c[q];if(b===f||Za(b,f+"."))return g.u.obj.getByPath(b,ea(a))}return d&&Za(b,"this.")?g.u.obj.getByPath(b.slice(5),d):b}function H(b,a){return b.hasOwnProperty(a)&&Pa(a,"Logic")}function G(b,a,d){if(d){var c=xa.get(b.__name);if(c)for(d=0,e=c.childControllerProperties.length;d<e;d++){var q=c.childControllerProperties[d];
if((f=b[q])&&!1===a(b[q],b,q))return!1}else for(q in b){var c=b,e=q,f=d,l=c[e];if(Pa(e,"Controller")&&"rootController"!==e&&"parentController"!==e&&l&&(f||l.__controllerContext&&!l.__controllerContext.isRoot&&(!l.parentController||l.parentController===c))&&!1===a(b[q],b,q))return!1}}else if(!qa(b)){q=b.__controllerContext.childControllers;d=0;for(var e=q.length;d<e;d++){var f=q[d];if(!1===a(f,b))return!1}}}function h(b,a){var d=xa.get(b.__name);if(d)for(var c=0,q=d.logicProperties.length;c<q;c++){var e=
d.logicProperties[c];if(!1===a(b[e],b,e))return!1}else for(e in b)if(H(b,e)&&!1===a(b[e],b,e))return!1}function a(b,d,c,q){return!1===d.call(this,b,c,q)?!1:G(b,function(b,c,q){if(!1===a(b,d,c,q))return!1})}function d(b,a,c,q){if(!1===G(b,function(b,c,q){if(!b||!1===d(b,a,c,q))return!1})||!1===a.call(this,b,c,q))return!1}function l(b,a){var d=[];G(b,function(b){(b=b[a])&&d.push(b)});return d}function v(b){var a=b.__controllerContext.cache.bindMap,d=S(b.rootElement),c;for(c in a)for(var q=L(b,a[c],
b[c]),e=0,f=q.length;e<f;e++)fa(q[e],d)}function L(a,d,c){function q(a){var d=a.handler,c=a.controller;a.originalHandler||(a.originalHandler=d);a.handler=function(){var q=a.isNativeBind||1!==g.settings.listenerElementType?this:b(this);d.call(c,W(a,arguments),q)}}var e=d.selector,f=d.eventName,l=d.bindTarget,E=d.isGlobal,x=d.isBindRequested;switch(f){case "mousewheel":c=Y(a,f,c);break;case "h5trackstart":case "h5trackmove":case "h5trackend":c=R(a,f,c);var h=a.__controllerContext,f=!1;h.h5trackEventHandlerInfos=
h.h5trackEventHandlerInfos||[];for(var B=h.h5trackEventHandlerInfos,h=0,p=B.length;h<p;h++){var k=B[h];if(l){if($a(l,k.bindTarget)){f=!0;break}}else if(e===k.selector&&E===k.isGlobal&&x===k.isBindRequested){f=!0;break}}f||(c=X(a).concat(c),B.push(d));break;default:c=I(a,f,c)}F(c)||(c=[c]);h=0;for(p=c.length;h<p;h++)d=c[h],q(d),d.isBindRequested=x,d.isGlobal=E,d.bindTarget=l,d.selector=e,d.controller=a;return c}function fa(a,d){var c=a.controller,q=c.rootElement,e=a.selector,f=a.eventName,l=a.handler,
E=a.isBindRequested,h=a.isGlobal;a.bindTarget?(a.evSelectorType=Ma.SELECTOR_TYPE_OBJECT,ga(a)):h?(c=n(e,d,c),E||!D(c)?(a.evSelectorType=Ma.SELECTOR_TYPE_OBJECT,a.bindTarget=D(c)?b(c):c,ga(a)):(a.evSelectorType=Ma.SELECTOR_TYPE_GLOBAL,b(d).delegate(c,f,l)),a.evSelector=c):(a.evSelectorType=Ma.SELECTOR_TYPE_LOCAL,a.evSelector=e,E?(a.bindTarget=b(e,q),ga(a)):b(q).delegate(e,f,l));a.isBindCanceled||(a.controller.__controllerContext.boundHandlers.push(a),Ta&&"h5trackstart"===f&&null!=g.settings.trackstartTouchAction&&
(h?b(a.evSelector,d):b(a.evSelector,q)).each(function(){this.style[Va]=g.settings.trackstartTouchAction}))}function k(a,d,c){var q=a.controller,e=q.rootElement,f=a.selector,l=a.handler,E=a.eventName,h=a.isGlobal;if(a.bindTarget)d=a.bindTarget,e=a.eventName,f=a.handler,a.isNativeBind?d.removeEventListener(e,f):b(d).unbind(e,f);else if(h){if(null==ea(d))return;b(d).undelegate(f,E,l)}else b(e).undelegate(f,E,l);c||(c=q.__controllerContext.boundHandlers,c.splice(b.inArray(a,c),1))}function N(b,d){a(b,
function(b){b.__controllerContext.executeListeners=d})}function T(b,a,d){return function(){var c=null,q=b[a],e=b.__name,f=!1,f="__init"===a?b.isInit:"__postInit"===a?b.isPostInit:b.isReady;if(!f&&q)try{c=b[a]({args:b.__controllerContext.args})}catch(l){ca(b,l)}c&&K(c.done)&&K(c.fail)?c.done(d).fail(function(){var a=ka(6033,e,Ba(arguments));ca(b.rootController,null,a)}):d()}}function Z(b,d){function c(a){var q,e;"__init"===d?(q=V(a),e=[a.preInitPromise],a.parentController&&e.push(a.parentController.initPromise)):
"__postInit"===d?(q=oa(a),e=A(a)):(q=Ua(a),e=C(a));var f=b.__controllerContext;f.waitingPromisesManagerMap=f.waitingPromsiesManager||{};f.waitingPromisesManagerMap[d]=la(e,T(a,d,q))}Ca(b)||a(b,c)}function A(b){var a=l(b,"postInitPromise");a.push(b.initPromise);return a}function C(b){var a=l(b,"readyPromise");a.push(b.postInitPromise);return a}function V(d){return function(){function c(){var b=!0;a(d.rootController,function(a){return b=a.isInit});return b}if(!na(d))if(d.isInit)c()&&q(d.rootController);
else{d.isInit=!0;var e=d.__controllerContext.initDfd;delete d.__controllerContext.templatePromise;delete d.__controllerContext.preInitDfd;delete d.__controllerContext.initDfd;var f=d.rootElement;try{var l=d.__meta,E=d.__controllerContext.childControllers,h;for(h in l)-1!==b.inArray(d[h],E)&&(d[h].__controllerContext.metaRootElement=l[h]&&l[h].rootElement);G(d,function(b,a){var c=b.__controllerContext.metaRootElement;delete b.__controllerContext.metaRootElement;b.rootElement||(c=c?M(c,b,d):f,w(c,b.__controllerContext.controllerDef,
b.__name),b.rootElement=c,b.view.__controller=b)})}catch(g){ca(d,g);return}l=c();e.resolveWith(d);!na(d)&&l&&q(d.rootController)}}}function oa(d){return function(){if(!na(d)){d.isPostInit=!0;var c=d.__controllerContext;c.waitingPromsiesManager=c.waitingPromsiesManager||{};c.waitingPromsiesManager.__postInit=la(A(d),function(){if(!na(d)){var q=c.postInitDfd;if(q&&(delete c.postInitDfd,q.resolveWith(d),!na(d)&&!c.isExecutedBind))if(c.isRoot){var q=d.__meta,e=c.childControllers,f;for(f in q)-1!==b.inArray(d[f],
e)&&(d[f].__controllerContext.metaUseHandlers=q[f]&&q[f].useHandlers);a(d,function(b,a){var d=b.__controllerContext.metaUseHandlers;delete b.__controllerContext.metaUseHandlers;b.__controllerContext.isExecutedBind||(b.__controllerContext.isExecutedBind=!0,!1!==d&&v(b))});if(!1!==c.managed&&(b(d.rootElement).trigger("h5controllerbound",d),na(d)))return;Da(d)}else d.rootController.isPostInit&&(d.parentController.__meta&&!1===d.parentController.__meta.userHandlers||v(d),Da(d.rootController))}})}}}function Ua(a){return function(){if(!na(a)){a.isReady=
!0;var d=a.__controllerContext;d.waitingPromsiesManager=d.waitingPromsiesManager||{};d.waitingPromsiesManager.__ready=la(C(a),function(){if(!na(a)){var c=d.readyDfd;c&&(delete d.readyDfd,c.resolveWith(a),!na(a)&&d.isRoot&&b(a.rootElement).trigger("h5controllerready",a))}})}}}function da(a,d){if(!D(a))return b(a);var c=b.trim(a);return Fa.test(c)?(c=b.trim(c.substring(1,c.length-1)),b(n(c,S(d.rootElement),d))):b(d.rootElement).find(a)}function I(b,a,d){return{controller:b,eventName:a,handler:d}}function Y(b,
a,d){return{controller:b,eventName:"undefined"===typeof document.onmousewheel?"DOMMouseScroll":a,handler:function(a){var c=a.event;null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.wheelDelta&&(c.wheelDelta=c.originalEvent.wheelDelta);null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.detail&&(c.wheelDelta=40*-c.originalEvent.detail);d.call(b,a)}}}function R(a,d,c){var q=null;if("h5trackstart"===d)return I(a,d,c);q=I(a,d,function(a){var d=a.event;if(d&&null==d.offsetX&&null==d.offsetY){var q=
d.h5DelegatingEvent;if(!q)return c.apply(this,arguments);q=q.type;if("mousemove"===q||"mouseup"===q)q=b(d.currentTarget).offset()||{left:0,top:0},d.offsetX=d.pageX-q.left,d.offsetY=d.pageY-q.top}c.apply(this,arguments)});q.originalHandler=c;return q}function X(a,d){function c(b,a){for(var d in b)b.hasOwnProperty(d)&&!a[d]&&"target"!==d&&"currentTarget"!==d&&"originalEvent"!==d&&"liveFired"!==d&&(a[d]=b[d]);a.h5DelegatingEvent=b}function q(d,e,f){return function(g){var x;a:{switch(d){case "touchstart":case "mousedown":x=
"h5trackstart";break a;case "touchmove":case "mousemove":x="h5trackmove";break a;case "touchend":case "mouseup":x="h5trackend";break a}x=void 0}var B="h5trackstart"===x;if(!B||!h){var p=0===g.event.type.indexOf("touch");p&&ma(g.event,d);var k=new b.Event(x);c(g.event,k);var n=g.event.target;e&&(n=e);f&&f(k);var J=g.event.originalEvent||g.event;B&&-1===b.inArray(J,ya)&&(ya=[],Ea=[]);var ca=b.inArray(J,ya);-1===ca&&(ca=ya.push(J)-1,Ea[ca]=!1);Ea[ca]||p&&!h&&!B||(Ea[ca]=!0,b(n).trigger(k,g.evArg),h=
!0);g.event.currentTarget===document&&("h5trackend"===x&&(ya=[],Ea=[]),-1!==b.inArray(J,ya)&&(ya.splice(ca,1),Ea.splice(ca,1)));if(B&&h){k.isDefaultPrevented()||k.h5DelegatingEvent.preventDefault();x=k.target;var m=k.clientX,v=k.clientY,A=p?"touchmove":"mousemove",Ka=p?"touchend":"mouseup",U=q(A,x,function(b){var a=b.clientX,d=b.clientY;b.dx=a-m;b.dy=d-v;m=a;v=d}),t=q(Ka,x),r=function(b){g.event=b;g.evArg=aa(arguments);U(g)},M=function(b){g.event=b;g.evArg=aa(arguments);t(g)},u=p?b(x):l;E=function(){ya=
[];Ea=[];u.unbind(A,r);u.unbind(Ka,M);p||a.rootElement===document||(b(a.rootElement).unbind(A,r),b(a.rootElement).unbind(Ka,M))};u.bind(A,r);u.bind(Ka,M);p||a.rootElement===document||(b(a.rootElement).bind(A,r),b(a.rootElement).bind(Ka,M))}else"h5trackend"===x&&(E(),h=!1)}}}function e(b){return{controller:a,selector:d,eventName:b,handler:q(b),isInnerBindObj:!0}}var f="undefined"!==typeof document.ontouchstart,l=b(S(a.rootElement)),E=null,h=!1,g=[e("mousedown")];f&&g.push(e("touchstart"));return g}
function P(a){if("svg"!==a.tagName.toLowerCase()||db())return b(a).offset();var d=S(a).createElementNS("http://www.w3.org/2000/svg","rect"),q=a.viewBox,e=q.baseVal.y;d.setAttribute("x",q.baseVal.x);d.setAttribute("y",e);d.setAttribute("width",1);d.setAttribute("height",1);c(d);a.appendChild(d);q=b(d).offset();a.removeChild(d);return q}function ma(b,a){var d=b.originalEvent;if(d){var c="touchend"===a||"touchcancel"===a?d.changedTouches[0]:d.touches[0],q=c.pageX,e=c.pageY;b.pageX=d.pageX=q;b.pageY=
d.pageY=e;b.screenX=d.screenX=c.screenX;b.screenY=d.screenY=c.screenY;b.clientX=d.clientX=c.clientX;b.clientY=d.clientY=c.clientY;c=b.target;if(c.ownerSVGElement)c=c.farthestViewportElement;else if(c===window||c===document)c=document.body;b&&null==b.offsetX&&null==b.offsetY&&(c=P(c),e-=c.top,b.offsetX=d.offsetX=q-c.left,b.offsetY=d.offsetY=e)}}function aa(b){return 3>b.length?b[1]:Ba(b).slice(1)}function W(b,a){var d=null,c=null;a&&(d=a[0],c=aa(a));var q=d;if(q&&null==q.offsetX&&null==q.offsetY&&
q.pageX&&q.pageY){var e=q.target;if(e.ownerSVGElement)e=e.farthestViewportElement;else if(e===window||e===document)e=document.body;e=P(e);q.offsetX=q.pageX-e.left;q.offsetY=q.pageY-e.top}return new t(b.controller,d,c,b.evSelector,b.evSelectorType)}function eb(b){a(b,function(b){b.rootElement=null;b.view.__controller=null})}function M(a,d,c){null==a&&m(6001,[d.__name]);D(a)||"object"===typeof a||m(6030,[d.__name]);a=c?da(a,c):b(a);0===a.length&&m(6003,[d.__name]);1<a.length&&m(6004,[d.__name]);return a.get(0)}
function Da(a){var d=a.__controllerContext.managed,c=za.controllers;-1===b.inArray(a,c)&&!1!==d&&c.push(a);a.__controllerContext.triggerReadyExecuted=!0;Z(a,"__ready")}function ba(b,a){!1===a?Z(b,"__init"):setTimeout(function(){na(b)||!b.__controllerContext.isRoot&&b.rootController.readyDfd||Z(b,"__init")},0)}function q(b){b.__controllerContext.triggerPostInitExecuted=!0;Z(b,"__postInit")}function x(b,d){a(b,function(b){var a=sa();a.resolve();var c=b.__controllerContext;c.templatePromise=a.promise();
c.initDfd=sa();c.postInitDfd=sa();c.readyDfd=sa();c.isUnbinding=!1;c.isUnbinded=!1;c.isExecutedBind=!1;c.triggerPostInitExecuted=!1;c.triggerReadyExecuted=!1;c.args=d;b.initPromise=c.initDfd.promise();b.postInitPromise=c.postInitDfd.promise();b.readyPromise=c.readyDfd.promise();b.isInit=!1;b.isPostInit=!1;b.isReady=!1})}function J(a,d){var c=null,q=d;b.isPlainObject(q)?c=q.target:q={};c=c?da(c,a):a.rootElement;return g.ui.indicator.call(a,c,q)}function U(b,a){var c=[],q=null;d(b,function(b){if(b[a]&&
K(b[a])){try{var d=b[a]()}catch(e){q=q||e}Ja(d)&&c.push(d)}});if(q)throw q;return c}function ca(b,a,c){function q(){var b=a||c||h||x;d(f,function(a){a.view&&a.view.__view&&a.view.__view.clear();if(b)a.__controllerContext.isDisposed=1;else for(var d in a)a.hasOwnProperty(d)&&(a[d]=null)});x?g.rejectWith(f,[x]):g.resolveWith(f);if(b&&(za.dispatchEvent({type:"lifecycleerror",detail:b,rootController:f}),a||h))throw a||h;}function e(){x=h||ka(6038,f.__name,Ba(arguments));q()}var f=b.__controllerContext&&
(b.__controllerContext.isRoot?b:b.rootController);if(!f){if(a)throw a;}else if(!Ca(f)){f.__controllerContext.isDisposing=1;try{Ga(f,c||a)}catch(l){a=a||l}var E,h=null;try{E=U(f,"__dispose")}catch(l){a=a||l,h=h||l}var g=f.deferred(),x=null;h?e():la(E,q,e,!0);return g.promise()}}function Ga(d,c){if(!na(d)){d.__controllerContext.isUnbinding=1;fb(d,c);var q;try{U(d,"__unbind")}catch(e){q=e}a(d,function(b){var a=b.rootElement;if(a){for(var a=S(a),d=b.__controllerContext.boundHandlers,c=0,q=d.length;c<
q;c++)k(d[c],a,!0);b.__controllerContext.boundHandlers=[]}});d.__controllerContext.unbindList={};za.controllers=b.grep(za.controllers,function(b){return b!==d});d.isPostInit&&!1!==d.__controllerContext.managed&&b(d.rootElement).trigger("h5controllerunbound",d);eb(d);d.__controllerContext.isUnbinded=1;if(q)throw q;}}function ha(b,a){return a.view.__view.isAvailable(b)?a.view.__view:a.parentController?ha(b,a.parentController):g.core.view}function qa(b){return!b.__controllerContext||b.__controllerContext.isDisposed}
function Ca(b){return qa(b)||b.__controllerContext.isDisposing}function na(b){b=b.__controllerContext&&b.__controllerContext.isRoot?b:b.rootController;return!b||qa(b)||b.__controllerContext.isUnbinding||b.__controllerContext.isUnbinded}function fb(b,d){var c=["postInitDfd","readyDfd"],q=[];a(b,function(b){q.push(b);var a=b.__controllerContext.initDfd;!a||va(a)||Aa(a)||a.rejectWith(b,[d])});for(var e=0,f=c.length;e<f;e++)for(var l=c[e],E=q.length-1;0<=E;E--){var h=q[E],g=h.__controllerContext[l];!g||
va(g)||Aa(g)||g.rejectWith(h,[d])}}function ta(b,a){for(var d=b.childNodes,c=0,q=d.length;c<q;c++){var e=d[c];if(1===e.nodeType){if(e=ta(e,a))return e}else if(8===e.nodeType){var f=e.nodeValue;if(0===f.indexOf("{h5view ")){var l=f.indexOf("}");if(-1!==l&&(f=f.slice(0,l).match(/id="([A-Za-z][\w-:\.]*)"/))&&f[1]===a)return e}}}return null}function ab(b){var a=this;return function(){return b.apply(a,arguments)}}function bb(b){var a=this;return function(){var d=g.u.obj.argsToArray(arguments);d.unshift(this);
return b.apply(a,d)}}function E(b,a,d){function c(q){g.u.obj.getByPath("h5.core.view")||m(6029);d=F(d)?d:[d];for(var e=[],f=0,l=d.length;f<l;f++){var E=Ha(d[f])?d[f]:g.res.dependsOn(d[f]);e.push(E.resolve("ejsfile"))}la(e,function(d){d=F(d)?d:[d];for(var c=0,q=d.length;c<q;c++)for(var e=d[c].templates,f=0,l=e.length;f<l;f++)try{b.view.__view.register(e[f].id,e[f].content)}catch(E){a.reject(E)}a.resolve()},function(b){var d=b.detail.error.status;q===g.settings.dynamicLoading.retryCount||0!==d&&12029!==
d?setTimeout(function(){a.reject(b)},0):setTimeout(function(){c(++q)},g.settings.dynamicLoading.retryInterval)})}c(0)}function B(a,d,c,q){var e=D(a),f=e?null:a;a=e?b.trim(a):null;d=b.trim(d);var l=!e||Fa.test(a),E=Ia.test(d);E&&(d=b.trim(b.trim(d.substring(1,d.length-1))));e&&l&&(a=b.trim(a.substring(1,a.length-1)),"this"===a&&m(6012,[c.__name],{controllerDef:c}));return{selector:a,bindTarget:f,isGlobal:l,isBindRequested:E,eventName:d,propertyKey:q}}function Na(){this.logicProperties=[];this.eventHandlerProperties=
[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=[]}function gb(a){var d=new Na,c=d.logicProperties,q=d.eventHandlerProperties,e=d.functionProperties,f=d.otherProperties,l=d.bindMap,E=d.childControllerProperties,h={},g;for(g in a){var x=a,p=g;if(-1!==p.indexOf(" ")&&K(x[p])){q.push(g);var x=b.trim(g),p=x.lastIndexOf(" "),x=B(x.substring(0,p),x.substring(p+1,x.length),a,g),p=x.selector,k=x.eventName,n=x.isGlobal,J=x.isBindRequested;h[p]||(h[p]={});
h[p][k]||(h[p][k]={});h[p][k][n]||(h[p][k][n]={});h[p][k][n][J]?m(6013,[a.__name,p,k],{controllerDef:a}):h[p][k][n][J]=1;l[g]=x}else Pa(g,"Controller")&&a[g]&&!K(a[g])?E.push(g):Pa(g,"Logic")&&a[g]&&!K(a[g])?c.push(g):K(a[g])?e.push(g):f.push(g)}return d}function hb(){this.logicProperties=[];this.functionProperties=[]}function ib(b){var a=new hb,d=a.functionProperties,c=a.logicProperties,q;for(q in b)H(b,q)?c.push(q):K(b[q])&&d.push(q);return a}function jb(a,d){function c(a,d,q){d=d.__logicContext.waitingPromises=
d.__logicContext.waitingPromises||[];-1===b.inArray(a,d)&&(d.push(a),a.done(q))}function q(f,l){function E(){if(!f.__logicContext.isCalledReady){var q=!0;h(f,function(b){return q=b.__logicContext.isReady});if(q){var l=K(f.__ready)&&f.__ready();f.__logicContext.isCalledReady=!0;Ja(l)?(e.push(l),l.done(function(){f.__logicContext.isReady=!0;e.splice(b.inArray(l,e),1);f.__logicContext.waitingPromises=null;f===a&&d.resolveWith(f)})):(f.__logicContext.isReady=!0,f.__logicContext.waitingPromises=null,f===
a&&d.resolveWith(f))}else for(var g=0,x=e.length;g<x;g++)c(e[g],f,E)}}f.__logicContext.isReady=!1;f.__logicContext.isCalledReady=!1;h(f,q);E()}var e=[];q(a)}function $a(b,a){if(b===a)return!0;var d=Wa(b),c=Wa(a);if(!d&&!c)return!1;d=d?b.toArray():[b];c=c?a.toArray():[a];if(d.length!==c.length)return!1;for(var q=0,e=d.length;q<e;q++)if(d[q]!==c[q])return!1;return!0}function ia(b,a){b&&b.rootElement||m(6035,a)}function ja(b,a){b&&!qa(b)||m(6036,a)}function ga(a){var d=a.bindTarget,c=a.eventName,q=a.handler;
d&&"undefined"!==typeof d.nodeType||Ya(d)||Wa(d)?b(d).bind(c,q):d&&d.addEventListener?(d.addEventListener(c,q),a.isNativeBind=!0):a.isBindCanceled=!0}function pa(b,d){d.parentController=b;b.__controllerContext.childControllers.push(d);d.__controllerContext.isRoot=!1;if(b.__controllerContext.isExecutedConstruct){var c=b.rootController;a(d,function(b){b.rootController=c})}}function cb(b){this.__controller=b;g.u.obj.getByPath("h5.core.view")&&(this.__view=g.core.view.createView())}function Oa(a,d,c,
q,e){for(var f=0,l=Xa.length;f<l;f++)Xa[f](this);this.__name=d;this.__templates=null;this.rootElement=a;this.__controllerContext={executeListeners:!0,isRoot:e,boundHandlers:[],controllerDef:c,args:null};(a=c&&c.__defaultArgs)?this.__controllerContext.args=b.extend({},a,q):q&&(this.__controllerContext.args=q);this.isReady=this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=g.log.createLogger(d);
this.view=new cb(this)}function ra(){this.rootElement=document;this.controllers=[];b(document).bind("triggerIndicator",function(b,a){null==a.target&&(a.target=document);a.indicator=J(this,a);b.stopPropagation()})}function ua(){this._init()}function Qa(a,d,c,q){var l=!q||!q.isInternal;if(!l&&qa(q.rootController))return null;var g=d.__name;D(g)&&0!==b.trim(g).length||Ha(d)||m(6006,null,{controllerDefObj:d});c&&!b.isPlainObject(c)&&m(6007,[g],{controllerDefObj:d});d.__controllerContext&&m(6008,null,
{controllerDefObj:d});d.__defaultArgs&&(b.isPlainObject(d.__defaultArgs)||m(6046,[g],{controllerDefObj:d}));var h=xa.get(g);h||e(l,a,d,g);l&&f(d,g);h||(h=gb(d),xa.register(g,h));l&&w(a,d,g);var x=new Oa(a?b(a).get(0):null,g,d,c,l),p=l?x:q.rootController,k=sa(),g=k.promise().fail(Ra),B=sa(),n=B.promise().fail(Ra),J=sa(),v=J.promise().fail(Ra),A=sa(),U=A.promise(),t=q&&q.async;!1===t&&(k.resolve(),B.resolve(),J.resolve(),A.resolve());l||U.fail(Ra);a=x.__controllerContext;a.cache=h;a.preInitDfd=k;a.initDfd=
B;a.postInitDfd=J;a.readyDfd=A;x.preInitPromise=g;x.initPromise=n;x.postInitPromise=v;x.readyPromise=U;a.childControllers=[];for(var r=l?[]:q.promisesForTriggerInit,B=0,n=h.logicProperties.length;B<n;B++)J=h.logicProperties[B],g=d[J],Ha(g)?(v=g.resolve("namespace"),r.push(v),v.done(function(a,d){return function(c){c=wa(c);x[a]=c;r.splice(b.inArray(d,r),1);r.push(c.readyPromise);c.readyPromise.done(function(a){return function(){r.splice(b.inArray(a,r),1)}}(c.readyPromise))}}(J,v))):x[J]=wa(g);g=b.extend(!0,
{},d);d=d.__templates;B=sa();n=B.promise();Ha(d)||d&&0<d.length?E(x,B,d):B.resolve();n.done(function(){Ca(x)||k.resolveWith(x)}).fail(function(b){k.rejectWith(x,[b]);ca(x,null,b)});B=0;for(n=h.eventHandlerProperties.length;B<n;B++)J=h.eventHandlerProperties[B],x[J]=z(g,J,!0);B=0;for(n=h.functionProperties.length;B<n;B++)J=h.functionProperties[B],x[J]=z(g,J);B=0;for(n=h.otherProperties.length;B<n;B++)J=h.otherProperties[B],x[J]=g[J];a.managed=q&&q.managed;try{if(x.__construct&&x.__construct({args:x.__controllerContext.args}),
Ca(x))return null}catch(M){return ca(p,M),null}l?(x.rootController=x,x.parentController=null):(x.parentController=q.parentController,x.rootController=q.rootController);if(x.__controllerContext.childControllers)for(B=0,q=x.__controllerContext.childControllers,n=q.length;B<n;B++)q[B].rootController=x.rootController;x.__controllerContext.isExecutedConstruct=!0;q=x.__meta;B=0;for(n=h.childControllerProperties.length;B<n;B++)if(J=h.childControllerProperties[B],d=g[J],a=null,q&&q[J]&&q[J].inheritArgs&&
(a=c),Ha(d))v=d.resolve("namespace"),r.push(v),v.done(function(a,d,c){return function(q){q=Qa(null,b.extend(!0,{},q),c,{isInternal:!0,parentController:x,rootController:p,promisesForTriggerInit:r,async:t});if(null==q)return null;x[a]=q;x.__controllerContext.childControllers.push(q);r.splice(b.inArray(d,r),1)}}(J,v,a));else{a=Qa(null,b.extend(!0,{},g[J]),a,{isInternal:!0,parentController:x,rootController:p});if(null==a)return null;x.__controllerContext.childControllers.push(a);x[J]=a}if(l){var u=function(){0===
r.length?ba(x,t):la(r,u)};la(r,u)}return x}function wa(a){function d(a,c){var q=a.__name;D(q)&&0!==b.trim(q).length||m(6017,null,{logicDefObj:a});a.__logicContext&&m(6018,null,{logicDefObj:a});var e=xa.get(q);e||(c&&r(a),e=ib(a));for(var l=b.extend(!0,{},a),E=e.functionProperties,x=0,h=E.length;x<h;x++){var B=E[x];l[B]=z(l,B)}l.deferred=sa;l.log=g.log.createLogger(q);l.__logicContext={logicDef:a};l.own=ab;l.ownWithOrg=bb;xa.register(q,e);K(l.__construct)&&l.__construct();q=e.logicProperties;x=0;for(h=
q.length;x<h;x++)B=q[x],e=l[B],Ha(e)?(e=e.resolve(),f.push(e),e.done(function(a,c){return function(q){l[a]=d(q);f.splice(b.inArray(c,f),1)}}(B,e))):l[B]=d(e);return l}function c(){0===f.length?jb(l,q):la(f,c)}var q=g.async.deferred(),e=q.promise(),f=[],l=d(a,!0);l.readyPromise=e;la(f,c);return l}var Ma={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},Fa=/^\{.*\}$/,Ia=/^\[.*\]$/,sa=g.async.deferred,Ja=g.async.isPromise,Za=g.u.str.startsWith,Pa=g.u.str.endsWith,Sa=g.u.str.format,
Ba=g.u.obj.argsToArray,Wa=g.u.obj.isJQueryObject,Ha=g.res.isDependency,Ra=function(){},za,xa,ya=[],Ea=[],Va="",Ta=function(){var a=document.createElement("div");return"undefined"!==typeof a.style.touchAction?(Va="touchAction",!0):"undefined"!==typeof a.style.msTouchAction?(Va="msTouchAction",!0):!1}(),Xa=[],db=function(){var a=null;return function(){if(null!=a)return a;var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("width",1);d.setAttribute("height",1);var q=document.createElementNS("http://www.w3.org/2000/svg",
"rect");q.setAttribute("x",1);q.setAttribute("y",1);q.setAttribute("width",1);q.setAttribute("height",1);c(q);b(function(){document.body.appendChild(d);var b=d.getBoundingClientRect().top;d.appendChild(q);a=b===d.getBoundingClientRect().top;document.body.removeChild(d)});return a}}();b.extend(t.prototype,Ma);b.extend(cb.prototype,{get:function(a,b){ia(this.__controller,"view#get");return ha(a,this.__controller).get(a,b)},update:function(a,b,d){ia(this.__controller,"view#update");a=da(a,this.__controller);
return ha(b,this.__controller).update(a,b,d)},append:function(a,b,d){ia(this.__controller,"view#append");a=da(a,this.__controller);return ha(b,this.__controller).append(a,b,d)},prepend:function(a,b,d){ia(this.__controller,"view#prepend");a=da(a,this.__controller);return ha(b,this.__controller).prepend(a,b,d)},load:function(a){ia(this.__controller,"view#load");return this.__view.load(a)},register:function(a,b){ia(this.__controller,"view#register");this.__view.register(a,b)},isValid:function(a){ia(this.__controller,
"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){ia(this.__controller,"view#isAvailable");return ha(a,this.__controller).isAvailable(a)},clear:function(a){ia(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){ia(this.__controller,"view#getAvailableTemplates");return this.__view.getAvailableTemplates()},bind:function(a,d){ia(this.__controller,"view#bind");var c=a;if(D(a)&&0===a.indexOf("h5view#")){for(var q=ta(this.__controller.rootElement,
a.slice(7)),c=q.nodeValue,c=c.slice(c.indexOf("}")+1),e=b("\x3cdiv\x3e").append(c),c=[],f=e[0].childNodes,l=0,E=f.length;l<E;l++)c.push(f[l]);e.empty();e=document.createDocumentFragment();l=0;for(E=c.length;l<E;l++)e.appendChild(c[l]);q.parentNode.insertBefore(e,q.nextSibling)}return this.__view.bind(c,d)}});b.extend(Oa.prototype,{$find:function(a){ja(this,"$find");ia(this,"$find");return b(this.rootElement).find(a)},deferred:function(){ja(this,"deferred");return sa()},trigger:function(a,d){ja(this,
"trigger");ia(this,"trigger");var c=D(a)?b.Event(a):a;b(this.rootElement).trigger(c,d);return c},own:function(){ja(this,"own");return ab.apply(this,Ba(arguments))},ownWithOrg:function(){ja(this,"ownWithOrg");return bb.apply(this,Ba(arguments))},bind:function(a,b){ja(this,"bind");this.__controllerContext.isRoot||m(6031);this.rootElement=M(a,this);this.view.__controller=this;x(this,b?b:null);ba(this);return this},unbind:function(){ja(this,"unbind");ia(this,"unbind");this.__controllerContext.isRoot||
m(6031);this.__controllerContext.isExecutedConstruct||m(6037);try{Ga(this)}catch(a){ca(this,a)}},dispose:function(){ja(this,"dispose");this.__controllerContext.isRoot||m(6031);return ca(this)},triggerIndicator:function(a){ja(this,"triggerIndicator");ia(this,"triggerIndicator");var d={indicator:null};a&&b.extend(d,a);b(this.rootElement).trigger("triggerIndicator",[d]);return d.indicator},indicator:function(a){ja(this,"indicator");ia(this,"indicator");return J(this,a)},enableListeners:function(){ja(this,
"enableListeners");N(this,!0)},disableListeners:function(){ja(this,"disableListeners");N(this,!1)},throwError:function(a,b){ja(this,"throwError");var d=Ba(arguments);d.unshift(null);this.throwCustomError.apply(this,d)},throwCustomError:function(a,b,d){ja(this,"throwCustomError");2>arguments.length&&m(6005);var c;b&&D(b)?c=Error(Sa.apply(null,Ba(arguments).slice(1))):(c=Error(),c.detail=b);c.customType=a;throw c;},on:function(a,b,d){ja(this,"on");ia(this,"on");a=B(a,b,this);b=y(this.__name,"");b.push(u);
a=L(this,a,p(d,"",b));b=0;for(var c=a.length;b<c;b++){var q=a[b];q.isInnerBindObj||(q.originalHandler=d);fa(q,S(this.rootElement))}},off:function(a,b,d){ja(this,"off");ia(this,"off");var c=B(a,b,this);a=this.__controllerContext.boundHandlers;var q=null,e=c.bindTarget;b=c.eventName;for(var f=c.selector,l=c.isGlobal,c=c.isBindRequested,E=0,x=a.length;E<x;E++){var g=a[E];if(e){if($a(e,g.bindTarget)&&b===g.eventName&&g.originalHandler===d){q=g;break}}else if(f===g.selector&&l===g.isGlobal&&c===g.isBindRequested&&
d===g.originalHandler){q=g;break}}q&&k(q,S(this.rootElement))},manageChild:function(a){ja(this,"manageChild");if(na(this))m(6041);else if(a&&a.__controllerContext)if(na(a))m(6040);else{a.rootController!==a&&m(6042);pa(this,a);var d=za.controllers;a=b.inArray(a,d);-1!=a&&d.splice(a,1)}else m(6039)},unmanageChild:function(a,d){ja(this,"unmanageChild");if(na(this))m(6043);else if(a.parentController!==this)m(6044);else if((d=!1===d?!1:!0)||a.rootElement){a.parentController=null;a.rootController=a;a.__controllerContext.isRoot=
!0;var c=this.__controllerContext.childControllers,e=b.inArray(a,c);-1!==e&&c.splice(e,1);d?a.dispose():(za.controllers.push(a),c=this.__controllerContext.waitingPromisesManagerMap,e=a.__controllerContext.waitingPromisesManagerMap,c&&(c.__postInit&&c.__postInit.remove(a.postInitPromise),c.__ready&&c.__ready.remove(a.readyPromise)),e&&e.__init&&e.__init.remove(this.initPromise),this.rootController.__controllerContext.triggerPostInitExecuted?this.rootController.__controllerContext.triggerReadyInitExecuted||
Da(a):q(a))}else m(6045)}});g.mixin.eventDispatcher.mix(ra.prototype);b.extend(ra.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(a,d){for(var c=d&&d.deep,q=d&&d.name?Q(d.name):null,e=b(a)[0],f=this.controllers,l=[],E=0,g=f.length;E<g;E++){var x=f[E];q&&-1===b.inArray(x.__name,q)||!x.rootElement||(e===x.rootElement?l.push(x):c&&S(e)===S(x.rootElement)&&b.contains(e,x.rootElement)&&l.push(x))}return l}});b.extend(ua.prototype,{get:function(a){return this._cacheMap[a]},
register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});xa=new ua;za=new ra;g.u.obj.expose("h5.core",{controllerManager:za,definitionCacheManager:{clear:function(a){xa.clear(a)},clearAll:function(){xa.clearAll()}}});var La=null;O.core.controllerInternal=Qa;O.core.addControllerInstantiationHook=function(a){Xa.push(a)};O.core.isDisposing=Ca;g.u.obj.expose("h5.core",{controller:function(a,b,d){2>
arguments.length&&m(6032);return Qa(a,b,d)},logic:wa,expose:function(a){var b=a.__name;b||m(6019,null,{target:a});var d=b.lastIndexOf(".");if(-1===d)window[b]=a;else{var c=b.substr(0,d),b=b.substr(d+1,b.length),d={};d[b]=a;g.u.obj.expose(c,d)}}})})();(function(){function c(b){return b instanceof Date}function e(b){return function(c){for(var e=b.queries,f=0,g=e.length;f<g;f++){var a=e[f],d=a.compareFunction;if(!d(c[a.prop],a.queryValue))return!1}e=b.userFunctions;f=0;for(g=e.length;f<g;f++)if(!e[f](c))return!1;
e=b.nestedCriterias;f=0;for(g=e.length;f<g;f++)if(!e[f].match(c))return!1;return!0}}function f(b){return function(c){for(var e=b.queries,f=0,g=e.length;f<g;f++){var a=e[f],d=a.compareFunction;if(d(c[a.prop],a.queryValue))return!0}e=b.userFunctions;f=0;for(g=e;f<g;f++)if(!e[f](c))return!0;e=b.nestedCriterias;f=0;for(g=e.length;f<g;f++)if(e[f].match(c))return!0;return!1}}function r(g){var n=[],t=[],w=[],h={queries:n,nestedCriterias:t,userFunctions:w},a;for(a in g)if("__op"!==a)if(b.isPlainObject(g[a]))t.push(r(g[a]));
else if(K(g[a]))w.push(g[a]);else{var d=g[a],l=F(d)?d[0]:d,v;v=l instanceof RegExp?z:c(l)?y:u;var L=b.trim(a.replace(/ +/g," ")).split(" "),fa=L[1]||"\x3d";(v=v[fa])||m(1,[fa,b.type(l)]);n.push({prop:L[0],queryValue:d,compareFunction:v})}h.match="or"===g.__op?f(h):e(h);return h}function w(b){this.result=b}function t(b){this._src=b}var u={"\x3d":function(b,c){return b===c},"!\x3d":function(b,c){return b!==c},"\x3c":function(b,c){return b<c},"\x3e":function(b,c){return b>c},"\x3c\x3d":function(b,c){return b<=
c},"\x3e\x3d":function(b,c){return b>=c},between:function(b,c){var e=c[1];return c[0]<=b&&b<=e},"!between":function(b,c){var e=c[1];return b<c[0]||e<b},"in":function(c,e){return-1!==b.inArray(c,e)},"!in":function(c,e){return-1===b.inArray(c,e)}},z={"\x3d":function(b,c){return c.test(b)},"!\x3d":function(b,c){return!c.test(b)}},y={"\x3d":function(b,e){return c(b)?b.getTime()===e.getTime():!1},"!\x3d":function(b,e){return c(b)?b.getTime()!==e.getTime():!0},"\x3c":function(b,e){return c(b)?b.getTime()<
e.getTime():!1},"\x3e":function(b,e){return c(b)?b.getTime()>e.getTime():!1},"\x3c\x3d":function(b,e){return c(b)?b.getTime()<=e.getTime():!1},"\x3e\x3d":function(b,e){return c(b)?b.getTime()>=e.getTime():!1},between:function(b,e){if(!c(b))return!1;var f=e[0].getTime(),g=e[1].getTime(),h=b.getTime();return f<=h&&h<=g},"!between":function(b,e){if(!c(b))return!1;var f=e[0].getTime(),g=e[1].getTime(),h=b.getTime();return h<f||g<h},"in":function(b,e){if(!c(b))return!1;for(var f=b.getTime(),g=0,h=e.length;g<
h;g++)if(f===e[g].getTime())return!0;return!1},"!in":function(b,e){if(!c(b))return!0;for(var f=b.getTime(),g=0,h=e.length;g<h;g++)if(f===e[g].getTime())return!1;return!0}};Ta({1:'演算子"{0}"で"{1}"型の値を比較することはできません',2:"{0}の第1引数が不正です。指定されたキー({1})はモデル{2}に存在しません",3:"setOrderFunctionの第1引数が不正です。比較関数を関数で指定してください",4:"setOrderFunction()ですでにソート条件が設定済みです。addOrder()でソート条件を追加することはできません。",5:"addOrder()ですでにソート条件が追加済みです。setOrderFunction()でソート条件を設定することはできません。"});b.extend(t.prototype,{setCriteria:function(b){this._criteria=
r(b);return this},execute:function(){for(var b=[],c=this._getDataSource(),e=!F(this._src),f=0,g=c.length;f<g;f++){var a=c[f];e?this._criteria.match(a.get())&&b.push(a):this._criteria.match(a)&&b.push(a)}if(this._orderFunction)b.sort(this._orderFunction);else if(this._addedOrders){var d=this._addedOrders,l=d.length;b.sort(function(a,b){for(var c=0;c<l;c++){var f=d[c],g=f.key,f=f.isAsc,h=e?a.get(g):item,g=e?b.get(g):item;if(h>g)return f?1:-1;if(h<g)return f?-1:1}return 0})}return new w(b)},setOrderFunction:function(b){K(b)||
m(3);this._addedOrders&&m(5);this._orderFunction=b;return this},addOrder:function(b,c){F(this._src)||this._src.schema.hasOwnProperty(b)||m(2,["addOrder",b,this._src.name]);this._orderFunction&&m(4);this._addedOrders=this._addedOrders||[];this._addedOrders.push({key:b,isAsc:!1!==c});return this},clearOrder:function(){this._orderFunction=this._addedOrders=null;return this},_getDataSource:function(){return F(this._src)?this._src:this._src.toArray()}});O.data={createQuery:function(){return new t(this)}};
g.u.obj.expose("h5.core.data",{createQuery:function(b){return new t(b)}})})();(function(){function c(b){return(b=b&&D(b)?b.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:b[1],dataModel:b[2],dimension:b[3]?1:0}:{}}function e(a,d){return function U(a,c){if(!d[a])return!1;for(var q=0,e=d[a].length;q<e;q++)if(-1<b.inArray(d[a][q],c)||U(d[a][q],c.concat([a])))return!0;return!1}(a,[])}function f(b){return"number"===typeof b&&isNaN(b)}function r(b,a){return null==
b||f(b)||"number"===typeof b||!a&&(b instanceof Number||!(!(D(b)||b instanceof String)||!b.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function w(b,a){return null==b||"number"===typeof b&&parseInt(b)===b||!a&&(b instanceof Number&&parseInt(b)===parseFloat(b)||("string"===typeof b||b instanceof String)&&!!b.match(/^[+\-]{0,1}[0-9]+$/))}function t(d,c,e){function f(){l.push(a.call(this,arguments));if(e)throw null;}var l=[];try{if(!b.isPlainObject(d))throw f(15900),null;ra(d.name)||f(15901);var g=d.base,
h=null;if(null!=g)if(D(g)&&0===g.indexOf("@")){var k=g.substring(1);c.models[k]?h=c.models[k].schema:f(15903,k)}else f(15902);var v=d.schema;h||null!=v||f(15904);if(!h&&!b.isPlainObject(v))throw f(6),null;}catch(A){m(15001,null,l)}}function u(d,l,g,h){function k(){v.push(a.call(this,arguments));if(h)throw null;}"object"!==typeof d&&m(15008);var v=[];try{var A=function(a,d){null!=a&&("enum"!==d.elmType&&k(15817,C),(!F(a)||0===a.length||-1<b.inArray(null,a)||-1<b.inArray(void 0,a))&&k(15818,C))},t=
function(a,d){if(null!=a)if(b.isPlainObject(a)){for(var c in a){var q=a[c];if(null!=q)switch(c){case "notNull":!0!==q&&!1!==q?k(15811,C,c):B&&!q&&k(15821,C,c,q);break;case "min":case "max":switch(d.elmType){case "integer":(D(q)||!w(q)||f(q))&&k(15812,C,c);break;case "number":(D(q)||D(q)||!r(q)||Infinity===q||-Infinity===q||f(q))&&k(15812,C,c);break;default:k(15813,C,c,d.elmType)}break;case "minLength":case "maxLength":switch(d.elmType){case "string":D(q)||!w(q)||f(q)||0>q?k(15815,C,c):B&&"maxLength"===
c&&0===q&&k(15821,C,c,q);break;default:k(15813,C,c,d.elmType)}break;case "notEmpty":switch(d.elmType){case "string":!0!==q&&!1!==q?k(15811,C,c):B&&!q&&k(15821,C,c,q);break;default:k(15813,C,c,d.elmType)}break;case "pattern":switch(d.elmType){case "string":"regexp"!==b.type(q)&&k(15814,C,c);break;default:k(15813,C,c,d.elmType)}}}a.notEmpty&&0===a.maxLength&&k(15816,C,"notEmpty","maxLength");null!=a.min&&null!=a.max&&a.min>a.max&&k(15816,C,"min","max");null!=a.minLength&&null!=a.maxLength&&a.minLength>
a.maxLength&&k(15816,C,"minLength","maxLength")}else k(15810,C)},M=function(b){B&&null==b&&(b="string");var a;null!=b&&(D(b)?(B&&"string"!==b&&"integer"!==b&&k(15824,C),a=c(b),a.elmType?(a.dataModel&&(l||k(15807,C,a.dataModel),g.models[a.dataModel]||k(15808,C,a.dataModel)),"enum"===a.elmType&&null==E.enumValue&&k(15809,C)):k(15807,C,b)):k(15806,C))},p=function(b){if(null!=b){B&&k(15803,C);E.hasOwnProperty("defaultValue")&&k(15822,C);if(null==b.on)k(15804,C);else for(var a=Q(b.on),c=0,e=a.length;c<
e;c++)if(!d.hasOwnProperty(a[c])){k(15804,C);break}"function"!==typeof b.calc&&k(15805,C);L[C]=Q(b.on)}};if(l){var n=!1,u;for(u in d)d[u]&&!0===d[u].id&&(n&&k(15800),n=!0);n||k(15801)}var L={},C;for(C in d){var E=null==d[C]?{}:d[C],B=l&&!!E.id;ra(C)||k(15802,C);p(E.depend);M(E.type);var n={},Na=B&&null==Na?"string":E.type;D(Na)&&(n=c(Na));t(E.constraint,n);A(E.enumValue,n);B&&E.hasOwnProperty("defaultValue")&&k(15819,C)}for(var V in L)e(V,L)&&k(15823,V)}catch(ba){m(15009,null,v)}return!0}function z(b,
a,d){d=[];try{for(var e in b){var f=b[e];if(f&&(f.hasOwnProperty("defaultValue")||!f.type||"array"!==f.type&&!c(f.type).dimension)&&f.hasOwnProperty("defaultValue")){var l=f.defaultValue;a[e](l).length&&pushErrorReason(15820,e,l)}}return!0}catch(g){m(15009,null,d)}}function y(b,a,d){var e={},f;for(f in b){var l=f,g;g=d;var h=b[f]||{},k=[],v,A=0;v=h.type;var m=h.constraint||{};a&&h.id&&(v=v||"string",m.notNull=!0,"string"===v&&(m.notEmpty=!0));v&&(A=c(v),v=A.elmType,A=A.dimension,k.push(n(v,{manager:g,
enumValue:h.enumValue})));m&&k.push(p(m));g=H({checkFuncs:k,dimension:A});e[l]=g}return e}function p(b){return function(a){var d=[];b.notNull&&null==a&&d.push({notNull:b.notNull});b.notEmpty&&!a&&d.push({notEmpty:b.notEmpty});if(null==a)return d;null!=b.min&&a<b.min&&d.push({min:b.min});null!=b.max&&b.max<a&&d.push({max:b.max});null!=b.minLength&&a.length<b.minLength&&d.push({minLength:b.minLength});null!=b.maxLength&&b.maxLength<a.length&&d.push({maxLength:b.maxLength});null==b.pattern||a.match(b.pattern)||
d.push({pattern:b.pattern});return d}}function n(a,d){var c=[{type:a}];switch(a){case "number":return function(b,a){return r(b,a)?[]:c};case "integer":return function(b,a){return w(b,a)?[]:c};case "string":return function(b,a){return null==b||D(b)||!a&&b instanceof String?[]:c};case "boolean":return function(b,a){return null==b||"boolean"===typeof b||!a&&b instanceof Boolean?[]:c};case "enum":return function(a){var e;a:if(e=d.enumValue,f(a)){a=0;for(var q=e.length;a<q;a++)if(f(e[a])){e=!0;break a}e=
!1}else e=null===a||-1<b.inArray(a,e);return e?[]:c};case "any":return function(){return[]}}var e=a.match(/^@(.+?)$/)[1],l=d.manager;return function(b){var a=l.models[e];return!a||"object"!==typeof b&&null!=b?c:null==b||a.has(b)?[]:c}}function H(b){var a=b.checkFuncs;if(!a||0===a.length)return function(){return[]};var d=b.dimension||0;return function(b,c){function e(b,f){if(!f){for(var l=0,h=a.length;l<h;l++){var k=a[l](b,c);if(k.length)return q=q.concat(k),!1}return!0}if(null==b)return!0;if(!F(b)&&
!g.core.data.isObservableArray(b))return q.push({dimension:d}),!1;l=0;for(h=b.length;l<h;l++)if(!e(b[l],f-1))return!1;return!0}var q=[];e(b,d);return q}}function G(b,a,d,c){b._values={};b._nullProps={};for(var e in a)a[e]&&h(a[e].type)&&(d=Y(),d.relatedItem=b,b._values[e]=d,b._nullProps[e]=!0)}function h(b){return b?-1!==b.indexOf("[]"):!1}function a(){return{code:arguments[0]}}function d(b,a,d,c){return{type:"itemsChange",created:b,recreated:a,removed:d,changed:c}}function l(a,d,c,e){function f(d){d=
Q(k[d].depend.on);for(var c=0,e=d.length;c<e;c++)if(-1===b.inArray(d[c],a._realProperty)&&-1!==b.inArray(d[c],g))return!1;return!0}function l(a,d){for(var c=0,e=d.length;c<e;c++){var q=v[d[c]];if(q)for(var f=0,g=q.length;f<g;f++){var h=q[f];-1===b.inArray(h,a)&&a.push(h)}}}var g=[],k=a.schema||a._model.schema,v=a._dependencyMap,A={};for(e?g=a._dependProps.slice():l(g,Q(c));0!==g.length;){c=[];e=0;for(var t=g.length;e<t;e++){var r=g[e];if(f(r)){var n=k[r].depend.calc.call(a,d);0!==a._validateItemValue(r,
n,!0).length&&m(15016,[a._model?a._model.name:"n/a",r,n]);A[r]={oldValue:a._values[r],newValue:n};k[r]&&h(k[r].type)?n?(a._values[r].copyFrom(n),a._nullProps[r]=!1):(a._values[r].copyFrom([]),a._nullProps[r]=!0):a._values[r]=n}else c.push(r)}l(c,g);g=c}return A}function v(b,a,d,c){for(var e in d){e in b||m(15013,[c?c.name:"n/a",e]);var f=d[e];b[e]&&h(b[e].type)&&!d.hasOwnProperty(e)||(f=a(e,f,c&&c._idKey===e),0<f.length&&m(15011,[c?c.name:"n/a",e],f))}}function L(a,d,c,e){var k=a.schema||a._model.schema,
v=[],A;for(A in d)if(!c||-1===b.inArray(A,c)){var t=a._values[A],n=d[A];if(k[A]&&k[A].depend)t!==n&&m(15012,[a._model?a._model.name:"n/a",A]);else{var M=k[A]&&k[A].type;h(M)&&(null==n?(n=[],a._nullProps[A]=!0):a._nullProps[A]=!1);if(M&&M.match(/string|number|integer|boolean/)){var p=n;if(F(p)){for(var p=p.slice(0),n=0,u=p.length;n<u;n++)p[n]=p[n]&&"object"===typeof p[n]?p[n]&&p[n].valueOf&&p[n].valueOf():p[n];n=p}else n=p&&"object"===typeof p&&p.valueOf?p.valueOf():p}if(null!=n&&M&&M.match(/number|integer/)&&
"number"!==typeof n)if(F(n)||g.core.data.isObservableArray(n))for(p=0,u=n.length;p<u;p++)null!=n[p]&&r(n[p])&&(n[p]=parseFloat(n[p]));else null!=n&&(n=parseFloat(n));h(M)&&t&&t.equals(n)||t===n||f(t)&&f(n)||(M&&-1!==M.indexOf("[]")&&g.core.data.isObservableArray(t)&&(t=t.toArray()),v.push({p:A,o:t,n:n}))}}if(v.length){d={};c=[];p=0;for(A=v.length;p<A;p++)t=v[p],k[t.p]&&h(k[t.p].type)?t.n&&a._values[t.p].copyFrom(t.n):a._values[t.p]=t.n,d[t.p]={oldValue:t.o,newValue:a.get(t.p)},c.push(t.p);k={type:!0===
e?"create":"change",target:a,props:d};b.extend(d,l(a,k,c,e));return k}}function fa(a){var b=a._manager;a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function k(a,b,d){if(a._manager)for(var c=fa(a),e=0,f=d.length;e<f;e++){var l=d[e],g=l._values[a._idKey];c[g]||(c[g]=[]);c[g].push({type:b,item:l})}}function N(a,b){if(a._manager){var d=fa(a),c=b.target._values[a._idKey];d[c]||(d[c]=[]);d[c].push({type:2,ev:b})}}function T(a){var d={},c;for(c in a)if(a.hasOwnProperty(c)){var e=
a[c]?a[c].depend:null;if(e)for(var e=Q(e.on),f=0,l=e.length;f<l;f++){var g=e[f];d[g]||(d[g]=[]);-1===b.inArray(c,d[g])&&d[g].push(c)}}return d}function Z(a,d){t(a,d,!0);var c;c=(c=a.base)?d.models[c.slice(1)].schema:{};c=b.extend({},c,a.schema);u(c,!0,d,!0);var e=y(c,!0,d);z(c,e,!0);return new oa(c,a,e,d)}function A(a,d){var c=[],e=[],f=[],l;for(l in a)a[l]&&a[l].depend?e.push(l):c.push(l),a[l]&&a[l].type&&-1!==a[l].type.indexOf("[]")&&f.push(l);l=T(a);var g={},h;for(h in a){var k=a[h];if(!k||!k.depend){var v=
null,v=k&&void 0!==k.defaultValue?k.defaultValue:null;g[h]=v}}return{_realProps:c,_dependProps:e,_aryProps:f,_dependencyMap:l,_createInitialValueObj:function(a){if(!a)return b.extend({},g);var d=b.extend({},g),c;for(c in a)d[c]=a[c];return d},_validateItemValue:function(a,b,c){return d[a](b,c)}}}function C(a,d,c,e){var f=!1,l=["sort","reverse","pop","shift"],k=null;c.addEventListener("changeBefore",function(c){!e||!a._isRemoved&&e._manager||m(15005,[a._values[e._idKey],c.method]);var h=g.u.obj.argsToArray(c.args);
if(-1===b.inArray(c.method,l)){var v=!0;switch(c.method){case "splice":v=!1;h.shift();h.shift();break;case "copyFrom":h=h[0];break;case "set":h.shift()}v&&(c=a._validateItemValue(d,h),0<c.length&&m(15011,d,c))}e?(e._manager&&(c=e._manager,h=e.name,c._oldValueLogs||(c._oldValueLogs={}),c._oldValueLogs[h]||(c._oldValueLogs[h]={}),c=c._oldValueLogs[h],h=a._values[e._idKey],c[h]||(c[h]={}),c[h][d]||(c[h][d]=a._values[d].toArray())),(f=e._manager?e._manager.isInUpdate():!1)||e._manager.beginUpdate()):
k=a._values[d].toArray()});c.addEventListener("change",function(b){if(!a._isInSet&&null!==b.method){var l={type:"change",target:a,props:{}};l.props[d]={};e?(N(e,l),f?b.stopImmediatePropagation():(e._manager._isArrayPropChangeSilentlyRequested=!0,e._manager.endUpdate(),e._manager._isArrayPropChangeSilentlyRequested=!1)):c.equals(k)||(l.props[d]={oldValue:k,newValue:a._values[d]},a.dispatchEvent(l))}})}function V(a){ra(a)||m(15E3);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=
!1}function oa(a,b,d,c){this.items={};this.size=0;this.name=b.name;this._manager=c;for(var e in a)a[e]&&a[e].id&&(this._idKey=e);this._idType=(b=a[this._idKey].type)?"string"===b?"string":"number":"string";this.schema=a;this._itemConstructor=Ua(a,d,this);c.models[this.name]=this}function Ua(a,d,c){function e(b){G(this,a,f,b);b=f._createInitialValueObj(b);v(a,f._validateItemValue,b,c);L(this,b,null,!0);b=f._aryProps;for(var d=0,l=b.length;d<l;d++)C(this,b[d],this.get(b[d]),c)}var f=A(a,d);c._schemaInfo=
f;g.mixin.eventDispatcher.mix(e.prototype);b.extend(e.prototype,f,X,{_model:c,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return e}function da(a){}function I(){this.length=0;this._src=[]}function Y(){return new I}function R(a){return a&&a.constructor===I?!0:!1}var X={get:function(a){var b=this._model,d=b?b.schema:this.schema;if(0===arguments.length){var b={},c;for(c in d)b[c]=this._values[c];return b}d.hasOwnProperty(a)||m(15014,[b?b.name:"n/a",a]);return this._values[a]},
set:function(a){var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);var d=this._model;!d||!this._isRemoved&&d._manager||m(15005,[this._values[this._model._idKey],"set"],this);if(d)d._idKey in b&&b[d._idKey]!==this._values[d._idKey]&&m(15003,[d.name,this._idKey]),v(d.schema,d._schemaInfo._validateItemValue,b,d);else{var c=this.validate(b);if(c)throw c;}c=d?d._manager.isInUpdate():!1;d&&!c&&d._manager.beginUpdate();this._isInSet=!0;b=L(this,b);this._isInSet=!1;d?(b&&N(d,b),c||d._manager.endUpdate()):
b&&this.dispatchEvent(b)},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};g.mixin.eventDispatcher.mix(V.prototype);b.extend(V.prototype,{createModel:function(d){d&&"object"===typeof d||m(15001,null,[a(15900)]);if(!F(d))return this.models[d.name]?this.models[d.name]:Z(d,this);var c=d.length;c||m(15001,null,[a(15900)]);
for(var e={},f=[],l=0;l<c;l++){var g=d[l].name;if(this.models[g])n[l]=manager.models[d.name];else try{f.push(g);g=[];d[l].base&&g.push(d[l].base.substring(1));for(var h in d[l].schema){var k=d[l].schema[h];if(k){var v=k.type;v&&"@"===v.substring(0,1)&&(v=-1===v.indexOf("[]")?v.substring(1):v.substring(1,v.length-2),g.push(v))}}e[l]={depends:g}}catch(A){m(15001)}}for(var n={size:0};n.size<c;){h={};k=!1;for(l=0;l<c;l++)if(!e[l].registed){for(var g=e[l].depends,v=0,t=g.length;v<t;v++)if(!this.models[g[v]]){h[g[v]]=
!0;break}v===t&&(n[l]=Z(d[l],this),n.size++,k=!0,e[l].registed=!0)}if(!k){var l=!0,r;for(r in h)if(-1===b.inArray(r,f)){l=!1;break}l&&m(15004);m(15001,null,[a(15903,r)])}}d=[];for(l=0;l<c;l++)d.push(n[l]);return d},dropModel:function(a){if((a=D(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(a){if(this.isInUpdate()){var b=
!this._isArrayPropChangeSilentlyRequested,c=this._updateLogs,e=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;a={};for(var l in c)if(c.hasOwnProperty(l)){var g;g=this.models[l];var h=c[l],k=[],v=[],A=[],n=[],t=void 0;for(t in h){for(var r=h[t],m=!0,E=[],B=r.length-1;0<=B;B--){var p=r[B],M=p.type;if(2===M)E.push(p.ev);else{a:{for(m=0;m<B;m++){var u=r[m].type;if(1===u||3===u){B=r[m];break a}}B=null}if(1===M)B&&3===B.type?k.push({id:t,oldItem:B.item,newItem:p.item}):v.push(p.item);else if(B=
B&&3===B.type?B.item:B?null:p.item)n.push(B),B.dispatchEvent({type:"remove",model:g});m=!1;break}}if(m&&0<E.length){p={};for(B=E.length-1;0<=B;B--)for(var C in E[B].props)p[C]||(R(g.get(t).get(C))?(M=e&&e[g.name]&&e[g.name][t]&&e[g.name][t][C],g.get(t).get(C).equals(M)||(p[C]={oldValue:M})):p[C]={oldValue:E[B].props[C].oldValue});B=!1;for(C in p)M=p[C].oldValue,r=g.get(t).get(C),(m=M===r)||(m=f(M)&&f(r)),m?delete p[C]:(B=g.get(t).get(C),b&&R(B)&&B.dispatchEvent({type:"change",method:null,args:null,
returnValue:null}),p[C].newValue=B,B=!0);B&&(E={type:"change",target:E[0].target,props:p},A.push(E),E.target.dispatchEvent(E))}}(g=0===v.length&&0===k.length&&0===n.length&&0===A.length?!1:{created:v,recreated:k,removed:n,changed:A})&&(a[l]=g)}C=!1;for(l in a)C=!0,g=a[l],this.models[l].dispatchEvent(d(g.created,g.recreated,g.removed,g.changed));l={type:"itemsChange",models:a};C&&this.dispatchEvent(l)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,d={};d[a.target.name]=a;b.dispatchEvent({type:"itemsChange",
models:d})}});g.mixin.eventDispatcher.mix(oa.prototype);b.extend(oa.prototype,{create:function(a){this._manager||m(15006,[this.name,"create"]);var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var d=[],c=Q(a),e=[],f=this._idKey,l=0,g=c.length;l<g;l++){var h=c[l],v=h[f],A=this._findById(v);A?(e.push(A),(v=L(A,h,[f]))&&N(this,v)):(h=new this._itemConstructor(h),this.items[v]=h,this.size++,d.push(h),e.push(h))}0<d.length&&k(this,1,
d);b||this._manager.endUpdate();return F(a)?e:e[0]},validate:function(a,b){try{var d=this._idKey,c=Q(a);"object"===typeof a||F(a)||m(15007);if(b)for(var e=0,f=c.length;e<f;e++){var l=c[e],g=l[d];""!==g&&null!=g||m(15002,[this.name,d]);var h=this._schemaInfo._createInitialValueObj(l);v(this.schema,this._schemaInfo._validateItemValue,h,this)}else for(var e=0,k=c.length;e<k;e++)l=c[e],v(this.schema,this._schemaInfo._validateItemValue,l,this)}catch(A){return A}return null},get:function(a){if(F(a)||g.core.data.isObservableArray(a)){for(var b=
[],d=0,c=a.length;d<c;d++)b.push(this._findById(a[d]));return b}return this._findById(a)},remove:function(a){this._manager||m(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var d=this._idKey,c=Q(a),e=[],f=[],l=0,g=c.length;l<g;l++)if(this.has(c[l])){var h=D(c[l])||w(c[l],!0)?c[l]:c[l]._values[d],v=this.items[h];delete this.items[h];this.size--;f.push(v);v._model&&(v._isRemoved=!0);e.push(v)}else f.push(null);0<e.length&&k(this,3,e);
b||this._manager.endUpdate();return F(a)?f:f[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return D(a)||w(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&K(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return"undefined"===typeof a?null:a},_dispatchItemsChangeEvent:function(a){a=d([],[],[],[a]);this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},
toArray:function(){var a=[],b=this.items,d;for(d in b)b.hasOwnProperty(d)&&a.push(b[d]);return a},createQuery:O.data.createQuery});g.mixin.eventDispatcher.mix(da.prototype);b.extend(da.prototype,X,{validate:function(a){try{var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);v(this.schema,this._validateItemValue,b)}catch(d){return d}return null}});g.mixin.eventDispatcher.mix(I.prototype);var P={equals:function(a){var b=R(a);if(!b&&!F(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==
b)return!1;for(var d=0;d<b;d++){var c=this[d],e=a[d],l;(l=c===e)||(l=f(c)&&f(e));if(!l)return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=R(a)?a._src:a;F(a)||m(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=g.u.obj.argsToArray(arguments),b=0,d=a.length;b<d;b++)R(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,
a)}},ma="concat join pop push reverse shift slice sort splice unshift indexOf lastIndexOf every filter forEach map some reduce reduceRight".split(" "),aa;for(aa in P)P.hasOwnProperty(aa)&&-1===b.inArray(aa,ma)&&ma.push(aa);var W=["concat","slice","splice","filter","map"],S=["reverse","sort"],M="sort reverse pop shift unshift push splice copyFrom set".split(" ");aa=0;for(var Da=ma.length;aa<Da;aa++){var ba=ma[aa];I.prototype[ba]=function(a){function d(){var e=c.apply(this._src,arguments);if(-1!==b.inArray(a,
S))e=this;else if(-1!==b.inArray(a,W)){var f=Y();f.copyFrom(e);e=f}return e}var c=P[a]?P[a]:Array.prototype[a];return-1===b.inArray(a,M)?d:function(){if(!this.dispatchEvent({type:"changeBefore",method:a,args:arguments})){var b=d.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:a,args:arguments,returnValue:b});return b}}}(ba)}g.u.obj.expose("h5.core.data",{createManager:function(a,b){ra(a)||m(15E3);var d=new V(a);if(null!=b){""===b&&(b="window");var c={};
c[a]=d;g.u.obj.expose(b,c)}return d},createObservableArray:Y,createObservableItem:function(a){u(a,!1,null,!0);var b=y(a);z(a,b,!0);var d=new da,b=A(a,b);G(d,a,b);d.schema=a;for(var c in b)d[c]=b[c];c=b._createInitialValueObj();v(a,b._validateItemValue,c);L(d,c,null,!0);a=0;for(b=d._aryProps.length;a<b;a++)C(d,d._aryProps[a],d.get(d._aryProps[a]));return d},isObservableArray:R,isObservableItem:function(a){return!(!(a&&a.constructor&&a._validateItemValue)||K(a.getModel))},createSequence:function(a,
d,c){function e(){return k}function f(){var a=k;k+=v;return a}function l(){return k.toString()}function g(){var a=k;k+=v;return a.toString()}function h(){}var k=null!=a?a:1,v=null!=d?d:1;a=1===c?{current:l,next:g,returnType:1}:{current:e,next:f,returnType:2};a.setCurrent=function(a){k=a};b.extend(h.prototype,a);return new h},SEQ_STRING:1,SEQ_INT:2})})();(function(){function c(c){return g.u.obj.isJQueryObject(c)?c:b(c)}function e(){this.__cachedTemplates={}}var f=g.async.deferred,r={escapeHtml:function(b){return g.u.str.escapeHtml(b)}};
b.extend(e.prototype,{load:function(c){var e=f(),r=null;switch(b.type(c)){case "string":b.trim(c)||m(7004);r=[c];break;case "array":r=c;0===r.length&&m(7004);c=0;for(var w=r.length;c<w;c++)D(r[c])?b.trim(r[c])||m(7004):m(7004);break;default:m(7004)}w=[];c=0;for(var p=r.length;c<p;c++)w.push(g.res.get(r[c]));var n=this;la(w,function(b){b=F(b)?b:[b];for(var c=[],f,a=0,d=b.length;a<d;a++){for(var l=b[a].templates,g=0,r=l.length;g<r;g++){if(!n.isValid(l[g].content)){f=l[g];break}c.push(l[g])}if(f)break}if(f)try{n.register(f.id,
f.content)}catch(p){return p.detail.url=b[a].url,p.detail.path=b[a].path,e.reject(p)}a=0;for(d=c.length;a<d;a++)n.register(c[a].id,c[a].content);e.resolve()},function(b){e.reject(b)});return e.promise()},getAvailableTemplates:function(){var b=[],c;for(c in this.__cachedTemplates)b.push(c);return b},register:function(c,e){"string"!==b.type(e)?m(7E3,null,{id:c}):D(c)&&b.trim(c)||m(7002,[]);try{var f=new EJS.Compiler(e,"[");f.compile();this.__cachedTemplates[c]=f.process}catch(g){f=g.lineNumber,m(7010,
[f?" line:"+f:"",g.message],{id:c})}},isValid:function(b){try{return(new EJS.Compiler(b,"[")).compile(),!0}catch(c){return!1}},get:function(c,e){var f=this.__cachedTemplates;D(c)&&b.trim(c)||m(7002);(f=f[c])||m(7005,c);var g=e?b.extend(!0,{},e):{},p=g.hasOwnProperty("_h")?new EJS.Helpers(g):new EJS.Helpers(g,{_h:r}),n=null;try{n=f.call(g,g,p)}catch(w){m(7006,w.toString(),w)}return n},update:function(b,e,f){return c(b).html(this.get(e,f))},append:function(b,e,f){return c(b).append(this.get(e,f))},
prepend:function(b,e,f){return c(b).prepend(this.get(e,f))},isAvailable:function(b){return!!this.__cachedTemplates[b]},clear:function(c){if("undefined"===typeof c)this.__cachedTemplates={};else{var e=null;switch(b.type(c)){case "string":e=[c];break;case "array":c.length||m(7002);e=c;break;default:m(7002)}c=0;for(var f=e.length;c<f;c++){var g=e[c];D(g)&&b.trim(g)||m(7002)}c=0;for(f=e.length;c<f;c++)delete this.__cachedTemplates[e[c]]}},bind:function(c,e){var f;null==c&&m(7007);F(c)?f=c:(f=b(c),0===
f.length&&m(7007),f=f.toArray());(null==e||"object"!==typeof e||F(e)||g.core.data.isObservableArray(e))&&m(7009);return O.view.createBinding(f,e)}});var w=new e;w.createView=function(){return new e};b(function(){b('script[type\x3d"text/ejs"]').each(function(){var c=b.trim(this.id),e=b.trim(this.innerHTML);0!==e.length&&c&&(e=new EJS.Compiler(e,"["),e.compile(),w.__cachedTemplates[c]=e.process)})});g.u.obj.expose("h5.core",{view:w})})();(function(){function c(a,b){return a&&1===a.nodeType?a.getAttribute(b):
void 0}function e(a){if(!a)return null;for(var b=[],d=0,c=a.length;d<c;d++)b.push(a[d]);return b}function f(a,b,d,c){var e=[];b=Q(b);if(!0===c)return r(e,a,b,d),e;a=a.childNodes;c=0;for(var f=a.length;c<f;c++)r(e,a[c],b,d);return e}function r(a,b,d,c){if(1===b.nodeType){for(var e=0,f=d.length;e<f;e++){var l=b.getAttribute(d[e]);if("undefined"===typeof c){if(null!==l){a.push(b);break}}else if(null!==l&&l==c){a.push(b);break}}if(0<b.childNodes.length)for(b=b.childNodes,e=0,f=b.length;e<f;e++)r(a,b[e],
d,c)}}function w(a,d){a=Q(a);for(var e=[],l=0,g=a.length;l<g;l++){var h=a[l];if(1===h.nodeType&&(!0!==d||null==c(h,"data-h5-context")&&null==c(h,"data-h5-loop-context")))for(var k=f(h,"data-h5-bind",void 0,!0),v=0,n=k.length;v<n;v++){for(var r=!0,p=k[v];null!=p&&p!==h;p=p.parentNode)if(null!=c(p,"data-h5-context")||null!=c(p,"data-h5-loop-context")){r=!1;break}r&&e.push(k[v])}}return b(e)}function t(a,d,e){for(var l=[],g=0,h=a.length;g<h;g++){var k=a[g];if(1===k.nodeType){if(!0===e){if(null!=k.getAttribute(d)){l.push(k);
continue}if(null!=c(k,"data-h5-context")||null!=c(k,"data-h5-loop-context"))continue}for(var v=f(k,d,void 0,!1),r=0,n=v.length;r<n;r++){var p=b(v[r])[0],m=p.parentNode;(null==c(m,"data-h5-context")&&null==c(m,"data-h5-loop-context")||m===k)&&l.push(p)}}}return b(l)}function u(a){return a&&a.addEventListener&&a.getModel&&!F(a)&&!g.core.data.isObservableArray(a)||g.core.data.isObservableItem(a)?!0:!1}function z(a,b){for(var d=0,c=a.length;d<c;d++){var e=a[d];1===e.nodeType&&e.setAttribute("data-h5-dyn-vid",
b)}}function y(a,d,f){var l=fa++,h=d[0];b(h).empty();if(f){F(f)||g.core.data.isObservableArray(f)||m(7102);z(d,l);a._addBindingEntry(f,h,l);g.core.data.isObservableArray(f)&&!a._isWatching(f)&&(d=function(b){a._observableArray_changeListener(b)},a._listeners[a._getContextIndex(f)]=d,f.addEventListener("change",d));d=c(h,"data-h5-dyn-ctx");d=e(a._getSrcCtxNode(d).childNodes);var k=[];a._loopElementsMap[l]=k;for(var l=h.ownerDocument.createDocumentFragment(),v=f.get?function(a){return f.get(a)}:function(a){return f[a]},
r=0,n=f.length;r<n;r++){for(var t=[],w=0,u=d.length;w<u;w++){var L=Z(d[w]);t.push(L);l.appendChild(L)}k[r]=t;h.appendChild(l);p(a,t,v(r),!1,!0)}}}function p(a,b,d,c,e){b=Q(b);if(c)y(a,b,d);else{c=fa++;d&&(("object"!==typeof d||F(d)||g.core.data.isObservableArray(d))&&m(7102),z(b,c),a._addBindingEntry(d,b,c));var f=u(d);f&&!a._isWatching(d)&&(c=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(d)]=c,d.addEventListener("change",c));w(b,e).each(function(){D(this,d,f)});
n(a,b,d,!1,e);n(a,b,d,!0,e)}}function n(a,b,d,e,f){var l=e?"data-h5-loop-context":"data-h5-context";t(b,l,f).each(function(){var b=c(this,l),f=null;d&&(f=u(d)?d.get(b):d[b]);p(a,this,f,e)})}function D(a,d,e){for(var f=c(a,"data-h5-bind").split(";"),l=[],g=[],h=[],k=0,r=f.length;k<r;k++){var n=f[k];if(-1===n.indexOf(":"))0<b.trim(n).length&&(l.push(null),g.push(null),h.push(b.trim(n)));else{var p=n.split(":"),n=b.trim(p[0]),p=b.trim(p[1]),t=null,w=v.exec(n);w&&(t=w[1],n=/(\S+)[\s\(]/.exec(n)[1]);0<
n.length&&0<p.length&&(l.push(n),g.push(t),h.push(p))}}f=a.tagName.toLowerCase();k=b(a);r=0;for(n=l.length;r<n;r++){var t=l[r],w=g[r],u=h[r],p=null;d&&(p=e?d.get(u):d[u]);null==t&&("input"===f?(t="attr",w="value"):t="text");switch(t){case "text":null==p?k.text(""):k.text(p);break;case "html":null==p?k.html(""):k.html(p);break;case "class":var t=c(a,"data-h5-dyn-cn"),u=(w=null==t)?"":" ",L=!1;p&&(L=!(new RegExp("\\s"+p+"\\s")).test(" "+t+" "));k[0].className=(w?"":t)+(L?u+p:"");break;case "attr":w||
m(7100);"input"===f&&"value"===w?null==p?k.val(""):k.val(p):null==p?k.removeAttr(w):k.attr(w,p);break;case "style":w||m(7100);null==p?k.css(w,""):k.css(w,p);break;default:m(7101)}}}function G(a,b,d){for(var c=0,e=d.length;c<e;c++){var f=d[c];b.removeChild(f);a._removeBinding(f)}}function h(a){a=a.childNodes;for(var b=[],d=0,c=a.length;d<c;d++)b.push(Z(a[d]));return b}function a(a,b,d,c,e){for(var f=d.ownerDocument.createDocumentFragment(),l=[],g=0,k=e.length;g<k;g++){var v=h(d);l[g]=v;for(var r=0,
n=v.length;r<n;r++)f.appendChild(v[r]);p(a,v,e[g])}Array.prototype[c].apply(b,l);return f}function d(a,b,d,c,e,f){var l=c.length;if(0!==l){var g=c[0],k=g;for(d=1===l?d.length:k+c[1];k<d;k++){var v=e[k];v&&G(a,b,v)}e.splice(g,c[1]);if(!(2>=l)){k=e.length;k=0===k||0===g?b.firstChild:g>=k?null:e[g][0];d=f.ownerDocument.createDocumentFragment();g=[g,0];for(v=2;v<l;v++){for(var r=h(f),n=0,m=r.length;n<m;n++)d.appendChild(r[n]);p(a,r,c[v]);g.push(r)}b.insertBefore(d,k);Array.prototype.splice.apply(e,g)}}}
function l(a,b){void 0!==a.nodeType?1===a.nodeType&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=e(a));this._bindRootId=k++;N[this._bindRootId]=this;for(var d=[],l=0,g=this._targets.length;l<g;l++){var h=this._targets[l];if(1===h.nodeType){h.setAttribute("data-h5-dyn-bind-root",this._bindRootId);for(var v=f(h,["data-h5-context","data-h5-loop-context"],void 0,!0),r=0,n=v.length;r<n;r++){var m=L++;v[r].setAttribute("data-h5-dyn-ctx",m)}v=f(h,"data-h5-bind",
void 0,!0);r=0;for(n=v.length;r<n;r++)m=v[r],/class\s*:/.test(c(m,"data-h5-bind"))&&""!=m.className&&m.setAttribute("data-h5-dyn-cn",m.className)}d.push(h.cloneNode(!0))}this._srces=d;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};p(this,this._targets,this._rootContext,!1,!0)}var v=/\(\s*(\S+)\s*\)/,L=0,fa=0,k=0,N={},T={},Z;(function(){var a=document.createElement("div");a.h5Dummy="a";var d=a.cloneNode(!1),c=void 0!==d.h5Dummy;a.h5Dummy=
void 0;c?(d.h5Dummy=void 0,Z=function(a){var d=a.ownerDocument;return 1===a.nodeType?b(b.trim(a.outerHTML),d)[0]:a.cloneNode(!0)}):Z=function(a){return a.cloneNode(!0)}})();b.extend(l.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var d=this._targets[a];if(1===d.nodeType){this._removeBinding(d);d.removeAttribute("data-h5-dyn-bind-root");for(var c=f(d,"data-h5-dyn-cn",void 0,!0),e=0,l=c.length;e<l;e++)c[e].removeAttribute("data-h5-dyn-cn");d=f(d,"data-h5-dyn-ctx",void 0,!0);
e=0;for(c=d.length;e<c;e++)d[e].removeAttribute("data-h5-dyn-ctx")}}delete N[this._bindRootId]},_observableArray_changeListener:function(b){var e=this._getViewsFromSrc(b.target);if(e)for(var f in e)if(e.hasOwnProperty(f)){var l=e[f],g=this._getSrcCtxNode(c(l,"data-h5-dyn-ctx")),k=this._loopElementsMap[f];switch(b.method){case "set":d(this,l,b.target,[b.args[0],1,b.args[1]],k,g);break;case "shift":case "pop":var v=k[b.method]();v&&G(this,l,v);break;case "unshift":v=a(this,k,g,b.method,b.args);l.insertBefore(v,
l.firstChild);break;case "push":v=a(this,k,g,b.method,b.args);l.appendChild(v);break;case "splice":d(this,l,b.target,b.args,k,g);break;case "reverse":for(var v=l,r=k;v.firstChild;)v.removeChild(v.firstChild);for(var n=0,l=r.length;n<l;n++)for(var g=r[n],m=g.length-1;0<=m;m--)v.insertBefore(g[m],v.firstChild);k.reverse();break;case "sort":case "copyFrom":case null:for(var v=this._loopElementsMap,r=f,n=b.target,m=k,k=g,g=0,t=m.length;g<t;g++)G(this,l,m[g]);for(var m=l.ownerDocument.createDocumentFragment(),
t=[],g=0,w=n.length;g<w;g++){var u=h(k);t[g]=u;for(var L=0,N=u.length;L<N;L++)m.appendChild(u[L]);p(this,u,n.get(g))}l.appendChild(m);v[r]=t}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var d=!1;a.target===this._rootContext&&(d=!0);var e=this,f;for(f in b)if(b.hasOwnProperty(f)){var l=b[f];w(l,d).each(function(){D(this,a.target,!0)});t(l,"data-h5-context").each(function(){var b=c(this,"data-h5-context");if(!(b in a.props))return!0;e._removeBinding(this);
var d=c(this,"data-h5-dyn-ctx"),d=e._getSrcCtxNode(d),d=Z(d);this.parentNode.replaceChild(d,this);p(e,d,a.props[b].newValue)});t(l,"data-h5-loop-context").each(function(){var b=c(this,"data-h5-loop-context");if(!(b in a.props)||a.target._isArrayProp(b))return!0;e._removeBinding(this);p(e,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,d=this._srces.length;b<d;b++){var e=this._srces[b];if(c(e,"data-h5-dyn-ctx")===a)return e;e=f(e,"data-h5-dyn-ctx",a);if(0<e.length)return e[0]}return null},
_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(a){return b.inArray(a,this._usingContexts)},_addBindingEntry:function(a,b,d){var c=this._getContextIndex(a);-1===c&&(this._usingContexts.push(a),c=this._usingContexts.length-1);T[d]=a;(a=this._srcToViewMap[c])?a[d]=b:(a={},a[d]=b,this._srcToViewMap[c]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=T[a];
if(b){var d=this._getContextIndex(b);if(-1!==d){var c=this._srcToViewMap[d];c&&c[a]&&(delete c[a],this._hasBindingForSrc(c)||(c=!1,u(b)?(b.removeEventListener("change",this._listeners[d]),c=!0):g.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[d]),c=!0),c&&delete this._listeners[d],delete this._srcToViewMap[d],this._usingContexts[d]=null))}T[a]&&delete T[a]}},_removeBinding:function(a){if(1===a.nodeType){var b=c(a,"data-h5-dyn-vid");null!=b&&(this._removeBindingEntry(b),
a.removeAttribute("data-h5-dyn-vid"));a=f(a,"data-h5-dyn-vid");for(var b=0,d=a.length;b<d;b++){var e=a[b];this._removeBindingEntry(c(e,"data-h5-dyn-vid"));e.removeAttribute("data-h5-dyn-vid")}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});O.view={createBinding:function(a,b){return new l(a,b)}}})();(function(){function c(a,d){-1===b.inArray(a,d)&&d.push(a)}function e(a,d){for(var c=[],e=a.concat(d),f=0,g=e.length;f<g;f++){var k=e[f];-1===b.inArray(k,
c)&&c.push(k)}return c}function f(a,b){return null==a||"number"===typeof a&&isNaN(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(D(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function r(a,b){return!!(null==a||D(a)||!b&&a instanceof String)}function m(a,b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean}function t(a){var d=a.name;a.isValid?(this.validProperties.push(d),this.validCount++):(this.isValid=!1,this.invalidProperties.push(d),this.invalidCount++,
this.invalidReason=this.invalidReason||{},this.invalidReason[d]||(this.invalidReason[d]={name:d,value:a.value,violation:[]}),this.invalidReason[d].violation.push(a.violation),this.violationCount++);this.validatingProperties.splice(b.inArray(d,this.validatingProperties),1);this.isValid&&this.validatingProperties.length||(this.isAllValid=this.isValid)}function u(){this._rule={}}function z(a){this.isValid=a.isValid;this.validProperties=a.validProperties;this.invalidProperties=a.invalidProperties;this.validatingProperties=
a.validatingProperties;this.invalidReason=a.invalidReason;this.validCount=a.validProperties.length;this.invalidCount=a.invalidProperties.length;this.violationCount=a.violationCount;this.isAsync=a.isAsync;this.isAllValid=a.isAllValid;this.properties=a.properties;this._validPropertyToRulesMap=a.validPropertyToRulesMap;this._nameToRuleSetMap=a.nameToRuleSetMap;this._disabledProperties=a.disabledProperties;this.addEventListener("validate",t);this.dispatchEvent=function(){this._aborted||z.prototype.dispatchEvent.apply(this,
arguments)}}function y(){this.rules=[];this.rulesMap={}}function p(a,b,c,e){this._isSkipped=!1;this.name=a;this.value=b;this.rule=c;this.timing=e}function n(a,b,c,e,f,g,k){G.addValidateRule(a,b,c,e,f,g,k)}var H=g.async.isPromise,G=new y;b.extend(u.prototype,{get:function(a){return this._rule[a]},getAll:function(){var a=[],b;for(b in this._rule)a.push(this._rule[b]);return a},_setSkipped:function(a,b){var c=this._rule[a];c&&(c.isSkipped=b)},_setRule:function(a,b,c){this._rule[a]={name:a,arg:b,message:c,
isSkipped:!1}}});g.mixin.eventDispatcher.mix(z.prototype);b.extend(z.prototype,{abort:function(){this.removeEventListener("validate",t);this.dispatchEvent({type:"abort"});this._aborted=!0},_merge:function(a){for(var d=[],f=[],g=[],h=0,r=this.properties.length;h<r;h++){var k=this.properties[h];if(-1!==b.inArray(k,a._disabledProperties))delete this.invalidReason[k],delete this._validPropertyToRulesMap[k],delete this._nameToRuleSetMap[k];else if(g.push(k),this._has(k,a.properties))if(this._nameToRuleSetMap[k]=
a._nameToRuleSetMap[k],this._has(k,this.validProperties))this._has(k,a.invalidProperties)?(c(k,d),this.invalidReason[k]=a.invalidReason[k]):this._has(k,a.validProperties)&&c(k,f);else{if(this._has(k,this.invalidProperties))if(this._has(k,a.validProperties)){var n=a._validPropertyToRulesMap[k],p=this.invalidReason[k].violation;if(n)for(var m=p.length-1;0<=m;m--){var t=p[m];-1!==b.inArray(t.ruleName,n)&&p.splice(m,1)}0===p.length?(delete this.invalidReason[k],c(k,f)):c(k,d);this._validPropertyToRulesMap[k]=
a._validPropertyToRulesMap[k]}else if(this._has(k,a.invalidProperties)){n=a._validPropertyToRulesMap[k];p=this.invalidReason[k].violation;if(n)for(m=p.length-1;0<=m;m--)t=p[m],-1!==b.inArray(t.ruleName,n)&&p.splice(m,1);n=0;for(m=a.invalidReason[k].violation.length;n<m;n++){for(var t=a.invalidReason[k].violation[n],w=!1,u=0,y=p.length;u<y;u++)if(t.ruleName===p[u].ruleName){w=!0;p[u]=t;break}w||p.push(t)}c(k,d)}}else this._has(k,this.validProperties)&&f.push(k),this._has(k,this.invalidProperties)&&
d.push(k)}h=0;for(r=a.properties.length;h<r;h++)k=a.properties[h],this._nameToRuleSetMap[k]=a._nameToRuleSetMap[k],this._has(k,this.properties)||(this._has(k,a.validProperties)?c(k,f):this._has(k,a.invalidProperties)&&(c(k,d),this.invalidReason[k]=a.invalidReason[k]));this.properties=e(g,a.properties);this.validatingProperties=e(this.validatingProperties,a.validatingProperties);this.isAsync=0===this.validatingProperties.length;this.validProperties=f;this.validCount=f.length;this.invalidProperties=
d;this.invalidCount=d.length;a=0;for(var z in this.invalidReason)a+=this.invalidReason[z].violation.length;this.violationCount=a;this.isValid=0===this.invalidCount;this.isAllValid=!1;!this.isAsync&&this.isValid&&(this.isAllVaid=!0)},_has:function(a,d){return-1!==b.inArray(a,d)}});b.extend(y.prototype,{addValidateRule:function(a,b,c,e,f,g,k){if(this.rulesMap[a])for(var h=0,n=this.rules.length;h<n;h++)if(this.rules[h].ruleName===a){this.rules.splice(h,1);break}h=null;null!=c&&(h=Array.isArray(c)?c:
[c]);b={ruleName:a,func:b,priority:e,argNames:h,enableWhenEmpty:f,validateOn:g,resolveOn:k};this.rules.push(b);this.rulesMap[a]=b},getValidator:function(a){return this.rulesMap[a]},getValidateFunction:function(a){return this.rulesMap[a]&&this.rulesMap[a].func},getValidateArgNames:function(a){return this.rulesMap[a]&&this.rulesMap[a].argNames},sortRuleByPriority:function(a){var b=this.rulesMap;a.sort(function(a,c){var e=b[a],f=b[c],e=null==e.priority?-Infinity:e.priority,f=null==f.priority?-Infinity:
f.priority;return e===f?0:f-e})}});b.extend(p.prototype,{skip:function(){this._isSkipped=!0}});var h=/^[0-9]+$/;n("required",function(a){return null!=a&&""!==a},null,60,!0,null,null);n("customFunc",function(a,b){return b(a)},["func"],50,!0,null,null);n("assertNull",function(a){return null==a},null,50,!0,null,null);n("assertNotNull",function(a){return void 0===a?!0:null!=a},null,50,!0,null,null);n("assertFalse",function(a){return null==a||m(a)&&0==a},null,50,!1,null,null);n("assertTrue",function(a){return null==
a||m(a)&&1==a},null,50,!1,null,null);n("max",function(a,b,c){return null==a||(f(a,!0)||a instanceof Number)&&(c?a<=b:a<b)},["max","inclusive"],50,!1,null,null);n("min",function(a,b,c){return null==a||(f(a,!0)||a instanceof Number)&&(c?b<=a:b<a)},["min","inclusive"],50,!1,null,null);n("future",function(a,b){if(null==a)return!0;var c;c=b instanceof Date?b.getTime():"number"===typeof b?b:"string"===typeof b&&h.test(b)?parseInt(b):(new Date).getTime();var e;if(a instanceof Date)e=a.getTime();else if("number"===
typeof a)e=a;else if("string"===typeof a&&h.test(a))e=parseInt(a);else return!1;return c<e},["referenceTime"],50,!1,null,null);n("past",function(a,b){if(null==a)return!0;var c;c=b instanceof Date?b.getTime():"number"===typeof b?b:"string"===typeof b&&h.test(b)?parseInt(b):(new Date).getTime();var e;if(a instanceof Date)e=a.getTime();else if("number"===typeof a)e=a;else if("string"===typeof a&&h.test(a))e=parseInt(a);else return!1;return e<c},["referenceTime"],50,!1,null,null);n("digits",function(a,
b,c){if(null==a)return!0;if(!r(a)||!/^([+|-])?\d*(\.\d+)?$/.test(a))return!1;var e=parseInt(a);return null!=b&&(0>e?-e:e)>=Math.pow(10,b)?!1:null!=c?(b=a.indexOf("."),-1===b?!0:a.slice(b+1).length<=c):!0},["integer","fraction"],50,!1,null,null);n("pattern",function(a,b){return null==a||r(a)&&b.test(a)},["regexp"],50,!1,null,null);n("size",function(a,d,c){d=d||0;c=c||Infinity;if(b.isPlainObject(a)){var e=0,f;for(f in a)e++;return d<=e&&e<=c}return null==a||(r(a)||F(a))&&d<=a.length&&a.length<=c},["min",
"max"],50,!1,null,null);O.validation||(O.validation={});O.validation.ValidationResult=z;g.u.obj.expose("h5.validation",{defineRule:n,ValidationTiming:{VALIDATE:"validate",CHANGE:"change",BLUR:"blur",FOCUS:"focus",KEY_UP:"keyup",ASYNC_RESULT:"asyncResult"}});g.core.expose({__name:"h5.validation.FormValidationLogic",_rule:{},_disableProperties:[],_isForceEnabledWhenEmptyMap:{},_isEnabledAllWhenEmpty:!1,validate:function(a,d,c,e){var f={},g=[],k;for(k in a){if(b.isPlainObject(a[k]))for(var h in a[k])f[h]=
a[k][h],g.push(h);f[k]=a[k]}a=null;d&&(a=(b.isArray(d)?d.slice(0):[d]).concat(g));null==c&&(c="validate");return this._validate(f,a,c,e)},_preValidationHook:null,setPreValidationHook:function(a){this._preValidationHook=a},addRule:function(a){for(var b in a){var c=a[b],e=this._rule[b];null==e&&(e={},this._rule[b]=e);for(var f in c)e[f]=c[f]}},removeRule:function(a){F(a)||delete this._rule[a];for(var b=0,c=a.length;b<c;b++)delete this._rule[a[b]]},disableRule:function(a){a=Q(a);for(var d=0,c=a.length;d<
c;d++)-1===b.inArray(a[d],this._disableProperties)&&this._disableProperties.push(a[d])},enableRule:function(a){a=Q(a);for(var d=0,c=a.length;d<c;d++){var e=b.inArray(a[d],this._disableProperties);-1!==e&&this._disableProperties.splice(e,1)}},setRuleForceEnabledWhenEmpty:function(a,b){this._isForceEnabledWhenEmptyMap[a]=b},setAllRulesEnabledWhenEmpty:function(a){this._isEnabledAllWhenEmpty=a},_validate:function(a,d,e,f){var g=[],h=[],k=[],n=[],r={},m=d&&(F(d)?d:[d]),t=!1,w={},y=0,D={},K={},Q=this._disableProperties.slice(0),
I;for(I in this._rule)if(!(d&&-1===b.inArray(I,m)||-1!==b.inArray(I,this._disableProperties))){var Y=this._rule[I],R=a[I],X=!1,P=!1,S=new u;K[I]=S;var aa=[],W;for(W in Y)aa.push(W);G.sortRuleByPriority(aa);for(var O=!1,M=0,Da=aa.length;M<Da;M++){W=aa[M];var ba=Y[W];if(a.hasOwnProperty(I)&&null!=ba||"required"===W&&ba){var q={},x=G.getValidateArgNames(W);if(x&&null!=ba)for(var J=Array.isArray(ba)?ba:[ba],U=0,ca=x.length;U<ca;U++)q[x[U]]=J[U];S._setRule(W,q);J=G.getValidator(W);if(this._shouldValidateWhen(I,
J,e,f)){if(this._preValidationHook){var x={},Ga;for(Ga in q)x[Ga]=q[Ga];x=new p(I,R,{name:W,arg:x},e);this._preValidationHook(x);if(x._isSkipped){S._setSkipped(W,!0);continue}}x=this._convertBeforeValidate?this._convertBeforeValidate(R,W):R;ba=F(ba)?[x].concat(ba):[x,ba];U=G.getValidateFunction(W);if(!U)break;x=null;if(""!==R||this._shouldValidateWhenEmpty(J))x=U.apply(this,ba);else if(f&&f.invalidReason[I]){ba=!1;J=f.invalidReason[I].violation;U=0;for(ca=J.length;U<ca;U++)if(J[U].ruleName===W){ba=
x=!0;break}if(!ba)continue}else continue;O=!0;!H(x)||va(x)||Aa(x)||(P=!0,w[I]=w[I]||[],w[I].push(x.promise({ruleName:W,value:R,ruleValue:q})));!x||H(x)&&va(x)?(r[I]||(r[I]={name:I,value:R,violation:[]}),r[I].violation.push(this._createViolation(W,q)),X=!0,y++):(q=D[I],q||(q=[],D[I]=q),c(W,q))}else S._setSkipped(W,!0)}}O&&(P?(t=!0,n.push(I)):(X?h:g).push(I),k.push(I))}d=!h.length;var ha=new z({validProperties:g,invalidProperties:h,validatingProperties:n,properties:k,invalidReason:r,isAsync:t,isValid:d,
isAllValid:d?t?null:!0:!1,violationCount:y,validPropertyToRulesMap:D,nameToRuleSetMap:K,disabledProperties:Q});if(t){var qa=function(a){a.validCount+a.invalidCount===a.properties.length&&(a.isAllValid=a.isValid,a.dispatchEvent({type:"validateComplete"}))},Ca=this;for(I in w)g=w[I],h=function(b){return function(){ha.dispatchEvent({type:"validate",name:b,isValid:!0,value:a[b],violation:null});qa(ha)}}(I),k=function(a,d,c){return function(){if(-1===b.inArray(a,ha.invalidProperties)){for(var c,e,f,l=
0,g=d.length;l<g;l++){var h=d[l];if(va(h)){c=h.ruleName;e=h.ruleValue;f=h.value;break}}ha.dispatchEvent({type:"validate",name:a,isValid:!1,value:f,violation:Ca._createViolation(c,e,arguments)});qa(ha)}}}(I,g),b.when.apply(b,g).done(h).fail(k)}return ha},_createViolation:function(a,b,c){a={ruleName:a,ruleValue:b,reason:null};c&&(a.reason=g.u.obj.argsToArray(c));return a},_convertBeforeValidate:function(a,b){if(null==a)return a;switch(b){case "max":case "min":return f(a)?parseFloat(a):NaN;case "future":case "past":if(!(a instanceof
Date)&&"number"===typeof a)return new Date(a)}return a},_shouldValidateWhenEmpty:function(a){return null!=this._isForceEnabledWhenEmptyMap[a.ruleName]?this._isForceEnabledWhenEmptyMap[a.ruleName]:this._isEnabledAllWhenEmpty?!0:!0===a.enableWhenEmpty},_shouldValidateWhen:function(a,d,c,e){if(null==d.validateOn)return!0;var f=-1!==b.inArray(c,d.validateOn);if(!f&&e&&e.invalidReason[a]&&d.resolveOn){a=e.invalidReason[a].violation;e=0;for(var g=a.length;e<g;e++)if(a[e].ruleName===d.ruleName&&-1!==b.inArray(c,
d.resolveOn)){f=!0;break}}return f},_setRuleResolveTiming:function(a,b){var c=Array.isArray(b)?b:[b];G.getValidator(a).resolveOn=c},_setRuleValidateTiming:function(a,b){var c=Array.isArray(b)?b:[b];G.getValidator(a).validateOn=c}})})();(function(){function c(a){var d={},c;for(c in C){var e=b("\x3cdiv\x3e\x3c/div\x3e").addClass(a).addClass(c).appendTo("body"),f=b.camelCase(c);d[f]={};b.map(C[c],function(a,b){d[f][a]="width"===a||"height"===a?parseInt(e.css(a).replace(/\D/g,""),10):e.css(a)});e.remove()}return d}
function e(a,b,d){a=b.createElement("v:"+a);for(var c in d)a.style[c]=d[c];return a}function f(a,b){for(var d=[],c=a/2,e=.8*a/2,f=360/b*Math.PI/180,g=1;g<=b;g++){var l=f*g,h=Math.cos(l),l=Math.sin(l);d.push({from:{x:c+e/2*h,y:c+e/2*l},to:{x:c+e*h,y:c+e*l}})}return d}function r(a){return function(){var b=document.body,d=document.documentElement,c=O?b:da?d:null;return c?"Height"===a?c["client"+a]>c["scroll"+a]?c["client"+a]:c["scroll"+a]:c["client"+a]:Math.max(b["scroll"+a],d["scroll"+a],b["offset"+
a],d["offset"+a],d["client"+a])}}function m(a){return function(){var b=O?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function t(a){var b=O?document.body:document.documentElement;return T.isiOS?window["inner"+a]:b["client"+a]}function u(a){var d=b(a)[0],c=document.body,e=b("html")[0];a={top:0,left:0};if(d===c&&da)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(c.currentStyle.marginTop||0)+parseFloat(c.currentStyle.borderTop||
0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(c.currentStyle.marginLeft||0)+parseFloat(c.currentStyle.borderLeft||0)};"undefined"!==typeof d.getBoundingClientRect&&(a=d.getBoundingClientRect());c=O?c:document.documentElement;d=c.clientTop||0;c=c.clientLeft||0;return{top:a.top+ma()-d,left:a.left+aa()-c}}function z(){b.each(A(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",
function(){return!1})})}function y(a){a=Z(a)?a[0]:a;return a===window||a===document||a===document.body}function p(a){return ea(S(a)).getComputedStyle(a,null)}function n(a,d){return ea(S(a)).getComputedStyle?p(a)[d]:b(a).css(d)}function H(a){if(!ea(S(a)).getComputedStyle)return b(a).height();var d=p(a);return a.offsetHeight-parseFloat(d.paddingTop)-parseFloat(d.paddingBottom)}function G(a){if(!ea(S(a)).getComputedStyle)return b(a).width();var d=p(a);return a.offsetWidth-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight)}
function h(a,d){if(!ea(S(a)).getComputedStyle)return b(a).outerHeight();var c=p(a);return H(a)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)+parseFloat(c.borderTopWidth)+parseFloat(c.borderBottomWidth)+(d?parseFloat(c.marginTop)+parseFloat(c.marginBottom):0)}function a(a,d){if(!ea(S(a)).getComputedStyle)return b(a).outerWidth();var c=p(a);return G(a)+parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)+parseFloat(c.borderLeftWidth)+parseFloat(c.borderRightWidth)+(d?parseFloat(c.marginLeft)+
parseFloat(c.marginRight):0)}function d(a){if(!ea(S(a)).getComputedStyle)return b(a).innerHeight();var d=p(a);return H(a)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)}function l(a){if(!ea(S(a)).getComputedStyle)return b(a).innerWidth();var d=p(a);return G(a)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)}function v(a,d,c,e){function f(){g+=13;g>c?(clearInterval(k),d.each(function(b){for(var d in a[b])this.style[d]=""}),e()):d.each(function(a){var d=l[a],c;for(c in d)d[c]+=h[a][c];b(this).css(d)})}
var g=0,l=[],h=[];d.each(function(b){var e=a[b];h[b]={};l[b]={};var f=p(d[b]),g;for(g in e)l[b][g]=parseFloat(f[g]),h[b][g]=13*(parseFloat(e[g])-parseFloat(f[g]))/c});f();var k=setInterval(f,13)}function L(a,b,d){var c=[];a.each(function(){var a=parseFloat(n(this,"opacity"));c.push({opacity:a})});a.css({opacity:0,display:"block"});v(c,a,b,d)}function fa(a,b,d){var c=[];a.each(function(){c.push({opacity:0})});v(c,a,b,d)}function k(a,d){this.style=b.extend(!0,{},a);if(!d.getElementById("h5-vmlstyle")){d.namespaces.add("v",
"urn:schemas-microsoft-com:vml");var c=d.createElement("style");d.getElementsByTagName("head")[0].appendChild(c);c.id="h5-vmlstyle";c.setAttribute("type","text/css");c.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}c=this.style.throbber.width;this.group=e("group",d,{width:c+"px",height:this.style.throbber.height+"px"});this.group.className="vml-root";for(var c=f(c,this.style.throbber.lines),g=this.style.throbberLine.color,l=this.style.throbberLine.width,h=0,k=
c.length;h<k;h++){var n=c[h],r=n.from,p=n.to,n=e("line",d);n.strokeweight=l;n.strokecolor=g;n.fillcolor=g;n.from=r.x+","+r.y;n.to=p.x+","+p.y;r=e("stroke",d);r.opacity=1;n.appendChild(r);this.group.appendChild(n)}this._createPercentArea(d)}function N(a,d){var e=this,f=b(a);if(f.length){var l=y(f),f=l?b("body"):f,h=S(f[0]);h===window.document||f[0]!==h&&ea(h)!==f[0]||(f=b(h.body));var k=b.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},d);
this._displayed=!1;this._throbbers=[];this._settings=k;this._styles=b.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},c(k.theme));k.throbber&&b.extend(this._styles.throbber,k.throbber);this._isScreenLock=l;this._$target=f;this._target=1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){e._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){e._handleResizeEvent()};this._redrawable=
!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof k.fadeIn?k.fadeIn:-1;this._fadeOutTime="number"===typeof k.fadeOut?k.fadeOut:-1;this._$content=b();this._$overlay=b();this._$skin=b();this._showContent=k.showThrobber||k.message;for(var f=g.u.str.format('\x3cspan class\x3d"indicator-throbber"\x3e\x3c/span\x3e\x3cspan class\x3d"indicator-message" {0}\x3e{1}\x3c/span\x3e',""===k.message?'style\x3d"display: none;"':"",k.message),l="https"===document.location.protocol?"return:false":
"about:blank",n=0,r=this._$target.length;n<r;n++)this._$content=this._$content.add(b(h.createElement("div")).append(f).addClass("h5-indicator").addClass(k.theme).addClass("content").css("display","none")),this._$overlay=this._$overlay.add((k.block?b(h.createElement("div")):b()).addClass("h5-indicator").addClass(k.theme).addClass("overlay").css("display","none")),this._$skin=this._$skin.add((da||O?b(h.createElement("iframe")):b()).attr("src",l).addClass("h5-indicator").addClass("skin").css("display",
"none"));var p=this._isScreenLock&&I?"fixed":"absolute";b.each([this._$overlay,this._$content],function(){this.css("position",p)});h=k.promises;k=function(){e.hide()};f=b.hasOwnProperty("curCSS")?"pipe":"then";F(h)?(h=b.map(h,function(a,b){return a&&K(a.promise)?a:null}),0<h.length&&Fa(g.async.when(h),f,[k,k])):h&&K(h.promise)&&Fa(h,f,[k,k])}}var T=g.env.ua,Z=g.u.obj.isJQueryObject,A=g.u.obj.argsToArray,C={throbber:["width","height"],"throbber-line":["width","color"]},V=!!document.createElement("canvas").getContext,
Q=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='\x3cv:line strokeweight\x3d"1"/\x3e';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),O="CSS1Compat"!==document.compatMode,da=T.isIE&&6>=T.browserVersion,I=!(T.isAndroidDefaultBrowser||T.isiOS&&5>T.browserVersion||da||O||T.isWindowsPhone),Y=null,R=null,X=null,P=null,ma=null,aa=null,W=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div")),
d=["Webkit","Moz","O","ms","Khtml"],c=d.length;return function(e){e=b.camelCase(e);if(e in a.style)return!0;e=e.charAt(0).toUpperCase()+e.slice(1);for(var f=0;f<c;f++)if(d[f]+e in a.style)return!0;return!1}}(),R=function(a){return function(){var b=document.body,d=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+a]:O?b["client"+a]:d["client"+a]}}("Height"),X=r("Height"),P=r("Width"),ma=m("Top"),aa=m("Left"),Y=W("animationName");k.prototype={show:function(a){a&&(this.root=
a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,d=this.highlightPos,c=this.group.childNodes,e=0,f=c.length;e<f;e++){var g=c[e];if("textbox"!==g.nodeName){var l=e+1;g.firstChild.opacity=l==d?"1":l==d+1||l==d-1?"0.75":"0.4"}}d==a?d=0:d++;this.highlightPos=d;var h=this;this._runId=
setTimeout(function(){h._run.call(h)},Math.floor(b/a))}},_createPercentArea:function(a){var d=e("textbox",a);a=b(a.createElement("table"));a.append("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e");var c=a.find("td");c.width(this.group.style.width);c.height(this.group.style.height);c.css("line-height",this.group.style.height);c.addClass("throbber-percent");d.appendChild(a[0]);this.group.appendChild(d)},setPercent:function(a){b(this.group).find(".throbber-percent").html(a)}};var ga=function(a,d){this.style=
b.extend(!0,{},a);this.canvas=d.createElement("canvas");this.baseDiv=d.createElement("div");this.percentDiv=d.createElement("div");var c=this.canvas,e=this.baseDiv,g=this.percentDiv;c.width=this.style.throbber.width;c.height=this.style.throbber.height;c.style.display="block";c.style.position="absolute";e.style.width=this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";e.appendChild(c);g.style.width=this.style.throbber.width+"px";g.style.height=this.style.throbber.height+"px";
g.style.lineHeight=this.style.throbber.height+"px";g.className="throbber-percent";e.appendChild(g);this.positions=f(c.width,this.style.throbber.lines)};ga.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){b(this.baseDiv).remove();this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,d=b.getContext("2d"),c=this.highlightPos,e=this.positions,
f=this.style.throbberLine.color,g=this.style.throbberLine.width,l=this.style.throbber.roundTime;b.width=b.width;for(var h=0,k=e.length;h<k;h++){d.beginPath();d.strokeStyle=f;d.lineWidth=g;var n=h+1;d.globalAlpha=n==c?1:n==c+1||n==c-1?.75:.4;var r=e[h],n=r.from,r=r.to;d.moveTo(n.x,n.y);d.lineTo(r.x,r.y);d.stroke()}c==a?c=0:c++;this.highlightPos=c;if(Y)b.className="throbber-canvas";else{var p=this;this._runId=setTimeout(function(){p._run.call(p)},Math.floor(l/a))}}},setPercent:function(a){this.percentDiv.innerHTML=
a}};N.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children(".h5-indicator").length)return this;this._displayed=!0;for(var a=this,d=this._fadeInTime,c=function(){var d=b(window);a._isScreenLock&&(z(a._$overlay,a._$content),I||(d.bind("touchmove",a._scrollHandler),d.bind("scroll",a._scrollHandler)));d.bind("orientationchange",a._resizeHandler);d.bind("resize",a._resizeHandler)},e=0,f=this._$target.length;e<f;e++){var g=this._$target.eq(e),l=this._$content.eq(e),h=
this._$skin.eq(e),r=this._$overlay.eq(e),p=this._settings,m=n(g[0],"position");this._isScreenLock||"static"!==m||(g.data("before-position",m),g.data("before-zoom",n(g[0],"zoom")),g.css({position:"relative",zoom:"1"}));var m=S(g[0]),v=null;p.showThrobber&&(v=V?new ga(this._styles,m):Q?new k(this._styles,m):null);v&&(a._throbbers.push(v),a.percent(this._settings.percent),v.show(l.children(".indicator-throbber")[0]));g.append(h).append(r);this._showContent&&g.append(l)}e=this._$skin.toArray();Array.prototype.push.apply(e,
this._$content.toArray());Array.prototype.push.apply(e,this._$overlay.toArray());e=b(e);0>d?(e.css("display","block"),c()):L(e,d,c);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&I||0===this._$overlay.length))for(var d=0,c=this._$target.length;d<c;d++){var e=this._$content.eq(d),f=this._$overlay.eq(d);b=this._$target.eq(d);var g=this._$skin.eq(d);if(this._isScreenLock)e=P(),b=X();else{f.css("display","none");e.css("display","none");
var l=b[0];a=l.scrollWidth;b=l.scrollHeight;if(da)a=Math.max(a,l.clientWidth),b=Math.max(b,l.clientHeight);else if(T.isIE&&"function"===typeof getComputedStyle){var l=ea(S(l)).getComputedStyle(l,null),h=parseFloat(l.width)+parseFloat(l.paddingLeft)+parseFloat(l.paddingRight);a+=h-parseInt(h)-1;l=parseFloat(l.height)+parseFloat(l.paddingTop)+parseFloat(l.paddingBottom);b+=l-parseInt(l)-1}f.css("display","block");e.css("display","block");e=a}f[0].style.width=e+"px";f[0].style.height=b+"px";if(da||O)g[0].style.width=
e+"px",g[0].style.height=b+"px"}},_reposition:function(){for(var c=0,e=this._$target.length;c<e;c++){var f=this._$target.eq(c),g=this._$content.eq(c);if(this._isScreenLock){var k=R();I?g.css("top",(k-h(g[0]))/2+"px"):g.css("top",ma()+k/2-h(g[0])/2+"px")}else g.css("top",f.scrollTop()+(d(f[0])-h(g[0]))/2);var k=l(g[0])-G(g[0]),r=0;g.children().each(function(){var d=b(this);if("none"===n(d[0],"display"))return!0;r+=a(this,!0)});g.css("width",r+k);g.css("left",f.scrollLeft()+(l(f[0])-a(g[0]))/2)}},hide:function(){if(!this._displayed)return this;
this._displayed=!1;var a=this,d=this._fadeOutTime,c=this._$skin.toArray();Array.prototype.push.apply(c,this._$content.toArray());Array.prototype.push.apply(c,this._$overlay.toArray());for(var e=b(c),c=function(){var d=b(window);e.remove();a._isScreenLock||a._$target.each(function(a,d){var c=b(d);c.css({position:c.data("before-position"),zoom:c.data("before-zoom")});c.removeData("before-position").removeData("before-zoom")});d.unbind("touchmove",a._scrollHandler);d.unbind("scroll",a._scrollHandler);
d.unbind("orientationchange",a._resizeHandler);d.unbind("resize",a._resizeHandler);a._resizeEventTimerId&&clearTimeout(a._resizeEventTimerId);a._scrollEventTimerId&&clearTimeout(a._scrollEventTimerId)},f=0,g=this._throbbers.length;f<g;f++)this._throbbers[f].hide();0>d?(e.css("display","none"),c()):fa(e,d,c);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,d=this._throbbers.length;b<d;b++)this._throbbers[b].setPercent(a);
return this},message:function(a){if(!D(a))return this;if(!this._redrawable)return this._lastMessage=a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):this._$content.remove();this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();
a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;I||da||O?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};g.u.obj.expose("h5.ui",{indicator:function(a,d){return b.isPlainObject(a)?new N(a.target,a):new N(a,d)},isInView:function(a,d){var c,
e,f,g,l=b(a);if("undefined"===typeof d)e=t("Height"),g=t("Width"),c=ma(),f=aa();else{g=b(d);if(0===g.find(l).length)return;f=u(g);c=f.top+parseInt(g.css("border-top-width"));f=f.left+parseInt(g.css("border-left-width"));e=g.innerHeight();g=g.innerWidth()}e=c+e;g=f+g;var h=u(l),k=h.top,h=h.left,n=k+l.outerHeight(),l=h+l.outerWidth();return(c<=k&&k<e||c<n&&n<=e)&&(f<=h&&h<g||f<l&&l<=g)},scrollToTop:function(){function a(){1===window.scrollY&&(d=0);0<d&&(window.scrollTo(0,1),d--,setTimeout(a,500))}var d=
3;window.scrollTo(0,1);1!==b(window).scrollTop()&&setTimeout(a,500)}})})();(function(){function c(){var a=b.mobile.activePage,a=a&&a[0]&&a[0].id;return D(a)&&0<a.length?a:null}function e(){var a=c();null!==a&&b(function(){t.addCSS(a);t.bindController(a)})}function f(a,b){for(var c in z)for(var e=z[c],f=a===c,g=0,h=e.length;g<h;g++){var n=e[g];if(f)n[(b?"enable":"disable")+"Listeners"]()}for(c in y)for(e=y[c],f=a===c,g=0,h=e.length;g<h;g++)if(n=e[g],f)n[(b?"enable":"disable")+"Listeners"]()}function r(a,
b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var c=a.split("."),e=b.split("."),f=c.length,g=0;g<f;g++){if(null==e[g])return 1;var h=parseInt(c[g],10),n=parseInt(e[g],10);if(h!==n)return h<n?-1:1}return null!=e[f]?-1:0}var w,t=null,u={},z={},y={},p={},n={},H=!1,G=!1,h=!1;g.u.obj.ns("h5.ui.jqm");g.ui.jqm.dataPrefix="h5";var a={__name:"JQMController",__ready:function(){var a=this,e=c();b(':jqmData(role\x3d"page"), :jqmData(role\x3d"dialog")').each(function(){a.loadScript(this.id)});
var f=this.$find("#"+e);f.one("h5controllerready.emulatepageshow",function(){h&&f[0]===b.mobile.activePage[0]&&f.trigger("h5jqmpageshow",{prevPage:b("")})})},':jqmData(role\x3d"page"), :jqmData(role\x3d"dialog") pageinit':function(a){w||this._initPage(a.event.target.id)},':jqmData(role\x3d"page"), :jqmData(role\x3d"dialog") pagecreate':function(a){w&&this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(a){b(a.event.target).trigger("h5jqmpagehide",
{nextPage:b.mobile.activePage});G=!0;a=a.event.target.id;var c=z[a],e=y[a];if(c){for(var f=0,g=c.length;f<g;f++)c[f].dispose();z[a]=[]}if(e){f=0;for(g=e.length;f<g;f++)e[f].dispose();y[a]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);f(a,!0)},"{rootElement} pagehide":function(a){G||b(a.event.target).trigger("h5jqmpagehide",{nextPage:a.evArg.nextPage});G=!1;a=a.event.target.id;f(a,!1);this.removeCSS(a)},"{rootElement} pageshow":function(a){var c=!1,e=b(a.event.target),
f=a.evArg?a.evArg.prevPage:b("");if(a=z[e[0].id])for(var g=0,h=a.length;g<h;g++)if(!a[g].isReady){e.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){b.mobile.activePage[0]===e[0]&&e.trigger("h5jqmpageshow",{prevPage:f})});c=!0;break}c||e.trigger("h5jqmpageshow",{prevPage:f})},"{rootElement} h5controllerbound":function(a){a=a.evArg;if(this!==a){var e=c();null!==e&&-1===b.inArray(a,z[e])&&(y[e]||(y[e]=[]),y[e].push(a))}},"{rootElement} h5controllerunbound":function(a){var e=
a.evArg;a=c();null!==a&&(e=b.inArray(e,y[a]),-1!==e&&y[a].splice(e,1))},loadScript:function(a){a=b("#"+a);var c=b.trim(a.data(this.getDataAttribute("script")));if(0!==c.length)return c=b.map(c.split(","),function(a){return b.trim(a)}),a=1==a.data(this.getDataAttribute("async")),g.u.loadScript(c,{async:a})},getDataAttribute:function(a){var b=g.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=u[a],c=p[a];if(b&&0!==b.length){z[a]||(z[a]=[]);for(var e=
z[a],f=0,h=b.length;f<h;f++){for(var n=b[f],r=!1,m=0,t=e.length;m<t;m++){var w=e[m];if(w&&w.__name===n.__name){r=!0;break}}r||z[a].push(g.core.controller("#"+a,n,c[f]))}}},addCSS:function(a){if(a=n[a])for(var c=document.getElementsByTagName("head")[0],e=c.getElementsByTagName("link"),f=e.length,g=0,h=a.length;g<h;g++){for(var r=b.mobile.path.parseUrl(a[g]).filename,p=!1,m=0;m<f;m++)if(b.mobile.path.parseUrl(e[m].href).filename===r){p=!0;break}p||(r=document.createElement("link"),r.type="text/css",
r.rel="stylesheet",r.href=a[g],c.appendChild(r))}},removeCSS:function(a){var e=n[a];if(e&&(a=c(),null!==a)){var f=n[a];b("link").filter(function(){var a=b(this).attr("href");return-1!==b.inArray(a,e)&&-1===b.inArray(a,f)}).remove()}}};g.u.obj.expose("h5.ui.jqm.manager",{init:function(){H||(H=!0,w=0<=r(b.mobile.version,"1.4"),b(document).one("pageshow",function(){h=!0}),b(function(){t=O.core.controllerInternal("body",a,null,{managed:!1});e()}))},define:function(a,f,g,h){D(a)||m(12E3,"id");null==f||
D(f)||F(f)||m(12E3,"cssSrc");null!=g&&((D(g)||F(g))&&m(12001),b.isPlainObject(g)&&"__name"in g||m(12E3,"controllerDefObject"),null==h||b.isPlainObject(h)||m(12E3,"initParam"));n[a]||(n[a]=[]);u[a]||(u[a]=[]);p[a]||(p[a]=[]);b.merge(n[a],b.map(b.makeArray(f),function(c,e){return-1!==b.inArray(c,n[a])?null:c}));g&&-1===b.inArray(g,u[a])&&(u[a].push(g),p[a].push(h));H&&null!==c()?e():this.init()}})})();(function(){function c(c,f,g){this._$arrowbox=b(c).css("display","none");this.setContent(f);b(g&&g.container||
g.target.parentElement||document.body).append(this._$arrowbox);this._$arrowbox.data("validation-balloon",this);g=g||{};g.cls&&this._$arrowbox.addClass(g.cls)}b.extend(c.prototype,{show:function(c){if(!this._isDisposed){var f=this._$arrowbox;this.hide();f.css("display","block");if(c){var g=c.direction||"top";f.addClass(g);var m=c.position,t=b(c.target);c=m?0:t.outerWidth();var u=m?0:t.outerHeight(),m=m?b.extend({},m):{top:t.offset().top,left:t.offset().left};"top"===g||"bottom"===g?(m.left+=(c-f.outerWidth())/
2,m.top="top"===g?m.top-(f.outerHeight()+34):m.top+(u+34)):(m.top+=(u-f.outerHeight())/2,m.left="left"===g?m.left-(f.outerWidth()+34):m.left+(c+34));f.css(m)}}},hide:function(){this._isDisposed||this._$arrowbox&&this._$arrowbox.css("display","none")},setContent:function(b){this._isDisposed||(this._$arrowbox.children().remove(),this._$arrowbox.append(b))},dispose:function(){this._isDisposed||(this.hide(),this._$arrowbox.remove(),this._$arrowbox=null,this._isDisposed=!0)}});g.core.expose({__name:"h5.ui.components.BalloonController",
__init:function(b){this.view.register("balloon",'\x3cdiv class\x3d"validation-balloon"\x3e\x3c/div\x3e')},create:function(b,f){var g=this.view.get("balloon");return new c(g,b,f)},getBalloonFromElement:function(c){return b(c).data("validation-balloon")}})})();(function(){var c=g.u.str.format,e={required:"{displayName}は必須項目です。",min:function(b){return c("{displayName}は{targetViolation.ruleValue.min}{1}数値を入力してください。",b,b.targetViolation.ruleValue.inclusive?"以上の":"より大きい")},max:function(b){return c("{displayName}は{targetViolation.ruleValue.max}{1}数値を入力してください。",
b,b.targetViolation.ruleValue.inclusive?"以下の":"未満の")},pattern:"{displayName}は正規表現{targetViolation.ruleValue.regexp}を満たす文字列を入力してください。",digits:"{displayName}は整数部分{targetViolation.ruleValue.integer}桁、小数部分{targetViolation.ruleValue.fraction}桁以下の数値を入力してください。",size:function(b){var e="",g="",m=b.targetViolation.ruleValue.min,u=b.targetViolation.ruleValue.max;null!=m&&(g=c("{0}以上",m));null!=u&&(e=c("{0}以下",u));return c("{displayName}は{1}{2}の長さでなければいけません。",b,g,e)},future:"{displayName}は現在時刻より未来の時刻を入力してください。",
past:"{displayName}は現在時刻より過去の時刻を入力してください。",assertNull:"{displayName}はnullでなければなりません。",assertNotNull:"{displayName}はnullでない値を設定してください。",assertFalse:"{displayName}はfalseとなる値を入力してください。",assertTrue:"{displayName}はtrueとなる値を入力してください。",customFunc:"{displayName}は条件を満たしません。"};O.validation||(O.validation={});O.validation.createValidateErrorMessage=function(c,m,w,t,u,z,y,p){p=w&&w.displayName||p||c;w=w&&w.message;null==w&&null!=y&&(w=y);null==t&&(t=0);z=b.extend({},m,{displayName:p,rules:z});z.targetViolation=
m.violation[t];if(D(w))return g.u.str.format(w,z);if(K(w))return w(z);t=m.violation[t].ruleName;u=u[t];null==u&&(u=e[t]);return null!=u?K(u)?u(z):g.u.str.format(u,z):g.u.str.format("{0}:{1}はルール{2}を満たしません",c,m.value,t)};g.core.expose({__name:"h5.ui.validation.MessageOutputController",_container:null,_wrapper:null,_setting:{},_validatorDefaultMessageMap:{},_outputPluginDefaultMessage:null,_outputPluginDefaultDisplayName:null,_setOutputDefaultMessage:function(b){this._outputPluginDefaultMessage=b},_setOutputDefaultDisplayName:function(b){this._outputPluginDefaultDisplayName=
b},_setDefaultMessage:function(b,c){this._validatorDefaultMessageMap[b]=c},setContainer:function(b){this._container=b},setWrapper:function(b){this._wrapper=b},addMessageSetting:function(b){if(this._setting)for(var c in b)this._setting[c]=b[c];else this._setting=b},clearMessage:function(){this._container&&b(this._container).empty()},appendMessage:function(c){var e=b(this._container);if(e.length){var m=this._wrapper;m?g.u.str.startsWith(b.trim(m),"\x3c")?(m=b(m),m.html(c)):m=b(document.createElement(m)).html(c):
m=b.parseHTML(c);e.append(m)}},getMessageByValidationResult:function(b,c,e){var g=b.invalidReason[c];if(!g)return null;b=this._getAppliedRules(b,c);return O.validation.createValidateErrorMessage(c,g,this._setting[c],e,this._validatorDefaultMessageMap,b,this._outputPluginDefaultMessage,this._outputPluginDefaultDisplayName)},_getAppliedRules:function(b,c){for(var g=b._nameToRuleSetMap[c].getAll(),m=0,u=g.length;m<u;m++){var z=g[m];z.message=this._validatorDefaultMessageMap[z.name]||e[z.name]}return g},
getAllMessagesByValidationResult:function(b,c){return this._getAllMessagesForName(b,b.invalidReason[c],c)},_getAllMessagesForName:function(b,c,e){if(!c)return[];b=this._getAppliedRules(b,e);for(var g=[],m=0,z=c.violation.length;m<z;m++){var y=O.validation.createValidateErrorMessage(e,c,this._setting[e],m,this._validatorDefaultMessageMap,b,this._outputPluginDefaultMessage,this._outputPluginDefaultDisplayName);g.push(y)}return g},appendMessageByValidationResult:function(c,e,g){var m=c.invalidProperties.sort();
e=D(e)?[e]:e;for(var u=0,z=m.length;u<z;u++){var y=m[u];if(!e||-1!==b.inArray(y,e))if(!0===g)for(var y=this.getAllMessagesByValidationResult(c,y),p=0,n=y.length;p<n;p++)this.appendMessage(y[p]);else y=this.getMessageByValidationResult(c,y),this.appendMessage(y)}}})})();(function(){g.core.expose({__name:"h5.ui.validation.Style",_setting:{},_styleAppliedElements:{},_updateOn:null,_setSetting:function(b){this._setting=b;null==b.updateOn?this._updateOn=["validate","change"]:(b=b.updateOn,F(b)?this._updateOn=
b:this._updateOn=[b])},_shouldUpdateOn:function(c){return-1!==b.inArray(c,this._updateOn)},_onValidate:function(b){if(this._shouldUpdateOn("validate"))for(var e=b.properties,f=0,g=e.length;f<g;f++){var m=e[f];this._setStyle(this.parentController._getElementByName(m),m,b)}},_onFocus:function(b,e,f){this._shouldUpdateOn("focus")&&this._setStyle(b,e,f)},_onBlur:function(b,e,f){this._shouldUpdateOn("blur")&&this._setStyle(b,e,f)},_onChange:function(b,e,f){this._shouldUpdateOn("change")&&this._setStyle(b,
e,f)},_onKeyup:function(b,e,f){this._shouldUpdateOn("keyup")&&this._setStyle(b,e,f)},reset:function(){for(var c in this._styleAppliedElements){var e=this._styleAppliedElements[c],f=b.extend({},this._setting,this._setting.property&&this._setting.property[c]);this._setValidateState(null,e,f,c)}},_setStyle:function(c,e,f){var g=b.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!g.off){var m=g.replaceElement;if(c=K(m)?m(c):m||c)-1!==b.inArray(e,f.validatingProperties)?(this._setValidateState("validating",
c,g),f.addEventListener("validate",this.own(function(b){b.name===e&&this._setValidateState(b.isValid?"success":"error",c,g,e)}))):this._setValidateState(-1===b.inArray(e,f.invalidProperties)?"success":"error",c,g,e)}},_setValidateState:function(c,e,f,g){var m=f.errorClassName,t=f.successClassName,u=f.validatingClassName;b(e).removeClass(m).removeClass(t).removeClass(u);null==c?this._styleAppliedElements[g]&&delete this._styleAppliedElements[g]:(c=f[c+"ClassName"],b(e).addClass(c),this._styleAppliedElements[g]=
e)},_setDefaultMessage:function(b,e){}})})();(function(){g.core.expose({__name:"h5.ui.validation.Composition",_messageOutputController:g.ui.validation.MessageOutputController,_updateOn:null,_lastValidationResult:null,_hideWhenEmpty:null,_hideWhenEmptyChanged:!1,_container:null,_setting:{},__construct:function(){this._hideWhenEmpty=!1},_setSetting:function(b){this._setting=b;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_shouldUpdateOn:function(c){return this._updateOn?
-1!==b.inArray(c,this._updateOn)?!0:!1:!1},_update:function(b,e,f){!0!==this._setting.off&&(b=f,this._showAllErrors&&(b=this.parentController.getLastValidationResult()),this._lastValidationResult=b,this._messageOutputController.clearMessage(),this._messageOutputController.appendMessageByValidationResult(b,null,this._showAllErrors),this._updateVisible())},_onChange:function(b,e,f){this._shouldUpdateOn("change")&&this._update(b,e,f)},_onBlur:function(b,e,f){this._shouldUpdateOn("blur")&&this._update(b,
e,f)},_onFocus:function(b,e,f){this._shouldUpdateOn("focus")&&this._update(b,e,f)},_onKeyup:function(b,e,f){this._shouldUpdateOn("keyup")&&this._update(b,e,f)},_updateVisible:function(){var c=b(this._container);this._hideWhenEmptyChanged&&(this._hideWhenEmptyChanged=!1,c.show());this._lastValidationResult&&0<this._lastValidationResult.invalidCount?(!0===this._hideWhenEmpty&&c.show(),c.addClass("h5-composition-has-error")):(!0===this._hideWhenEmpty&&c.hide(),c.removeClass("h5-composition-has-error"))},
_onValidate:function(b){this._shouldUpdateOn("validate")&&this._update(null,null,b)},_onAsyncValidate:function(b,e,f){this._update(null,null,f)},reset:function(){this._update(null,null,this.parentController.getLastValidationResult())},_setChildSetting:function(){var b=this._setting;if(null==b.updateOn)this._updateOn=["validate"];else{var e=b.updateOn;F(e)?this._updateOn=e:this._updateOn=[e]}this._showAllErrors=!1!==b.showAllErrors;this._container=b.container;this._messageOutputController.setContainer(b.container);
this._messageOutputController.setWrapper(b.wrapper);this._hideWhenEmpty="hideWhenEmpty"in b&&!0===b.hideWhenEmpty?!0:!1;this._hideWhenEmptyChanged=!0;this._updateVisible();"message"in b&&this._messageOutputController._setOutputDefaultMessage(b.message);"displayName"in b&&this._messageOutputController._setOutputDefaultDisplayName(b.displayName);var b=b.property,e={},f;for(f in b)e[f]={displayName:b[f].displayName,message:b[f].message};this._messageOutputController.addMessageSetting(e)},_setDefaultMessage:function(b,
e){this._messageOutputController._setDefaultMessage(b,e)}})})();(function(){g.core.expose({__name:"h5.ui.validation.ErrorBalloon",_messageOutputController:g.ui.validation.MessageOutputController,_setting:{},_balloonTargets:[],_nameToTargetMap:{},_updateOn:null,_setSetting:function(b){this._setting=b;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(b){},_onChange:function(b,e,f){this._shouldUpdateOn("change")&&this._setErrorBalloon(b,
e,f,"change")},_onFocus:function(b,e,f){this._shouldUpdateOn("focus")&&this._setErrorBalloon(b,e,f,"focus")},_onBlur:function(b,e,f){this._shouldUpdateOn("blur")&&this._setErrorBalloon(b,e,f,"blur")},_onKeyup:function(b,e,f){this._shouldUpdateOn("keyup")&&this._setErrorBalloon(b,e,f,"keyup")},reset:function(){for(var b=0,e=this._balloonTargets.length;b<e;b++)this._hideBalloon(this._balloonTargets[b]);this._balloonTargets=[];this._nameToTargetMap={}},_setErrorBalloon:function(c,e,f,m){var w=b.extend({},
this._setting,this._setting.property&&this._setting.property[e]);if(!w.off){var t=null,u=null;if(this.parentController._isGroupName(e))var u=b(this.parentController._getInputGroupElements()).filter('[data-h5-input-group-container\x3d"'+e+'"]'),z=u.has(document.activeElement),u=0<z.length?z[0]:u[0];z=w.replaceElement;K(z)?(c=z(c),t=g.u.obj.isJQueryObject(c)?c[0]:c):t=D(z)?document.querySelector(z):g.u.obj.isJQueryObject(z)?z[0]:null!=z?z:u?u:c;if(t){var y=this._nameToTargetMap[e]?this._nameToTargetMap[e]:
t;if("blur"===m&&y!==document.activeElement&&0===b(document.activeElement).closest(y).length)this._hideBalloon(y,e);else{var p=w.placement||"top",n=w.container||null;-1!==b.inArray(e,f.validatingProperties)?f.addEventListener("validate",this.own(function(b){t===document.activeElement&&(b.isValid?this._hideBalloon(y,e):this._showBalloon(t,p,n,this._messageOutputController.getMessageByValidationResult(f,b.name)))})):f.invalidReason&&f.invalidReason[e]?(this.parentController._isGroupName(e)&&(this._nameToTargetMap[e]=
t),this._showBalloon(t,p,n,this._messageOutputController.getMessageByValidationResult(f,e),e)):this._hideBalloon(y,e)}}}},_showBalloon:function(b,e,f,m,w){this._hideBalloon(b,w);if(this._balloonController)w=this._balloonController.create(m,{target:b,container:f}),w.show({target:b,direction:e}),this._currentBalloon=w,this._addBalloonTarget(b);else{var t=g.core.controller(this.rootElement,g.ui.components.BalloonController);this.manageChild(t);t.readyPromise.done(this.own(function(){this._balloonController=
t;this._showBalloon(b,e,f,m)}))}},_hideBalloon:function(b,e){this._currentBalloon&&(this._currentBalloon.dispose(),this._currentBalloon=null);this._removeBalloonTarget(b);null!=e&&this._nameToTargetMap[e]&&delete this._nameToTargetMap[e]},_setChildSetting:function(){var b=this._setting;if(null==b.updateOn)this._updateOn=["focus","blur"];else{var e=b.updateOn;F(e)?this._updateOn=e:this._updateOn=[e]}"message"in b&&this._messageOutputController._setOutputDefaultMessage(b.message);"displayName"in b&&
this._messageOutputController._setOutputDefaultDisplayName(b.displayName);var b=b.property,e={},f;for(f in b)e[f]={displayName:b[f].displayName,message:b[f].message};this._messageOutputController.addMessageSetting(e)},_addBalloonTarget:function(c){-1<b.inArray(c,this._balloonTargets)||this._balloonTargets.push(c)},_removeBalloonTarget:function(c){c=b.inArray(c,this._balloonTargets);-1!==c&&this._balloonTargets.splice(c,1)},_setDefaultMessage:function(b,e){this._messageOutputController._setDefaultMessage(b,
e)},_shouldUpdateOn:function(c){return this._updateOn?-1!==b.inArray(c,this._updateOn)?!0:!1:!1}})})();(function(){var c={__name:"h5.ui.validation.BootstrapErrorBalloon",_hideBalloon:function(c,f){b(c).tooltip("hide");this._removeBalloonTarget(c);null!=f&&this._nameToTargetMap[f]&&delete this._nameToTargetMap[f]},_showBalloon:function(c,f,g,m,t){b(c).removeAttr("title").attr({"data-placement":f,"data-container":g,"data-original-title":m,"data-animation":!1}).tooltip({trigger:"manual",html:!0}).tooltip("show");
this._addBalloonTarget(c)}},c=b.extend({},g.ui.validation.ErrorBalloon,c);g.core.expose(c)})();(function(){g.core.expose({__name:"h5.ui.validation.Message",_messageElementMap:{},_messageOutputController:g.ui.validation.MessageOutputController,_updateOn:null,_wrapper:null,_setSetting:function(b){this._setting=b;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(b){if(this._shouldUpdateOn("validate"))for(var e=b.properties,f=0,g=e.length;f<
g;f++){var m=e[f];this._setMessage(this.parentController._getElementByName(m),m,b,"validate")}},_onFocus:function(b,e,f){this._shouldUpdateOn("focus")&&this._setMessage(b,e,f,"focus")},_onBlur:function(b,e,f){this._shouldUpdateOn("blur")&&this._setMessage(b,e,f,"blur")},_onChange:function(b,e,f){this._shouldUpdateOn("change")&&this._setMessage(b,e,f,"change")},_onKeyup:function(b,e,f){this._shouldUpdateOn("keyup")&&this._setMessage(b,e,f,"keyup")},reset:function(){for(var b in this._messageElementMap)this._removeMessage(b)},
_setMessage:function(c,e,f,m){var w=b.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!w.off)if("blur"===m)this._removeMessage(e);else if(-1!==b.inArray(e,f.validatingProperties))this._removeMessage(e),f.addEventListener("validate",this.own(function(b){b.name!==e||b.isValid||"focus"===m&&document.activeElement!==c||this._setMessage(c,e,f,m)}));else if(this._removeMessage(e),-1!==b.inArray(e,f.invalidProperties)){var t=w.appendMessage,w=w.replaceElement,w=K(w)?w(c):w||
c,u=this._messageOutputController.getMessageByValidationResult(f,e),z;z=null!=this._wrapper?g.u.str.startsWith(b.trim(this._wrapper),"\x3c")?b(this._wrapper):b(document.createElement(this._wrapper)):b('\x3cspan class\x3d"h5-message"\x3e\x3c/span\x3e');z.html(u);this._messageElementMap[e]=z;t?t(z[0],w,e):w&&b(w).after(z)}},_removeMessage:function(b){var e=this._messageElementMap[b];e&&(e.remove(),delete this._messageElementMap[b])},_setChildSetting:function(){var b=this._setting;if(null==b.updateOn)this._updateOn=
["change","validate"];else{var e=b.updateOn;F(e)?this._updateOn=e:this._updateOn=[e]}"wrapper"in b&&(this._wrapper=b.wrapper);"message"in b&&this._messageOutputController._setOutputDefaultMessage(b.message);"displayName"in b&&this._messageOutputController._setOutputDefaultDisplayName(b.displayName);var b=b.property,e={},f;for(f in b)e[f]={displayName:b[f].displayName,message:b[f].message};this._messageOutputController.addMessageSetting(e)},_setDefaultMessage:function(b,e){this._messageOutputController._setDefaultMessage(b,
e)},_shouldUpdateOn:function(c){return-1!==b.inArray(c,this._updateOn)}})})();(function(){g.core.expose({__name:"h5.ui.validation.AsyncIndicator",_indicators:{},_updateOn:null,_setSetting:function(b){this._setting=b;null==b.updateOn?this._updateOn=["validate","change"]:(b=b.updateOn,F(b)?this._updateOn=b:this._updateOn=[b])},_shouldUpdateOn:function(c){return-1!==b.inArray(c,this._updateOn)},_onValidate:function(c){if(this._shouldUpdateOn("validate"))for(var e=c.validatingProperties,f=c.properties,
g=0,m=f.length;g<m;g++){var t=f[g];if(-1!==b.inArray(t,e)){var u=this.parentController._getElementByName(t);this._showIndicator(u,t,c)}else this._hideIndicator(t)}},_onFocus:function(c,e,f){this._shouldUpdateOn("focus")&&(-1!==b.inArray(e,f.validatingProperties)?(c=this.parentController._getElementByName(e),this._showIndicator(c,e,f)):this._hideIndicator(e))},_onBlur:function(c,e,f){this._shouldUpdateOn("blur")&&-1!==b.inArray(e,f.validatingProperties)&&this._showIndicator(c,e,f)},_onChange:function(c,
e,f){this._shouldUpdateOn("change")&&-1!==b.inArray(e,f.validatingProperties)&&this._showIndicator(c,e,f)},_onKeyup:function(c,e,f){this._shouldUpdateOn("keyup")&&-1!==b.inArray(e,f.validatingProperties)&&this._showIndicator(c,e,f)},reset:function(){for(var b in this._indicators)this._hideIndicator(b)},_showIndicator:function(c,e,f){var m=b.extend({},this._setting,this._setting.property&&this._setting.property[e]);!m.off&&(m=m.replaceElement,c=K(m)?m(c):m||c)&&(this._indicators[e]=this._indicators[e]||
g.ui.indicator({target:c,block:!1}),this._indicators[e].show(),f.addEventListener("validate",this.own(function(b){e===b.name&&this._hideIndicator(b.name)})),f.addEventListener("abort",this.own(function(b){this._hideIndicator(e)})))},_hideIndicator:function(b){this._indicators[b]&&(this._indicators[b].hide(),delete this._indicators[b])},_setDefaultMessage:function(b,e){}})})();(function(){function c(a,c){return-1===b.inArray(a,c)?(c.push(a),!0):!1}var e=O.validation.ValidationResult,f={style:g.ui.validation.Style,
composition:g.ui.validation.Composition,balloon:g.ui.validation.ErrorBalloon,bsBalloon:g.ui.validation.BootstrapErrorBalloon,message:g.ui.validation.Message,asyncIndicator:g.ui.validation.AsyncIndicator},m=function(a){if(null!=b(a).data("required"))return!0},w=function(a){if(null!=b(a).data("assertFalse"))return!0},t=function(a){if(null!=b(a).data("assertTrue"))return!0},u=function(a){if(null!=b(a).data("nul"))return!0},z=function(a){if(null!=b(a).data("notNull"))return!0},y=function(a){a=b(a).data("max");
if(null!=a)return"number"===typeof a?a:F(a)?[parseFloat(a[0]),"true"===b.trim(a[1])]:parseFloat(a)},p=function(a){a=b(a).data("min");if(null!=a)return"number"===typeof a?a:F(a)?[parseFloat(a[0]),"true"===b.trim(a[1])]:parseFloat(a)},n=function(a){a=b(a).data("future");if(null!=a)return new Date(a)},D=function(a){a=b(a).data("past");if(null!=a)return new Date(a)},G=function(a){a=b(a).data("pattern");if(null!=a)return new RegExp(a)},h=function(a){a=b(a).data("size");if(null!=a){if(F(a)){for(var c=0,
e=a.length;c<e;c++)a[c]=parseInt(a[c]);return a}return parseInt(a)}};g.core.expose({__name:"h5.ui.FormController",_config:{},_bindedForm:null,_ruleCreators:[],_plugins:[],_validationLogic:g.validation.FormValidationLogic,_waitingValidationResultMap:{},_waitingAllValidationResult:null,_setting:{},_pluginSetting:{},setSetting:function(a){this._setting=a;"customRule"in a&&this._addCustomRule(a.customRule);"isAllRulesEnabledWhenEmpty"in a&&this._validationLogic.setAllRulesEnabledWhenEmpty(!0===a.isAllRulesEnabledWhenEmpty);
if("ruleDefault"in a)for(var b in a.ruleDefault){var c=a.ruleDefault[b];"isForceEnabledWhenEmpty"in c&&this._validationLogic.setRuleForceEnabledWhenEmpty(b,!0===c.isForceEnabledWhenEmpty);"message"in c&&this.setDefaultMessage(b,c.message);"validateOn"in c&&this._validationLogic._setRuleValidateTiming(b,c.validateOn);"resolveOn"in c&&this._validationLogic._setRuleResolveTiming(b,c.resolveOn)}if("customRule"in a)for(b in a.customRule)c=a.customRule[b],"message"in c&&this.setDefaultMessage(b,c.message);
a=this._plugins;for(var e in a)b=a[e],b._setSetting&&b._setSetting(this._margePluginSettings(e)),this._setDefaultMessages(b);this.isInit&&this._updateRuleByElement()},_addCustomRule:function(a){for(var b in a){var c=a[b];if(!("message"in c))throw Error("カスタムバリデータの定義にはmessageの指定が必須です。定義しようとしたルール\x3d"+b);g.validation.defineRule(b,c.func,null,40,!1,c.validateOn,c.resolveOn);"isForceEnabledWhenEmpty"in c&&this._validationLogic.setRuleForceEnabledWhenEmpty(b,c.isForceEnabledWhenEmpty)}},_margePluginSettings:function(a){this._pluginSetting;
var c=this._setting,e=c.output,c=c.property,e=b.extend({},e&&e[a]);e.property={};for(var f in c){var h=b.extend({},c[f]);b.extend(h,h[a]);var m=g.u.obj.getByPath("output."+a,h);delete h.output;e.property[f]=b.extend({},h,m)}return e},__construct:function(){this._addRuleCreator("required",m);this._addRuleCreator("assertFalse",w);this._addRuleCreator("assertTrue",t);this._addRuleCreator("nul",u);this._addRuleCreator("notNull",z);this._addRuleCreator("max",y);this._addRuleCreator("min",p);this._addRuleCreator("future",
n);this._addRuleCreator("past",D);this._addRuleCreator("pattern",G);this._addRuleCreator("size",h);this._lastResult=this._createEmptyValidationResult();var a=this;this._asyncValidateResultListenerWrapper=function(b){switch(b.type){case "validate":a._asyncValidateListener(b);break;case "abort":a._asyncAbortListener(b);break;case "validateComplete":a._asyncValidateCompleteListener(b)}}},_asyncValidateResultListenerWrapper:null,__init:function(){"FORM"===this.rootElement.tagName.toUpperCase()&&(this._bindedForm=
this.rootElement,b(this._bindedForm).prop("novalidate",!0));this._updateRuleByElement();if(this._bindedForm)this.on(this._bindedForm,"submit",this._submitHandler)},_updateRuleByElement:function(){var a={};b(this._getElements()).each(this.ownWithOrg(function(b){var c=b.getAttribute("name");if(null!=c){var e={};a[c]=e;for(var c=0,f=this._ruleCreators.length;c<f;c++){var g=this._ruleCreators[c].key,h=this._ruleCreators[c].func,h=h(b);void 0!==h&&(e[g]=h)}b=b.attributes;c=0;for(f=b.length;c<f;c++)g=b[c].name,
this._startsWith(g,"data-h5-v-")&&(g=g.substr(10),e[g]=!0)}}));this.addRule(a)},_startsWith:function(a,b){return a.substr(0,b.length)===b},addOutput:function(a){if(this.isInit){a=b.isArray(a)?a:[a];for(var c=0,e=a.length;c<e;c++){var g=a[c],h=f[g];h?this._addOutputPlugin(g,h):this.log.warn('プラグイン"{0}"は存在しません',g)}}else this.initPromise.done(this.own(function(){this.addOutput(a)}))},addRule:function(a){a&&this._validationLogic.addRule(a)},removeRule:function(a){this._validationLogic.removeRule(a);this.validate(a)},
enableRule:function(a){this._validationLogic.enableRule(a)},disableRule:function(a){this._validationLogic.disableRule(a)},getValue:function(a){a=a&&(F(a)?a:[a]);var c=b(this._getElements()),e=b(this._getInputGroupElements()),f=this._setting&&this._setting.property||{},g={},h=[],k=this.rootElement;c.each(function(){var c=this.name;h.push(c);var d=g,m=null;e.find(this).length&&(m=b(this).closest("[data-h5-input-group-container]").data("h5-input-group-container"));if(m){h.push(m);if(a&&-1===b.inArray(c,
a)&&-1===b.inArray(m,a))return;g[m]=g[m]||{};d=g[m]}else if(a&&-1===b.inArray(c,a))return;if("file"===this.type){var m=this.files,n=m.length;if(n){d[c]=d[c]||[];for(var p=0;p<n;p++)d[c].push(m[p])}}else"radio"===this.type&&!1===this.checked||!c||(n=(m=f[c]&&f[c].valueFunc)?m(k,c):b(this).val(),m&&void 0===n||("checkbox"===this.type&&!1===this.checked&&(n=null),f[c]&&f[c].isArray&&(n=Q(n)),void 0!==d[c]?(b.isArray(d[c])||(d[c]=[d[c]]),b.isArray(n)?Array.prototype.push.apply(d[c],n):d[c].push(n)):d[c]=
n))});for(var m in f)a&&-1===b.inArray(m,a)||-1!==b.inArray(m,h)||(c=(c=f[m]&&f[m].valueFunc)&&c(k,m),void 0!==c&&(g[m]=c));return g},setValue:function(a){var c=b(this._getElements()),e={},f={},g;for(g in a)if(b.isPlainObject(a[g]))for(var h in a[g])f[h]=a[g][h];else f[g]=a[g];a=f;c.each(function(){var c=this.name;if(c){var d=a[c];if("radio"===this.type||"checkbox"===this.type)b.isArray(d)&&(e[c]=e[c]?e[c]+1:0,d=d[e[c]]),b(this).prop("checked",d);else if(b(this).is("select[multiple]")){if(b(this).val([]),
b.isArray(d)&&(e[c]=e[c]||0,d=d.slice(e[c])),null!=d)for(var f=[],g=0,h=d.length;g<h;g++){f.push(d[g]);b(this).val(f);e[c]++;var m=b(this).val(),m=b.isArray(m)?m:[m];if(m.length<f.length){e[c]--;break}}}else b.isArray(d)&&(e[c]=e[c]||0,d=d[e[c]++]),b(this).val(d)}})},clearValue:function(){b(this._getElements()).each(function(){"radio"===this.type||"checkbox"===this.type?b(this).prop("checked",!1):b(this).val(null)})},resetValue:function(){this._bindedForm&&this._bindedForm.reset()},resetValidation:function(){this._lastResult=
this._createEmptyValidationResult();this._waitingValidationResultMap={};var a=this._plugins,b;for(b in a)this._resetPlugin(b,a[b]);this._fireValidationUpdateEvent("reset")},validate:function(a){a=this._validate(a,"validate");this._callPluginValidateEvent("_onValidate",a);this._fireValidationUpdateEvent("validate");return a},getOutput:function(a){return this._plugins[a]},setPreValidationHook:function(a){this._validationLogic.setPreValidationHook(a)},"{document} focusin":function(a){this._pluginElementEventHandler(a,
"_onFocus")},"{document} focusout":function(a){this._pluginElementEventHandler(a,"_onBlur")},"{document} keyup":function(a){this._pluginElementEventHandler(a,"_onKeyup")},"{document} change":function(a){this._pluginElementEventHandler(a,"_onChange")},_getElementByName:function(a){var c=this._setting.property&&this._setting.property[a]&&this._setting.property[a].srcElement;return c||(c=b(this._getElements()).filter('[name\x3d"'+a+'"]')[0])?c:(a=b(this._getInputGroupElements()).filter('[data-h5-input-group-container\x3d"'+
a+'"]')[0])?a:null},_getElements:function(){var a=this.$find("input,select,textarea").not('[type\x3d"submit"],[type\x3d"reset"],[type\x3d"image"]');if(!this._bindedForm)return a;var c=b(this._bindedForm).attr("id");return b("input,select,textarea").not('[type\x3d"submit"],[type\x3d"reset"],[type\x3d"image"]').filter(function(){var e=b(this),f=e.attr("form");return f&&f===c||!f&&-1!==a.index(e)}).toArray()},_getInputGroupElements:function(){var a=b("[data-h5-input-group-container]");return this.$find("[data-h5-input-group-container]").filter(function(){var c=
b(this),e=c.attr("form");return e&&e===formId||!e&&-1!==a.index(c)}).toArray()},_isGroupName:function(a){if(null==a||""==a)return!1;for(var c=this._getInputGroupElements(),e=0,f=c.length;e<f;e++){var g=b(c[e]).data("h5-input-group-container");if(a===g)return!0}return!1},_addRuleCreator:function(a,b){this._ruleCreators.push({key:a,func:b})},_resetPlugin:function(a,b){b.reset&&b.reset.call(b)},_addOutputPlugin:function(a,b){if(this._plugins[a])this.log.warn('プラグイン"{0}"は登録済みです。',a);else{var c=g.core.controller(this._bindedForm||
this.rootElement,b);c._setSetting&&c._setSetting(this._margePluginSettings(a));this.manageChild(c);this._setDefaultMessages(c);this._plugins[a]=c}},_ruleDefaultMessageMap:{},_setDefaultMessages:function(a){for(var b in this._ruleDefaultMessageMap)a._setDefaultMessage(b,this._ruleDefaultMessageMap[b])},setDefaultMessage:function(a,b){this._ruleDefaultMessageMap[a]=b},_lastResult:null,_validate:function(a,b){var c=this.getValue(a),c=this._validationLogic.validate(c,a,b,this._lastResult);this._lastResult._merge(c);
if(c.isAsync){for(var e=c.validatingProperties,f=0,g=e.length;f<g;f++)this._waitingValidationResultMap[e[f]]=c;c.addEventListener("validate",this._asyncValidateResultListenerWrapper);c.addEventListener("validateComplete",this._asyncValidateResultListenerWrapper);c.addEventListener("abort",this._asyncValidateResultListenerWrapper)}return c},getLastValidationResult:function(){return this._lastResult},_asyncValidateListener:function(a){var b=a.target,c=a.name;this._waitingValidationResultMap[c]===b&&
(this._updateByAsyncResult(a),this._callPluginForAsyncValidation(c,b),delete this._waitingValidationResultMap[c],this._fireValidationUpdateEvent("asyncResult"))},_updateByAsyncResult:function(a){var d=a.name,e=a.violation,f=this._lastResult;if(e){f.isValid=!1;c(d,f.invalidProperties)&&f.invalidCount++;f.invalidReason[d]||(f.invalidReason[d]={name:d,value:a.value,violation:[]});a=0;for(var g=f.invalidReason[d].violation.length;a<g;a++)if(e.ruleName===f.invalidReason[d].violation[a].ruleName){f.invalidReason[d].violation[a]=
e;return}f.invalidReason[d].violation.push(e);f.violationCount++}else c(d,f.validProperties),f.validCount++;f.validatingProperties.splice(b.inArray(d,f.validatingProperties),1);f.isValid&&f.validatingProperties.length||(f.isAllValid=f.isValid)},_asyncAbortListener:function(a){a=a.target;for(var b in this._waitingValidationResultMap)this._waitingValidationResultMap[b]===a&&delete this._waitingValidationResultMap[b];this._removeAllValidationResultListenerWrapper(a)},_asyncValidateCompleteListener:function(a){this._removeAllValidationResultListenerWrapper(a.target)},
_removeAllValidationResultListenerWrapper:function(a){a.removeEventListener("validate",this._asyncValidateResultListenerWrapper);a.removeEventListener("validateComplete",this._asyncValidateResultListenerWrapper);a.removeEventListener("abort",this._asyncValidateResultListenerWrapper)},_pluginElementEventHandler:function(a,c){var e=a.event.target;if(this._isFormControls(e)){var f=e.name;if(f){var g;b(this._getInputGroupElements()).find(e).length&&(g=b(e).closest("[data-h5-input-group-container]").data("h5-input-group-container"));
var h;switch(c){case "_onValidate":h="validate";break;case "_onFocus":h="focus";break;case "_onBlur":h="blur";break;case "_onChange":h="change";break;case "_onKeyup":h="keyup";break;default:h="validate"}var k=this._validate(g||f,h);this._callPluginElementEvent(c,e,f,k);g&&(e=this._getElementByName(g),this._callPluginElementEvent(c,e,g,k));this._fireValidationUpdateEvent(h)}}},_fireValidationUpdateEvent:function(a){this.trigger("validationUpdate",{timing:a})},_callPluginValidateEvent:function(a,b){var c=
this._plugins,e;for(e in c){var f=c[e];f[a]&&f[a].call(f,b)}},_callPluginElementEvent:function(a,b,c,e){var f=this._plugins,g;for(g in f){var h=f[g];if(h[a])h[a](b,c,e)}},_callPluginForAsyncValidation:function(a,b){var c=this._getElementByName(a),e=this._plugins,f;for(f in e){var g=e[f];g._onAsyncValidate&&g._onAsyncValidate(c,a,b)}},_submitHandler:function(a,b){a.event.preventDefault();var c=this.validate();c.isAsync?c.addEventListener("validateComplete",function(){this.isAllValid&&b[0].submit()}):
c.isAllValid&&b[0].submit()},_isFormControls:function(a){return-1!==b(this._getElements()).index(a)},_createEmptyValidationResult:function(){return new e({validProperties:[],invalidProperties:[],validatingProperties:[],properties:[],invalidReason:{},isAsync:!1,isValid:!0,isAllValid:!0,violationCount:0,validPropertyToRulesMap:{},nameToRuleSetMap:{},disabledProperties:[]})}})})();(function(){function c(){r||(r=navigator.geolocation);return r}function e(b,c){this.oblateness=b;this.semiMajorAxis=c}function f(){}
var r=null,w=g.env.ua;e.prototype.getOblateness=function(){return this.oblateness};e.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var t=new e(298.257222,6378137),u=new e(299.152813,6377397.155),z=Math.PI/180;b.extend(f.prototype,{isSupported:w.isIE&&9<=w.browserVersion?!0:!!c(),getCurrentPosition:function(b){var e=g.async.deferred();c().getCurrentPosition(function(b){e.resolve(b)},function(b){e.reject(ka(2002,null,b))},b);return e.promise()},watchPosition:function(b){function e(){}
var f=g.async.deferred(),m=c().watchPosition(function(b){f.notify(b)},function(b){c().clearWatch(m);f.reject(ka(2002,null,b))},b);e.prototype.unwatch=function(){c().clearWatch(m);f.resolve()};return f.promise(new e)},getDistance:function(b,c,f,g,r){isFinite(b)&&isFinite(c)&&isFinite(f)&&isFinite(g)||m(2E3);var h=r?r:t;h instanceof e||m(2001);r=h.getSemiMajorAxis();h=h.getOblateness();b*=z;f*=z;var a=(b+f)/2,h=Math.pow(Math.sqrt(2*h-1)/h,2),d=Math.sqrt(1-h*Math.pow(Math.sin(a),2));return Math.sqrt(Math.pow(r*
(1-h)/Math.pow(d,3)*(b-f),2)+Math.pow(r/d*Math.cos(a)*(c*z-g*z),2))},GS_GRS80:t,GS_BESSEL:u});g.u.obj.expose("h5.api",{geo:new f})})();(function(){function c(b){if(b){var a=b.deferred;(va(a)||Aa(a)||!b.result)&&m(3E3)}}function e(c,a,d){if(b.isPlainObject(c))for(var e in c){var f=b.trim(e).replace(/ +/g," ").split(" "),g=[];""===f[0]?m(3011):1===f.length?(g.push(f[0]),g.push("\x3d"),g.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(f[1])?3===f.length&&/^like$/i.test(f[1])?(g.push(f[0]),g.push(f[1]),g.push("?"),
g.push("ESCAPE"),g.push('"'+f[2]+'"')):(g.push(f[0]),g.push(f[1]),g.push("?")):m(3003);a.push(g.join(" "));d.push(c[e])}}function f(){}function r(){this._multiple=!1}function w(b){this._db=b;this._df=H();this._tx=null;this._tasks=[];this._queue=[]}function t(b,a,c){this._statements=[];this._parameters=[];this._executor=b;this._tableName=a;this._columns=F(c)?c.join(", "):"*";this._orderBy=this._where=null}function u(b,a,c){this._statements=[];this._parameters=[];this._executor=b;this._tableName=a;
this._values=c?Q(c):[];this._df=H();this._multiple=!0}function z(b,a,c){this._statements=[];this._parameters=[];this._executor=b;this._tableName=a;this._values=c;this._where=null}function y(b,a){this._statements=[];this._parameters=[];this._executor=b;this._tableName=a;this._where=null}function p(b,a,c){this._statements=[];this._parameters=[];this._executor=b;this._statements.push(a);this._parameters.push(c||[])}function n(b){this._db=b}var H=g.async.deferred,G=g.u.str.format;b.extend(r.prototype,
{execute:function(){return this._executor.add(this)._execute(function(b){return b[0]})}});b.extend(w.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(b){this._tasks.push({deferred:b,result:null})},_setResult:function(b){this._getRecentTask().result=b},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(b){b instanceof r||m(3009);var a=this._getRecentTask();a&&!a.result||this._queue.push(b);return this},_execute:function(b){function a(){if(0===
f.length){var c=b(g);d._setResult.apply(d,[c]);e.notify(c,d)}else{for(var k=f.shift(),m=k._statements,n=k._parameters,p=H().resolve().promise(),c=[],r=0,t=m.length;r<t;r++)(function(b,a){p=pa(p,function(){var e=H();d._tx.executeSql(b,a,function(b,a){c.push(k._onComplete(a));e.resolve()});return e.promise()})})(m[r],n[r]);pa(p,function(){g.push(k._multiple?c:c[0]);a()})}}var d=this,e=this._df,f=this._queue,g=[];try{c(this._getRecentTask());this._addTask(e);for(var m=0,k=f.length;m<k;m++)f[m]._buildStatementAndParameters();
this._runTransaction()?a():this._db.transaction(function(b){d._tx=b;a()},function(b){d._tx=null;for(var a=d._tasks,c=a.length-1;0<=c;c--)a[c].deferred.reject(ka(3010,["SQLDB ERROR(code\x3d"+b.code+")",b.message],b))},function(){d._tx=null;for(var b=d._tasks,a=b.length-1;0<=a;a--){var c=b[a];c.deferred.resolve(c.result)}})}catch(n){e.reject(n)}this._df=H();return e.promise()},execute:function(){return this._execute(function(b){return b})},promise:function(){return this._df.promise()}});t.prototype=
new r;b.extend(t.prototype,{where:function(c){b.isPlainObject(c)||D(c)||m(3004,["Select","where"]);this._where=c;return this},orderBy:function(c){b.isPlainObject(c)||D(c)||m(3004,["Select","orderBy"]);this._orderBy=Q(c);return this},_buildStatementAndParameters:function(){var c,a=this._where;c=G("SELECT {0} FROM {1}",this._columns,this._tableName);if(b.isPlainObject(a)){var d=[];e(a,d,this._parameters);c+=" WHERE "+d.join(" AND ")}else D(a)&&(c+=" WHERE "+a);F(this._orderBy)&&(c+=" ORDER BY "+this._orderBy.join(", "));
this._statements.push([c]);this._parameters=[this._parameters]},_onComplete:function(b){return b.rows}});u.prototype=new r;b.extend(u.prototype,{_buildStatementAndParameters:function(){var c=this._values,a=this._statements,d=this._parameters;if(0===c.length)a.push(G("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else for(var e=0,f=c.length;e<f;e++){var g=c[e];if(null==g)a.push(G("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else if(b.isPlainObject(g)){var m=[],k=[],
n=[],p;for(p in g)m.push("?"),k.push(p),n.push(g[p]);a.push(G("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,k.join(", "),m.join(", ")));d.push(n)}}},_onComplete:function(b){return b.insertId}});z.prototype=new r;b.extend(z.prototype,{where:function(c){b.isPlainObject(c)||D(c)||m(3004,["Update","where"]);this._where=c;return this},_buildStatementAndParameters:function(){var c,a=this._where;c=this._values;var d=[],f;for(f in c)d.push(f+" \x3d ?"),this._parameters.push(c[f]);c=G("UPDATE {0} SET {1}",
this._tableName,d.join(", "));b.isPlainObject(a)?(d=[],e(a,d,this._parameters),c+=" WHERE "+d.join(" AND ")):D(a)&&(c+=" WHERE "+a);this._statements.push([c]);this._parameters=[this._parameters]},_onComplete:function(b){return b.rowsAffected}});y.prototype=new r;b.extend(y.prototype,{where:function(c){b.isPlainObject(c)||D(c)||m(3004,["Del","where"]);this._where=c;return this},_buildStatementAndParameters:function(){var c,a=this._where;c=G("DELETE FROM {0}",this._tableName);if(b.isPlainObject(a)){var d=
[];e(a,d,this._parameters);c+=" WHERE "+d.join(" AND ")}else D(a)&&(c+=" WHERE "+a);this._statements.push([c]);this._parameters=[this._parameters]},_onComplete:function(b){return b.rowsAffected}});p.prototype=new r;b.extend(p.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(b){return b}});b.extend(n.prototype,{select:function(b,a,c){D(b)||m(3001,"select");F(a)||"*"===a||m(3005,"select");return new t(this.transaction(c),b,a)},insert:function(c,a,d){D(c)||m(3001,"insert");null==
a||F(a)||b.isPlainObject(a)||m(3006,"insert");return new u(this.transaction(d),c,a)},update:function(c,a,d){D(c)||m(3001,"update");b.isPlainObject(a)||m(3006,"update");return new z(this.transaction(d),c,a)},del:function(b,a){D(b)||m(3001,"del");return new y(this.transaction(a),b)},sql:function(b,a,c){D(b)||m(3007,"sql");null==a||F(a)||m(3008,"sql");return new p(this.transaction(c),b,a)},transaction:function(b){void 0==b||b instanceof w||m(3002,"transaction");return b?b:new w(this._db)}});b.extend(f.prototype,
{isSupported:!!window.openDatabase,open:function(b,a,c,e){if(this.isSupported)return b=openDatabase(b,a,c,e),new n(b)}});g.u.obj.expose("h5.api",{sqldb:new f})})();(function(){function c(b){this._storage=b}b.extend(c.prototype,{getLength:function(){return this._storage.length},key:function(b){return this._storage.key(b)},getItem:function(b){b=this._storage.getItem(b);return null===b?null:g.u.obj.deserialize(b)},setItem:function(b,c){this._storage.setItem(b,g.u.obj.serialize(c))},removeItem:function(b){this._storage.removeItem(b)},
clear:function(){this._storage.clear()},each:function(b){for(var c=this._storage,g=0,m=c.length;g<m;g++){var t=c.key(g);b(g,t,this.getItem(t))}}});g.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__","ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(b){return!1}}():!1,local:new c(window.localStorage),session:new c(window.sessionStorage)})})();(function(){function c(b){b=g.core.controllerManager.getControllers(b,
{deep:!0});for(var a=0,c=b.length;a<c;a++)ma(b[a])||b[a].dispose()}function e(a,c){var d=b(a).filter(c),e=b(a).find(c);if(0===d.length)return e;if(0===e.length)return d;d=b.makeArray(d);e=b.makeArray(e);return b(d.concat(e))}function f(a){a=b(a).closest("[data-h5-default-scene],[data-h5-scene]");return a.length?a.get(0):null}function r(a){a=b(a).closest("[data-h5-main-scene-container],[data-h5-scene-container]");return a.length?a.get(0):null}function w(b,a){if(b===a)return!0;var c=r(b),d=a?r(a):null;
return c!==d?!1:f(b)===a}function t(a,c,d){var h=a?a:document.body;a=b(h);if(0!==a.length){1!==a.length&&m(1E5);if(!ta){var k=e(h,"[data-h5-main-scene-container]");0===k.length&&(k=e(h,"main"),0===k.length&&h===document.body&&(k=b(h)),0<k.length&&k.eq(0).attr("data-h5-main-scene-container","data-h5-main-scene-container"))}if(a.is("[data-h5-scene-container]"))ea(h);else if(a.is("[data-h5-main-scene-container]"))ea(h,!0);else{var l=b(h).is("[data-h5-default-scene],[data-h5-scene]")&&!u(h),n=l?g.async.deferred():
null,q=b(h).is("[data-h5-default-scene],[data-h5-scene]")?h:f(h),r=!1;e(h,"[data-h5-controller]").each(function(){for(var a=this.getAttribute("data-h5-controller").split(","),e=0,f=a.length;e<f;e++){var g=b.trim(a[e]);if(""===g||c&&g!==c)return!0;if(!u(this,g)){if(!w(this,q))return!0;var k=!1;l&&!r&&this===h&&(k=r=!0);z(this,g);g=p(g,this,k?d:null);k&&g.done(function(b){n.resolve(b)})}}});a.find("[data-h5-main-scene-container],[data-h5-scene-container]").each(function(){if(w(this,q))return!0;var a=
b(this);a.is("[data-h5-main-scene-container]")?ea(this,!0):a.is("[data-h5-scene-container]")&&ea(this)});if(l)return n.promise()}}}function u(a,c){var d=b(a).attr("data-h5-dyn-controller-bound");if(!d)return!1;d=d.split(",");if(!c&&0<d.length)return!0;for(var e=0;e<d.length;e++)if(b.trim(d[e])===c)return!0;return!1}function z(a,c){var d=b(a).attr("data-h5-dyn-controller-bound")||"";d&&(d+=",");d+=c;b(a).attr("data-h5-dyn-controller-bound",d)}function y(a,c,d){var e=a?a:document.body,f=g.async.deferred();
a=!1;var h=null,k=b(e).find("\x3e[data-h5-default-scene]");0<k.length&&(h=k.eq(0),u(h)||(a=!0,h.is("[data-h5-controller]")||(z(h,ha.__name),h=g.core.controller(h,ha,d),f.resolve(h))));a||(e=b(e).children().eq(0).filter("[data-h5-scene]"),0<e.length&&!u(e)&&(a=!0,e.attr("data-h5-default-scene","data-h5-default-scene"),k=e,e.is("[data-h5-controller]")||(z(e,ha.__name),h=g.core.controller(e,ha,d),f.resolve(h))));a||m(100001);c=t(k.get(0),c,d);Aa(f)||c.done(function(b){f.resolve(b)});return f.promise()}
function p(b,a,c){var d=g.async.deferred();g.res.get(b).then(function(b){b=g.core.controller(a,b,c);d.resolve(b)});return d.promise()}function n(b,a){this.type=b;this.data=a}function F(a,c){this.type=a;this._targetWindow=c;this._closed=!1;this._subscribers=[];var d=this;this._recv=function(b){d._receiveMessage(b.originalEvent)};b(window).on("message",this._recv)}function G(b,a){var c=qa[b];c||(c=new F(b,a),qa[b]=c);return c}function h(){this._recvChannel=new F("__h5__RMI",window.opener);this._recvChannel.subscribe(this._receive,
this);this._sendChannel=new F("__h5__RMI_Result",window.opener)}function a(b){this.targetWindow=b;this.id="FIXME";this._invocationMap={};this._invocationSeq=g.core.data.createSequence(1,1,g.core.data.SEQ_INT);this._sendChannel=G("__h5__RMI",b);this._recvChannel=G("__h5__RMI_Result",b);this._recvChannel.subscribe(this._receive,this)}function d(b){b=b||{};var a;if(d._instance)a=d._instance;else{a=d._instance=this;var c=!!window.history.pushState;a.urlHistoryMode=b.urlHistoryMode||X.HISTORY;switch(a.urlHistoryMode){case X.HASH:a.urlHistoryActualMode=
P.HASH;break;case X.NONE:a.urlHistoryActualMode=P.NONE;break;case X.FULLRELOAD:a.urlHistoryActualMode=P.FULLRELOAD;break;case X.HISTORY:case X.HISTORY_OR_HASH:case X.HISTORY_OR_ERROR:case X.HISTORY_OR_NONE:case X.HISTORY_OR_FULLRELOAD:c&&(a.urlHistoryActualMode=P.HISTORY)}if(!a.urlHistoryActualMode&&!c)switch(a.urlHistoryMode){case X.HISTORY_OR_ERROR:m(100011);return;case X.HISTORY:case X.HISTORY_OR_HASH:a.urlHistoryActualMode=P.HASH;break;case X.HISTORY_OR_NONE:a.urlHistoryActualMode=P.NONE;break;
case X.HISTORY_OR_FULLRELOAD:a.urlHistoryActualMode=P.FULLRELOAD}a.urlHistoryActualMode||m(100012,a.urlHistoryMode);b.baseUrl&&(c=new l(b.baseUrl),a._baseUrl=c.pathname.replace(/^\/?(.*?)\/?$/,"/$1/"));a._urlMaxLength=b.urlMaxLength||URL_MAX_LENGTH;var e=a._onChange;a._onChange=function(){return e.apply(a,arguments)}}b.routes&&(a._routes=a._routes.concat(b.routes));return a}function l(b){null!=b&&(b=b.match(l.regExp),this.href=b[0]||"",this.protocol=b[1]||"",this.host=b[2]||"",this.hostname=b[3]||
"",this.port=b[4]||"",this.pathname=b[5]||"",this.dir=b[6]||"",this.file=b[7]||"",this.search=b[8]||"",this.hash=b[9]||"")}function v(b){this.__controller=b}function L(){}function S(a){a=b(a);if(!1===a.children().eq(0).is("[data-h5-default-scene],[data-h5-scene]")){a.wrapInner(b("\x3cdiv data-h5-default-scene\x3e\x3c/div\x3e"));var c=a.attr("data-h5-controller");c&&a.removeAttr("data-h5-controller").children().attr("data-h5-controller",c)}}function k(a,c,d){var f=g.async.deferred();g.ajax({url:a,
dataType:"html",method:c||"get",data:d}).done(function(a){var c=a.replace(ra,"").match(na);a=c?"\x3cdiv data-h5-dyn-dummy-body "+c[1]+"\x3e"+c[2]+"\x3c/div\x3e":a;va.test(a)&&(a="\x3cdiv data-h5-scene-container\x3e"+a+"\x3c/div\x3e");a=b(a);c=e(a,"[data-h5-main-scene-container]");0===c.length&&(c=e(a,"main"));0<c.length&&(a=c.eq(0),a.attr("data-h5-main-scene-container","data-h5-main-scene-container"));if(1<a.length||!b(a).is("[data-h5-main-scene-container],[data-h5-scene-container]")&&!a.is("[data-h5-dyn-dummy-body]"))a=
b("\x3cdiv data-h5-scene-container\x3e\x3c/div\x3e").append(a);S(a);f.resolve(a.children())}).fail(function(b){f.reject(b)});return f}function N(a,c,d){D(a)?c=k(a,c,d):(c=g.async.deferred(),a=null==a?b('\x3cdiv class\x3d"h5-scene"\x3e\x3c/div\x3e').get(0):g.u.obj.isJQueryObject(a)?a[0]:a,c.resolve(a));return c.promise()}function T(){}function Z(a,c){var d="";b.each(a,function(a,b){d&&(d+="\x26");if(c||"args"!==a&&"serverArgs"!==a)if("serverArgs"===c){var e=encodeURIComponent(a);if(b instanceof Array){for(var f=
"",h=0;h<b.length;h++)f&&(f+="\x26"),f+=e+"[]",f+="\x3d",f+=encodeURIComponent(b[h]);d+=f}else d+=e,d+="\x3d",d+=encodeURIComponent(b)}else d="args"===c?d+encodeURIComponent(W+a):d+encodeURIComponent(ka+a),d+="\x3d",d+=encodeURIComponent(g.u.obj.serialize(b).substring(2));else d+=Z(b,a)});return d}function A(a){A._checkKeyRegExp||(A._checkKeyRegExp=new RegExp("^("+M+"|"+la+")?(.+)"),A._checkArrayRegExp=/^(.*)\[\]$/);var c={},d=A._checkKeyRegExp,e=A._checkArrayRegExp;b.each(a.split("\x26"),function(a,
b){b=b.split("\x3d");var f=decodeURIComponent(b[0]),h=decodeURIComponent(b[1]),k=f.match(d);if(k){f=k[1]||"";k=k[2];if(!f){c.serverArgs=c.serverArgs||{};var l=k.match(e);l?(l=l[1],!1===l in c.serverArgs&&(c.serverArgs[l]=[]),c.serverArgs[l]instanceof Array&&c.serverArgs[l].push(h)):c.serverArgs[k]=h}f===W?(c.args=c.args||{},c.args[k]=g.u.obj.deserialize("2|"+h)):f===ka&&(c[k]=g.u.obj.deserialize("2|"+h))}});return c}function C(b){if(!b)return"";C._regExp||(C._regExp=new RegExp("(^|\x26)(?:"+M+"|"+
la+")[^\x3d]*\x3d.*?(?\x3d\x26|$)","g"));var a=C._regExp,c=new l(b);b=c.pathname;c=c.search||"";(c=c.substring(1).replace(a,""))&&(c="?"+c);return b+c}function V(b){var a=new l(b);b=a.pathname||"";a=A((a.search||"").substring(1));a.to||(a.to=b);return a}function oa(a){a=b.extend(!0,{},a);var c=a.to,d="",e="";x.test(c)||(delete a.to,c=C(c),e=new l(c),d=e.pathname,e=e.search);(a=Z(a))&&(e=e+(e?"\x26":"?")+a);return d+e}function ea(a,c){null==a&&(a=b("\x3cdiv\x3e\x3c/div\x3e").get(0));b(a).is("[data-h5-dyn-container-bound]")&&
m(100007);var d=c;c?b(a).is(":not([data-h5-main-scene-container])")&&b(a).attr("data-h5-main-scene-container","data-h5-main-scene-container"):(b(a).is(":not([data-h5-scene-container])")&&b(a).attr("data-h5-scene-container","data-h5-scene-container"),d=g.settings.scene.followTitle);d=O.core.controllerInternal(a,ua,{isMain:c,followTitle:d},{async:!1});b(a).attr("data-h5-dyn-container-bound","data-h5-dyn-container-bound");return d}function da(){aa||(aa=!0,t())}function I(a,b){return g.core.controllerManager.getControllers(a||
document.body,{name:ua.__name,deep:b&&!1===b.deep?!1:!0})}var Y={NORMAL:"normal",ONCE:"once",SILENT:"silent"},R={GET:"get",POST:"post"},X={HASH:"hash",HISTORY:"history",NONE:"none",FULLRELOAD:"fullreload",HISTORY_OR_HASH:"historyOrHash",HISTORY_OR_ERROR:"historyOrError",HISTORY_OR_NONE:"historyOrNone",HISTORY_OR_FULLRELOAD:"historyOrFullreload"},P={HASH:"hash",HISTORY:"history",NONE:"none",FULLRELOAD:"fullreload"},ma=O.core.isDisposing,aa=!1,W=g.settings.scene.clientQueryStringPrefix,ka=g.settings.scene.clientFWQueryStringPrefix,
M=null,la=null,ba=g.settings.scene.urlHistoryMode,q=null,x=/Controller$/,J=null,U=null,ca=null,pa=null,ha={__name:"h5.scene.DummyController"};g.mixin.eventDispatcher.mix(F.prototype);b.extend(F.prototype,{send:function(a){this._closed?alert("クローズ済みのチャネルです。送信できません。"):(a=new n(this.type,a),a=g.u.obj.serialize(a),this._targetWindow.postMessage(a,location.origin))},subscribe:function(a,b){this._subscribers.push({func:a,thisObj:b?b:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},
_receiveMessage:function(a){var b;try{if(b=g.u.obj.deserialize(a.data),b.type!==this.type)return}catch(c){return}a=this._subscribers;for(var d=0,e=a.length;d<e;d++){var f=a[d];f.func.call(f.thisObj,b.data)}this.dispatchEvent({type:"message",data:b.data})}});var qa={};b.extend(h.prototype,{_receive:function(a){var b;b=g.core.controllerManager.getControllers(document.body)[0];var c=a.id,d=a.method;a=a.args;!b[d]||K(b[d])?this._callFunction(c,b,d,a):this._sendChannel.send({id:c,isAsync:!1,status:4,result:null})},
_callFunction:function(a,b,c,d){d=Q(d);var e=void 0;try{e=b[c].apply(b,d)}catch(f){this._sendChannel.send({id:a,isAsync:!1,status:1,result:null});return}var h=this;g.async.isPromise(e)?e.done(function(){var b=g.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=g.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:e})}});b.extend(a.prototype,{invoke:function(a,
b){var c=g.async.deferred(),d={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[d.id]=c;this._sendChannel.send(d);return c.promise()},_receive:function(a){var b=a.id,c=this._invocationMap[b];if(c){delete this._invocationMap[b];var b=a.result,d=a.status;a.isAsync?2===d?c.resolve.apply(c,b):c.reject.apply(c,b):0===d?c.resolve(b):c.reject()}}});b.extend(d.prototype,{_routes:[],_baseUrl:null,_started:!1,_urlMaxLength:null,_silentOnce:!1,urlHistoryMode:null,urlHistoryActualMode:null,
_urlForSimulate:null,_onChange:function(){if(this._silentOnce)this._silentOnce=!1;else{var a,b=null;this._urlForSimulate?(a=this._urlForSimulate,b=this._contextualData,this._urlForSimulate=this._contextualData=null):(a=this._getRouterLocation(),a=a.pathname+a.search);for(var c=this._removeBaseUrl(a),d=null,e=0;e<this._routes.length;e++){var f=this._routes[e];if(D(f.test)){if(c===f.test){d=f.func(a,b);break}}else if(f.test instanceof RegExp){if(f.test.test(c)){d=f.func(a,b);break}}else if("function"===
typeof f.test&&f.test(c)){d=f.func(a,b);break}}d&&this.evaluate(d,b)}},start:function(a){a=a||{};if(!this._started)switch(this._checkUrlLength(location.href,{throwOnError:!0}),this._started=!0,a&&a.silent||this._onChange(),this.urlHistoryActualMode){case P.HASH:b(window).on("hashchange",this._onChange);break;case P.HISTORY:b(window).on("popstate",this._onChange)}},navigate:function(a,b){b=b||{};if(this._started){this._checkUrlLength(a,{throwOnError:!0});var c=!1,d=this.urlHistoryActualMode;switch(b.mode){case "silent":c=
!0;break;case "none":d=P.NONE;break;case "fullreload":d=P.FULLRELOAD}var e=this._toAbusolute(a);switch(d){case P.HASH:c&&(this._silentOnce=!0);this.compareUrl(e)?this._onChange():b.replaceHistory?location.replace("#"+e):location.hash=e;break;case P.HISTORY:c&&(this._silentOnce=!0);this.compareUrl(e)||(b.replaceHistory?history.replaceState(null,null,e):history.pushState(null,null,e));this._onChange();break;case P.FULLRELOAD:this.compareUrl(e)?location.reload():b.replaceHistory?location.replace(e):
location.href=e;break;case P.NONE:this.evaluate(e)}}},stop:function(){if(this._started)switch(this._started=!1,this.urlHistoryActualMode){case P.HASH:b(window).off("hashchange",this._onChange);break;case P.HISTORY:b(window).off("popstate",this._onChange)}},_checkUrlLength:function(a,b){b=b||{};if(null==this._urlMaxLength)return!0;if((new l(a)).protocol)return a.length<=this._urlMaxLength;var c=this._toAbusolute(a);this.urlHistoryActualMode===P.HASH&&(c=window.location.pathname+(window.location.search||
"")+"#"+c);c=ga(c);b.writeBack&&(b.url=c,b.urlLength=c.length,b.urlMaxLength=this._urlMaxLength);return c.length<=this._urlMaxLength?!0:!1},_getBaseDir:function(){return this._baseUrl?this._baseUrl:this._getRouterLocation().dir},_removeBaseUrl:function(a){var b=this._baseUrl;b&&0===a.indexOf(b)&&(a=a.replace(b,""));return a},evaluate:function(a,b){this._urlForSimulate=this._toAbusolute(a);this._contextualData=b;this._onChange()},_toAbusolute:function(a){a=new l(a);var b=this._getRouterLocation();
a.isSearch()?a=b.pathname+a.search+a.hash:a.isHash()?a=b.pathname+b.search+a.hash:(a=a.pathname+a.search+a.hash,0!==a.indexOf("/")&&(a=this._getBaseDir()+a));a=ga(a);a=new l(a);return a.pathname+a.search+a.hash},compareUrl:function(a,b){if(null==b){var c=this._getRouterLocation();b=c.pathname+c.search}0!==a.indexOf("/")&&(a=this._toAbusolute(a));0!==b.indexOf("/")&&(b=this._toAbusolute(b));return a===b},_getRouterLocation:function(){return this.urlHistoryActualMode===P.HASH&&location.hash?new l(location.hash.substring(1)):
new l(location.href)}});b.extend(l.prototype,{href:void 0,protocol:void 0,host:void 0,hostname:void 0,port:void 0,pathname:void 0,dir:void 0,file:void 0,search:void 0,hash:void 0,isSearch:function(){return!this.protocol&&!this.host&&!this.pathname&&this.search},isHash:function(){return!this.protocol&&!this.host&&!this.pathname&&!this.search&&this.hash}});l.regExp=/^(?:(\w+:)?\/\/(([^\/:]+)(?::(\d+))?))?((\/?.*?)([^\/]*?))(\?.*?)?(#.*)?$/;window.opener&&new h;b.extend(v.prototype,{navigate:function(a){ma(this.__controller)||
this.__controller.trigger("sceneChangeRequest",a)},getParentContainer:function(){if(ma(this.__controller))return null;var a=r(this.__controller.rootElement);return a?I(a)[0]:null}});b.extend(function(b,c,d,e){this.window=b=window.open(b,c,d);this._isModal=!1;this._parentBlocker=null;this.setModal(!0===e?!0:!1);this._rmi=new a(b);this._watchChild()}.prototype,{invoke:function(a,b){return this._rmi.invoke(a,b)},getControllerProxy:function(a){return new L},setModal:function(a){this._isModal!=a&&(this._isModal?
(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=g.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),this._isModal=a)},close:function(){var a=g.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=this,b=setInterval(function(){a.window.closed&&(clearInterval(b),a.setModal(!1))},300)}});var ra=/\x3c!--(?:\s|\S)*?--\x3e/g,na=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,va=/^\s*(?!\s|<)/;
b.extend(T.prototype,{onChange:function(a,c){var d=g.async.deferred();b(a).empty();b(c).appendTo(a);d.resolve();return d.promise()},onChangeStart:function(a,b,c){this._ind=g.ui.indicator({target:a,block:!0,message:"遷移中..."}).show()},onChangeEnd:function(a,b,c){this._ind.hide()}});var ta=null,wa={__name:"h5.scene.NotReshowableController",__init:function(a){a=a.args._notReshowableMessage;b(this.rootElement).html("\x3ch1\x3e"+a+"\x3c/h1\x3e")}},ua={__name:"h5.scene.SceneContainerController",isMain:!1,
_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,_detour:{},_router:null,_first:!0,_title:"",__init:function(a){a=a.args||{};var c=this.rootElement,d=a.isMain,e=this;this.isMain=!!d;this.followTitle=d&&a.followTitle;this.isMain&&ta&&m(100003);this._containerName=b(c).attr("data-h5-main-scene-container")||b(c).attr("data-h5-scene-container");this._currentController=null;S(c);this._transition=new T;this._transition.onChangeStart(c);this.on("{rootElement}","sceneChangeRequest",
this.own(this._onSceneChangeRequest));this._router=pa;if(this.isMain){ta=this;if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));q=this._router.urlHistoryActualMode;this._router.start()}else y(c).done(function(a){e._currentController=a;e._transition.onChangeEnd(e.rootElement,null,a.rootElement);e._transition=null;a=e._getTitleFromCurrentScene();null!=a&&e.setTitle(a)})},__dispose:function(){ma(this._currentController)||this._currentController.dispose();this._currentController=
null;this.isMain&&(this._router.stop(),ta=this._router=null)},_onAClick:function(a){a.event.preventDefault();this.navigate(a.event.originalEvent.target.href)},_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.navigate(a.evArg)}),0)},navigate:function(a){if(D(a))return this.navigate({to:a});this._navigateParam=a;a=b.extend(!0,{},a);this._transition=new T;this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var c=this._dfd=
g.async.deferred();this._isNavigated=!0;var d=a.to;if(this.isMain&&a.navigationType!==Y.SILENT){D(d)||m(100004,[d]);-1!==d.indexOf("#")&&m(100005,[d]);a.method===R.POST&&(this._detour.serverArgs=a.serverArgs,delete a.serverArgs);if(a.navigationType===Y.ONCE||a.method===R.POST)this._detour.args=g.u.obj.deserialize(g.u.obj.serialize(a.args)),delete a.args;d=a.replaceHistory;delete a.replaceHistory;a=oa(a);this._router.navigate(a,{replaceHistory:d})}else a=oa(a),this._router.evaluate(a,{container:this});
return c.promise()},setTitle:function(a){this._title=a;this.followTitle&&(document.title=a)},getTitle:function(){return this._title},_navigate:function(a,d){if(a){d=d||{};var e=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=new T,this._transition.onChangeStart(this.rootElement,e));e&&c(e);var f=this,g=null;if(d.navigationType===Y.ONCE||d.method===R.POST){if(!this._isNavigated){this._onNotReshowable(d);return}g=this._detour.args;delete this._detour.args}else g=d.args;
e=null;d.method===R.POST?(e=this._detour.serverArgs,delete this._detour.serverArgs):e=d.serverArgs;D(a)?x.test(a)?p(a,b("\x3cdiv\x3e\x3c/div\x3e"),g).done(function(a){f._navigateEnd(a,d)}):N(a,d.method,e).done(function(a){y(b("\x3cdiv\x3e\x3c/div\x3e").append(a),null,g).done(function(a){f._navigateEnd(a,d)})}).fail(function(b){m(100008,[a],b)}):a.__name&&x.test(a.__name)&&f._navigateEnd(a,d)}},_navigateEnd:function(a,c){var d=this,e=(this._currentController||{}).rootElement,f=a.rootElement;d._currentController=
a;var g=c&&c.title;null==g?this._navigateParam&&x.test(this._navigateParam.to)&&null!=a.sceneTitle?this.setTitle(a.sceneTitle):(g=this._getTitleFromCurrentScene(),null!=g&&this.setTitle(g)):this.setTitle(g);this._navigateParam=null;this._transition.onChange(this.rootElement,f).done(this.own(function(){this._dfd&&this._dfd.resolve({from:e,to:f});e&&b(e).remove();d._transition.onChangeEnd(d.rootElement,e,f);d._isNavigated=!1;d._dfd=null;d._transition=null}))},_getTitleFromCurrentScene:function(){var a=
this._currentController.rootElement,c=b(a).data("h5-scene-title");if(null!=c)return c;a=b(a).find("title");if(a.length)return a.text()},_onNotReshowable:function(a){if(U.__name&&x.test(U.__name)){var c=O.core.controllerInternal(b("\x3cdiv\x3e\x3c/div\x3e"),U,{_notReshowableMessage:"この画面は再表示できません。"});this._navigateEnd(c,a)}else a=D(U)?{to:U}:b.extend(!0,{},U),a.args=a.args||{},a.args._notReshowableMessage="この画面は再表示できません。",this._navigate(a.to,a)},_defaultFuncForRouter:function(a){var b=this,c=V(a),
d=c.to;if(this.isMain&&this._first){if(c.navigationType===Y.ONCE||c.method===R.POST){this._onNotReshowable(c);this._first=!1;return}var e=d&&x.test(d),f=q===P.HASH&&location.hash.substring(1);if(this._router.compareUrl(a)&&!f&&!e){y(this.rootElement,null,c.args).done(function(a){b._currentController=a;b._transition.onChangeEnd(b.rootElement,null,a.rootElement);b._transition=null;a=b._getTitleFromCurrentScene();null!=a&&b.setTitle(a)});this._first=!1;return}}d=d||location.pathname+location.search;
d=C(d);this._first&&(this._navigated=!0);this._navigate(d,c);this._first=!1}};O.core.addControllerInstantiationHook(function(a){a.scene=new v(a)});b(function(){W=g.settings.scene.clientQueryStringPrefix;M=W.replace(/\\/g,"\\\\");ka=g.settings.scene.clientFWQueryStringPrefix;la=ka.replace(/\\/g,"\\\\");ba=g.settings.scene.urlHistoryMode;J=parseInt(g.settings.scene.urlMaxLength);U=wa;ca=g.settings.scene.baseUrl;var a=[];g.settings.scene.routes&&(a=a.concat(g.settings.scene.routes));a=b.map(a,function(a){var b=
a.test;if(K(b))var c=b,b=function(a){var b=V(a);return c(a,b)};return{test:b,func:function(b,c){c=c||{};var d=a.navigationInfo;if(K(d))var e=V(b),d=d(b,e);if(null==d)return(c.container||ta)._defaultFuncForRouter(b),null;D(d)&&(d={to:d});return oa(d)}}});a.push({test:/.*/,func:function(a,b){b=b||{};(b.container||ta)._defaultFuncForRouter(a)}});pa=new d({routes:a,urlHistoryMode:ba,baseUrl:ca,urlMaxLength:J});g.settings.scene.autoInit&&da()});g.u.obj.expose("h5.scene",{createSceneContainer:ea,init:da,
getMainSceneContainer:function(){return ta},getSceneContainers:I,getSceneContainerByName:function(a){if(null==a)return null;var b=I();if(0===b.length)return null;if(a){for(var c=0;c<b.length;c++)if(b[c]._containerName===a)return b[c];return null}return b[0]},navigationType:Y,method:R,urlHistoryMode:X})})()})(jQuery);